{"version":3,"sources":["components/ingredient-details/ingredient-details.module.css","components/burger-factory/burger-constructor/order/order.module.css","components/ui/row-round-pictures/row-round-pictures.module.css","components/app-header/app-header.module.css","components/common/modal/modal-header/modal-header.module.css","components/burger-factory/burger-constructor/ingredient-item/ingredient-item.module.css","layouts/header/header.module.css","layouts/main/main.module.css","components/common/modal/modal-overlay/modal-overlay.module.css","components/common/modal/modal.module.css","layouts/scroll-container/scroll-container.module.css","components/order-by-id/order-by-id-ingredients-list/order-by-id-ingredient/order-by-id-ingredient.module.css","components/order-feed/order-feed.module.css","components/forms/profile/profile.module.css","pages/ingredient-page/ingredient-page.module.css","components/order-feeds-list-animation/order-feeds-list-animation.module.css","layouts/main-maximum-height/main-maximum-height.module.css","components/ui/price/price.module.css","components/ui/round-picture/round-picture.module.css","layouts/two-columns/two-columns.module.css","components/burger-factory/burger-ingredients/ingredients-list/ingredients-list.module.css","components/burger-factory/burger-ingredients/tab-nav-by-category/tab-nav-by-category.module.css","layouts/login-layout-container/login-layout-container.module.css","components/app-header/menu-button/menu-button.module.css","components/app-header/left-menu/left-menu.module.css","components/ui/logo-link/logo-link.module.css","common/functions.ts","api/api.ts","layouts/header/header.tsx","layouts/main/main.tsx","layouts/main-indent/main-indent.tsx","layouts/main-maximum-height/main-maximum-height.tsx","layouts/main-all-layouts/main-all-layouts.tsx","components/common/error-message/error-message.tsx","components/common/modal/hooks/use_toggle_modal.ts","components/common/modal/modal-header/modal-header.tsx","components/common/modal/modal-overlay/modal-overlay.tsx","components/common/modal/modal.tsx","components/details-modal/details-modal.tsx","components/hooks.ts","components/ingredient-details/ingredient-details.tsx","components/ingredient-details-by-id/ingredient-details-by-id.tsx","layouts/scroll-container/scroll-container.tsx","redux/action-types/ws-action-types.ts","redux/action-types/ws-action-creators.ts","components/ui/loader/loader.tsx","components/ui/price/price.tsx","components/ui/round-picture/round-picture.tsx","components/order-by-id/order-by-id-ingredients-list/order-by-id-ingredient/order-by-id-ingredient.tsx","components/order-by-id/order-by-id-ingredients-list/order-by-id-ingredients-list.tsx","components/order-by-id/order-by-id.tsx","layouts/two-columns/two-columns.tsx","models/drag-and-drop.ts","common/constants.ts","services/app-slice.ts","services/common.ts","services/constructor-ingredients-slice.ts","components/burger-factory/burger-constructor/ingredient-item/ingredient-item.tsx","components/burger-factory/burger-constructor/bun/bun.tsx","components/burger-factory/burger-constructor/constructor-ingredients-list/constructor-ingredients-list.tsx","routes/constants-path.ts","api/agent.ts","services/ingredients-slice.ts","services/order-slice.ts","components/order-details/order-details.tsx","components/burger-factory/burger-constructor/order/order.tsx","components/burger-factory/burger-constructor/burger-constructor.tsx","components/burger-factory/burger-ingredients/categories-section/categories-section.tsx","components/burger-factory/burger-ingredients/ingredient-card/ingredient-card.tsx","components/burger-factory/burger-ingredients/ingredients-list/ingredients-list.tsx","components/burger-factory/burger-ingredients/tab-nav-by-category/tab-nav-by-category.tsx","components/burger-factory/burger-ingredients/burger-ingredients.tsx","components/burger-factory/burger-ingredients/hooks/use-force-memo-update.ts","components/burger-factory/burger-ingredients/hooks/use-toggle-refs.ts","components/burger-factory/burger-factory.tsx","pages/burger-factory-page/burger-factory-page.tsx","components/ui/row-round-pictures/row-round-pictures.tsx","components/order-feed-element/order-feed-element.tsx","components/order-feed-elements-list/order-feed-elements-list.tsx","components/order-feed/statistics/statistics.tsx","components/order-feed/order-feed.tsx","pages/feed-page/feed-page.tsx","layouts/login-layout-container/login-layout-container.tsx","api/auth.ts","components/forms/common/names-forms.ts","services/user-slice.ts","components/forms/common/validate-form.ts","common/phrases.ts","components/forms/register/register.tsx","components/forms/form-wrapper/form-wrapper.tsx","components/forms/hooks/use-form.ts","components/forms/login/login.tsx","components/forms/forgot-password/forgot-password.tsx","components/forms/reset-password/reset-password.tsx","components/forms/common/animations-form.ts","components/forms/profile/profile.tsx","pages/forgot-password-page/forgot-password-page.tsx","pages/ingredient-page/ingredient-page.tsx","pages/login-page/login-page.tsx","pages/not-found-404-page/not-found-404-page.tsx","components/order-feeds-list-animation/order-feeds-list-animation.tsx","routes/profile-page-routes.tsx","pages/profile-page/profile-page.tsx","pages/register-page/register-page.tsx","pages/reset-password-page/reset-password-page.tsx","pages/order-by-id-page/order-by-id-page.tsx","routes/protected-from-authorized-route/protected-from-authorized-route.tsx","routes/protected-route/protected-route.tsx","routes/routes.tsx","components/app-header/menu-button/menu-button.tsx","components/app-header/left-menu/left-menu.tsx","components/ui/logo-link/logo-link.tsx","components/app-header/right-menu/right-menu.tsx","components/app-header/app-header.tsx","components/common/error-boundary/error-boundary.tsx","components/app/app.tsx","reportWebVitals.ts","api/ws.ts","redux/middleware/ws-worker.ts","services/current-ingredient-slice.ts","services/store.ts","redux/middleware/socket-middleware.ts","index.tsx","components/order-by-id/order-by-id.module.css","components/order-feed-element/order-feed-element.module.css","pages/profile-page/profile-page.module.css","components/burger-factory/burger-constructor/burger-constructor.module.css","components/burger-factory/burger-ingredients/ingredient-card/ingredient-card.module.css","components/order-feed/statistics/statistics.module.css","components/ui/loader/loader.module.css","components/order-details/order-details.module.css"],"names":["module","exports","require","dayjs","extend","relativeTime","isToday","isYesterday","utc","locale","errorAuthorized","setCookie","name","value","props","path","expires","Date","toUTCString","updatedCookie","encodeURIComponent","optionKey","optionValue","document","cookie","getCookie","matches","match","RegExp","replace","decodeURIComponent","undefined","getFormattedDateWithTime","date","firstPart","formatDate","format","fromNow","getFormattedDate","secondPart","local","lastPart","split","REFRESH_TOKEN","TOKEN","Api","localToken","localRefreshToken","localAbortController","isLoadingRefreshTokenLocal","waitForAsync","condition","delay","Promise","resolve","waitFor","refreshToken","token","this","t","isLoading","AbortController","abort","url","body","mainFetch","isProtect","method","ifNeedInitialRestartAbortController","ifNeedInitialRefreshToken","finalUrl","simpleFetch","res","status","json","refreshTokenOrLogout","responseError","signal","aborted","refreshTokenFetch","fetchError","isNeedRefreshToken","getNewFetchAfterTokenRefresh","logOut","Error","message","jwtExpired","youShouldBeAuthorized","isLoadingRefreshToken","postFetch","JSON","stringify","userTokens","accessToken","unauthorized","newFetchFields","getFiledRequest","fetch","headers","Authorization","retObject","mode","cache","credentials","redirect","referrerPolicy","cb","setTimeout","bind","instance","Header","children","className","styles","header","content","Main","main","MainIndent","MainMaximumHeight","main_maximum_height","MainAllLayouts","ErrorMessage","error","useToggleModal","useState","isOpenModal","setIsOpenModal","onCloseModal","useCallback","e","stopPropagation","onOpenModal","ModalHeader","onClose","modal_header","modal_header_content","modal_header_close_button","onClick","type","ModalOverlay","isAnimate","dataType","modal_overlay","modal_overlay_animate","target","getAttribute","modalRoot","getElementById","variants","visible","y","scaleX","hidden","Modal","classNameHeader","isAnimated","animateTime","timerId","setTimerId","isEndAnimate","setIsEndAnimate","isAnimationGoingOn","setIsAnimationGoingOn","controls","useAnimation","useEffect","clearTimeout","onKeyDown","key","preventDefault","handleOnClose","timeout","window","goAnimate","a","start","addEventListener","removeEventListener","createPortal","AnimatePresence","motion","div","initial","animate","exit","transition","duration","stiffness","modal","modal_body","DetailsModal","title","history","useHistory","id","useParams","goBack","React","cloneElement","useSelector","selectorHook","useDispatch","dispatchHook","IngredientDetails","ingredient","image_large","calories","carbohydrates","fat","proteins","ingredient_details","ingredient_image","alt","src","ingredient_name","ingredient_info","IngredientDetailsById","currentIngredient","setCurrentIngredient","ingredients","state","findIngredients","find","item","_id","ScrollContainer","style","styleInner","classNameInner","scroll_container","scroll_container_inner","memo","WS_ORDER_ALL_CONNECTION_START","WS_ORDER_ALL_CLOSE","WS_ORDER_CONNECTION_START","WS_ORDER_CLOSE","wsOrderAllConnectionStart","wsOrderAllClose","wsOrderConnectionStart","wsOrderClose","variantsLoader1","opacity","x","repeat","Infinity","variantsLoader2","variantsContainer","rotate","variantsLoader3","z","scale","variantsLoader4","Loader","loader_container","loader1","loader2","loader3","loader4","Price","price","RoundPicture","image","image_mobile","OrderByIdIngredient","counts","main_container","OrderByIdIngredientsList","list","setCounts","filteredList","setFilteredList","filteredListLocal","countsLocal","reduce","returnCountObj","push","length","map","index","OrderById","isShowTitle","dispatch","currentOrder","setCurrentOrder","setPrice","orderFeedAll","order","orderFeed","currentOrderLocal","orders","orderItem","number","total","calcTotal","flex_container","flex_container_pt","flex_container_pt_min","done_status","canceled_status","prepared_status","h3","height","bottom_container","createdAt","toLocaleString","TwoColumns","two_columns","ItemTypes","bunName","categories","bun","sauce","categoriesTypeArray","Object","keys","appSlice","createSlice","initialState","reducers","setAppLoading","action","payload","setAppError","actions","calculateTotalPrice","constructorIngredients","accumulator","addOrDeleteCountIngredients","idIngredient","countIngredients","findIndex","el","count","filter","setErrorInAsyncThunk","rejectWithValue","sendError","constructorIngredientsSlice","totalSum","nextIndex","setBun","calculateTotal","setIngredientsInConstructor","addIngredientInConstructor","newIngredient","addedIngredient","sort_id","getNewElementConstructor","deleteIngredientFromConstructor","swapCards","dragCard","dragId","dragIndex","hoverIndex","hoverId","splice","IngredientItem","isTop","isBottom","onDeleteItem","isLocked","timerIdRef","useRef","handleOnDelete","ref","useDrop","accept","collect","monitor","handlerId","getHandlerId","hover","current","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","timerAnimation","drop","useDrag","isDragging","drag","preview","ingredient_item","layout","drag_container","item_container","text","thumbnail","handleClose","Bun","ConstructorIngredientsList","deleteItem","handleDeleteItem","AnimateSharedLayout","MAIN_PATH","LOGIN_PATH","REGISTER_PATH","FORGOT_PASSWORD_PATH","RESET_PASSWORD_PATH","PROFILE_PATH","ORDERS_PATH","INGREDIENTS_PATH","FEED_PATH","api","getInstance","getIngredientData","getFetch","data","getOrderData","postProtectedFetch","getChangePassword","email","getResetPassword","password","getIngredientFetch","createAsyncThunk","_","ingredientsData","setIngredients","ingredientsSlice","resetCountIngredients","extraReducers","pending","toString","fulfilled","rejected","getOrderFetch","getState","getIngredientIds","n","element","Array","fill","orderData","setOrder","console","log","orderSlice","setOrderFeed","setOrderFeedAll","OrderDetails","orderNumber","success","order_details","order_icon","status_text","bottom_text","Order","user","isOpenModalAlert","onOpenModalAlert","onCloseModalAlert","handleOnOpenModule","setAbortController","burger_constructor_footer","total_container","total_icon","size","getAbortFetch","alert","BurgerConstructor","canDrop","isOver","burger_constructor","burger_constructor_body","burger_list_container","burger_list_container_target_illumination","burger_list_container_over_illumination","burger_list_scroll","CategoriesSection","categoryName","currentTabRef","i","scaleY","variantsCount","addCount","ease","IngredientCard","ingredientData","numElement","countRef","location","useLocation","options","dropEffect","DragPreviewImage","connect","li","ingredient_card","custom","pathname","background","ingredient_count","ingredient_price_container","ingredient_price_icon","IngredientsList","tabListRefs","isClicked","onChangeInView","getCount","findCountObj","countObj","categoryKey","filteredDate","node","as","skip","onChange","category_ingredients_container","filteredItem","TabNavByCategory","currentTabName","tabsRef","onMouseEnter","onMouseLeave","onClickTab","tabs_container","active","BurgerIngredients","visibleList","setVisibleList","setIsClicked","forceMemoUpdate","deps","getTime","setForceMemoUpdate","useForceMemoUpdate","initialName","setCurrentTabNameLocal","scrollIntoView","block","behavior","setCurrentType","useToggleRefs","newTab","nameList","handleOnClickTab","handleOnChangeInView","inView","entry","inViewName","newList","handleOnMouseEnter","handleOnMouseLeave","styleIngredientsContainer","useMemo","clientHeight","forceUpdate","BurgerFactory","DndProvider","backend","HTML5Backend","BurgerFactoryPage","RowRoundPictures","images","images_container","reverse","image_container","another","OrderFeedElement","orderElement","showStatus","OnClick","handleOnClick","top_container","name_container","OrderFeedElementsList","orderFeedListElement","useRouteMatch","idFeed","feedElement","Statistics","ready","inTheWork","completedForAllTime","completedToday","status_table","in_work","completed_block","OrderFeed","setOrderData","setCompletedForAllTime","setCompletedToday","readyOrders","setReadyOrders","inTheWorkOrders","setInTheWorkOrders","totalToday","forEach","gap60","FeedPage","LoginLayoutContainer","login_layout_container","nameFields","getRegisterUser","LOCAL_URL","getLoginUser","getLogout","getUser","getProtectedFetch","updateUser","patchProtectedFetch","getRefreshToken","redirectTo","errorText","setToken","userResponse","setRefreshToken","deleteToken","getRegisterFetch","setIsLoading","setUser","errorSuccess","errorMessage","setError","getLoginFetch","setRedirectPath","emailOrPasswordAreIncorrect","getLogoutFetch","getUserFetch","updateUserFetch","userSlice","requiredValidation","required","validations","Email","pattern","Password","isValid","FormWrapper","onSubmit","buttonName","useForm","initialValues","setData","errors","setErrors","handleSubmit","isValidForm","valid","newErrors","validation","test","handleChange","sanitizeFn","Register","Name","placeholder","to","Login","ForgotPassword","result","prevPath","ResetPassword","isShowPassword","setIsShowPassword","Code","icon","onIconClick","variantsNextRouter","variantsProfileButton","Profile","focusedName","setFocusedName","handleOnFocus","currentTarget","handleOnIconClick","handleOnBlur","section","motion_container","exitBeforeEnter","onFocus","onBlur","display","buttons_container","ForgotPasswordPage","IngredientPage","ingredient_page_container","ingredient_page_container_header","LoginPage","NotFound404Page","OrderFeedsListAnimation","main_Container","ProfilePageRoutes","exact","ORDER_HISTORY_PATH","ProfilePage","handleOnClickLogOut","event","profile_page_container","profile_page_container_menu","menu_link","RegisterPage","ResetPasswordPage","OrderByIdPage","ProtectedFromAuthorizedRoute","rest","isUserAuthorized","setIsUserAuthorized","render","from","ProtectedRoute","localState","Routes","app","isPushAction","isModalIngredientBackgroundLocation","MenuButton","Icon","link","isSelected","setIsSelected","isDisplayed","setIsDisplayed","classType","criterion","indexOf","menu_button","LeftMenu","left_menu","BurgerIcon","ListIcon","LogoLink","logo_link","RightMenu","ProfileIcon","AppHeader","app_header","content_left","content_center","content_right","ErrorBoundary","hasError","errorInfo","Component","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","WS","sockets","WebSocket","close","_instance","wsWorker","wsUrl","wsName","onMessageCallBack","typeWsStart","protect","typeWsSend","typeWsClose","isInvertReturnedIngredients","wsStartCallBack","addSocket","getSocket","socketItem","onopen","onerror","onmessage","getOnMessage","onclose","send","closeSocket","socket","callBack","isReverse","parsedData","parse","addIngredientsToFeed","ordersFeed","newOrders","getOrdersWithIngredients","returnOrdersObj","orderFeedItem","newIngredients","getIngredientsById","newOrderFeed","ingredientId","newIngredientElement","findIngredientItemById","currentIngredientSlice","store","configureStore","reducer","appReducer","ingredientReducer","currentIngredientReducer","constructorIngredientsReducer","orderReducer","userReducer","middleware","getDefaultMiddleware","serializableCheck","prepend","next","concat","devTools","process","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.b294b52e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient_details\":\"ingredient-details_ingredient_details__2GSfO\",\"ingredient_image\":\"ingredient-details_ingredient_image__3TLI6\",\"ingredient_name\":\"ingredient-details_ingredient_name__aF9DM\",\"ingredient_info\":\"ingredient-details_ingredient_info__1p1kk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burger_constructor_footer\":\"order_burger_constructor_footer__2djmF\",\"total_container\":\"order_total_container__9GsVo\",\"total_icon\":\"order_total_icon__1hMSs\",\"alert\":\"order_alert__1efB1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main_container\":\"row-round-pictures_main_container__1V1Pk\",\"images_container\":\"row-round-pictures_images_container__aC0A_\",\"image_container\":\"row-round-pictures_image_container__1dZ6i\",\"another\":\"row-round-pictures_another__3_c7K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app_header\":\"app-header_app_header__3cMSX\",\"content_left\":\"app-header_content_left__24QsZ\",\"content_center\":\"app-header_content_center__B09a9\",\"content_right\":\"app-header_content_right__3LTwF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal_header\":\"modal-header_modal_header__18CMb\",\"modal_header_content\":\"modal-header_modal_header_content__2rY_M\",\"modal_header_close_button\":\"modal-header_modal_header_close_button__fV9dQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient_item\":\"ingredient-item_ingredient_item__9F5j_\",\"drag_container\":\"ingredient-item_drag_container__CkH1U\",\"item_container\":\"ingredient-item_item_container__gKfrA\",\"item_container_top\":\"ingredient-item_item_container_top__1aJUh\",\"item_container_bottom\":\"ingredient-item_item_container_bottom__3R30-\",\"item_image\":\"ingredient-item_item_image__2ICYJ\",\"item_name\":\"ingredient-item_item_name__2Y121\",\"item_price_container\":\"ingredient-item_item_price_container__3MhfW\",\"item_price_icon\":\"ingredient-item_item_price_icon__B4Mmn\",\"item_delete\":\"ingredient-item_item_delete__6oPoq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header_header__1Vgpf\",\"content\":\"header_content__2YGX-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"main_main__47lCi\",\"content\":\"main_content__2SJC3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal_overlay\":\"modal-overlay_modal_overlay__3h6D4\",\"modal_overlay_animate\":\"modal-overlay_modal_overlay_animate__2tOOj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__2Wqgo\",\"modal_body\":\"modal_modal_body__3XfOG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scroll_container\":\"scroll-container_scroll_container__3Q2bs\",\"scroll_container_inner\":\"scroll-container_scroll_container_inner__3qpwq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main_container\":\"order-by-id-ingredient_main_container__M3803\",\"name\":\"order-by-id-ingredient_name__25TO4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main_container\":\"order-feed_main_container__28JcQ\",\"gap60\":\"order-feed_gap60__9qU0U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"motion_container\":\"profile_motion_container__3Z2CF\",\"buttons_container\":\"profile_buttons_container__yd5_V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient_page_container\":\"ingredient-page_ingredient_page_container__1fQp8\",\"ingredient_page_container_header\":\"ingredient-page_ingredient_page_container_header__1fSBN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"motion_container\":\"order-feeds-list-animation_motion_container__2UEQY\",\"main_Container\":\"order-feeds-list-animation_main_Container__3xeKx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main_maximum_height\":\"main-maximum-height_main_maximum_height__2U_1E\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"price\":\"price_price__3cAIW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image\":\"round-picture_image__1sAEk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"two_columns\":\"two-columns_two_columns__1Xp2P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"category_ingredients_container\":\"ingredients-list_category_ingredients_container__vbNg7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tabs_container\":\"tab-nav-by-category_tabs_container__1dfO9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login_layout_container\":\"login-layout-container_login_layout_container__3D0AD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu_button\":\"menu-button_menu_button__1xYFf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"left_menu\":\"left-menu_left_menu__-h5qy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo_link\":\"logo-link_logo_link__1wEeb\"};","import dayjs from \"dayjs\";\nimport isToday from \"dayjs/plugin/isToday\";\nimport isYesterday from \"dayjs/plugin/isYesterday\";\nimport relativeTime from \"dayjs/plugin/relativeTime\";\nimport utc from \"dayjs/plugin/utc\";\n\nrequire(\"dayjs/locale/ru\");\n\ndayjs.extend(relativeTime);\ndayjs.extend(isToday);\ndayjs.extend(isYesterday);\ndayjs.extend(utc);\ndayjs.locale(\"ru\");\n\nexport const getNElementArr = (n: number, element?: string) =>\n  new Array(n).fill(element);\n\nexport function enumKeys<O extends object, K extends keyof O = keyof O>(\n  obj: O\n): K[] {\n  return Object.keys(obj).filter((k) => Number.isNaN(+k)) as K[];\n}\n\nexport function setCookie(\n  name: string,\n  value: string | number,\n  props?: { [key: string]: number | Date | any }\n) {\n  props = {\n    path: \"/\",\n    ...props,\n  };\n\n  if (props.expires instanceof Date) {\n    props.expires = props.expires.toUTCString();\n  }\n\n  let updatedCookie =\n    encodeURIComponent(name) + \"=\" + encodeURIComponent(value);\n\n  for (let optionKey in props) {\n    updatedCookie += \"; \" + optionKey;\n    let optionValue = props[optionKey];\n    if (optionValue !== true) {\n      updatedCookie += \"=\" + optionValue;\n    }\n  }\n\n  document.cookie = updatedCookie;\n}\nexport function getCookie(name: string) {\n  let matches = document.cookie.match(\n    new RegExp(\n      \"(?:^|; )\" +\n        // eslint-disable-next-line no-useless-escape\n        name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, \"\\\\$1\") +\n        \"=([^;]*)\"\n    )\n  );\n  return matches ? decodeURIComponent(matches[1]) : undefined;\n}\n\nexport function deleteCookie(name: string) {\n  if (getCookie(name)) {\n    setCookie(name, \"\", {\n      \"max-age\": -1,\n    });\n  }\n}\n\nexport function getAuthToken(res: Response): string | null {\n  let authToken;\n\n  res.headers.forEach((header) => {\n    if (header.indexOf(\"Bearer\") === 0) {\n      authToken = header.split(\"Bearer \")[1];\n    }\n  });\n  if (authToken) {\n    return authToken;\n  }\n\n  return null;\n}\n\nexport function getFormattedDate(date: string) {\n  const formatDate = dayjs(date).format(\"YYYY-MM-DD\");\n\n  if (dayjs(formatDate).isToday()) {\n    return \"Сегодня\";\n  }\n  if (dayjs(formatDate).isYesterday()) {\n    return \"Вчера\";\n  }\n\n  return dayjs(formatDate).fromNow();\n}\nexport function getFormattedDateWithTime(date: string) {\n  const firstPart = getFormattedDate(date);\n  const secondPart = dayjs(date).utc().local().format(\"HH:mm\");\n  const lastPart = dayjs(date).utc().local().format(\"Z\");\n\n  return `${firstPart}, ${secondPart} i-GMT${lastPart.split(\":\")[0]}`;\n}\n","import { deleteCookie, getCookie, setCookie } from \"../common/functions\";\nimport { IRefreshResponse, ISuccessResponse } from \"../models/user\";\n\ninterface IErrorServer extends ISuccessResponse {\n  message: string;\n}\n\nexport enum errorAuthorized {\n  jwtExpired = \"jwt expired\",\n  youShouldBeAuthorized = \"You should be authorised\",\n  unauthorized = \"Unauthorized\",\n  tokenIsInvalid = \"Token is invalid\",\n  emailOrPasswordAreIncorrect = \"email or password are incorrect\",\n}\n\ninterface IFetchProps {\n  url: string;\n  isProtect?: boolean;\n  method?: TMethod;\n  body?: BodyInit;\n}\n\ninterface IFetchPropsWithError extends IFetchProps {\n  responseError: Response;\n}\n\ntype TMethod = \"GET\" | \"POST\" | \"PATCH\";\n\nexport const MAIN_URL = \"https://norma.nomoreparties.space/api\";\nexport const REFRESH_TOKEN = \"refresh_token\";\nexport const TOKEN = \"token\";\n\nexport class Api {\n  private static instance: Api;\n  private localToken: string;\n  private localRefreshToken: string;\n  private localAbortController: AbortController | null;\n  private isLoadingRefreshTokenLocal: boolean;\n\n  private constructor() {\n    const refreshToken = getCookie(REFRESH_TOKEN);\n    const token = getCookie(TOKEN);\n    this.localToken = \"\";\n    this.localRefreshToken = \"\";\n    this.localAbortController = null;\n    this.isLoadingRefreshTokenLocal = false;\n\n    if (refreshToken) {\n      this.localRefreshToken = refreshToken;\n    }\n    if (token) {\n      this.localToken = token;\n    }\n  }\n\n  public static getInstance(): Api {\n    if (!Api.instance) {\n      Api.instance = new Api();\n    }\n    return Api.instance;\n  }\n\n  get token() {\n    const token = getCookie(TOKEN);\n\n    return this.localToken ? this.localToken : token ? token : \"\";\n  }\n\n  set token(token: string) {\n    if (token) {\n      const t = token.split(\"Bearer \")[1];\n      setCookie(TOKEN, t, { path: \"/\" });\n      this.localToken = t;\n    } else {\n      this.localToken = \"\";\n    }\n  }\n\n  get isLoadingRefreshToken() {\n    return this.isLoadingRefreshTokenLocal;\n  }\n\n  set isLoadingRefreshToken(isLoading: boolean) {\n    this.isLoadingRefreshTokenLocal = isLoading;\n  }\n\n  get refreshToken() {\n    return this.localRefreshToken;\n  }\n\n  set refreshToken(token: string) {\n    if (token) {\n      setCookie(REFRESH_TOKEN, token, { path: \"/\" });\n      this.localRefreshToken = token;\n    } else {\n      this.localRefreshToken = \"\";\n    }\n  }\n\n  public logOut() {\n    deleteCookie(REFRESH_TOKEN);\n    this.localRefreshToken = \"\";\n    this.localToken = \"\";\n    this.localAbortController = null;\n  }\n\n  public setAbortController() {\n    this.localAbortController = new AbortController();\n  }\n\n  public getAbortFetch() {\n    if (this.localAbortController) {\n      this.localAbortController.abort();\n    }\n  }\n\n  public async postFetch<T>(url: string, body: BodyInit) {\n    return this.mainFetch<T>({ url, isProtect: false, method: \"POST\", body });\n  }\n\n  public async postProtectedFetch<T>(url: string, body: BodyInit) {\n    return this.mainFetch<T>({ url, isProtect: true, method: \"POST\", body });\n  }\n\n  public async patchProtectedFetch<T>(url: string, body: BodyInit) {\n    return this.mainFetch<T>({ url, isProtect: true, method: \"PATCH\", body });\n  }\n\n  public async getProtectedFetch<T>(url: string) {\n    return this.mainFetch<T>({ url, isProtect: true, method: \"GET\" });\n  }\n\n  public async getFetch<T>(url: string) {\n    return this.mainFetch<T>({ url, method: \"GET\" });\n  }\n\n  private async mainFetch<T>({\n    url,\n    isProtect = false,\n    method,\n    body,\n  }: IFetchProps) {\n    this.ifNeedInitialRestartAbortController();\n    await this.ifNeedInitialRefreshToken(isProtect);\n\n    const finalUrl = MAIN_URL + url;\n    const res = await this.simpleFetch({\n      url: finalUrl,\n      isProtect,\n      method,\n      body,\n    });\n\n    if (res.status === 200) {\n      return (await res.json()) as T;\n    }\n\n    return await this.refreshTokenOrLogout<T>({\n      url: finalUrl,\n      isProtect,\n      method,\n      body,\n      responseError: res,\n    });\n  }\n\n  private ifNeedInitialRestartAbortController() {\n    if (this.localAbortController?.signal.aborted) {\n      this.localAbortController = null;\n    }\n  }\n\n  private async ifNeedInitialRefreshToken(isProtect: boolean) {\n    if (isProtect && !this.localToken) {\n      await this.refreshTokenFetch();\n    }\n  }\n\n  private async refreshTokenOrLogout<T>({\n    url,\n    isProtect = false,\n    method,\n    body,\n    responseError,\n  }: IFetchPropsWithError) {\n    const fetchError = (await responseError.json()) as IErrorServer;\n\n    if (this.isNeedRefreshToken(fetchError)) {\n      await this.refreshTokenFetch();\n      return await this.getNewFetchAfterTokenRefresh<T>({\n        url,\n        isProtect,\n        method,\n        body,\n      });\n    } else {\n      this.logOut();\n      throw new Error(\"\" + responseError.status + \"===\" + fetchError.message);\n    }\n  }\n\n  private isNeedRefreshToken(fetchError: IErrorServer): boolean {\n    return (\n      !!this.localRefreshToken &&\n      !!fetchError.message &&\n      (errorAuthorized.jwtExpired === fetchError.message ||\n        errorAuthorized.youShouldBeAuthorized === fetchError.message)\n    );\n  }\n\n  public async refreshTokenFetch() {\n    if (!this.isLoadingRefreshToken) {\n      this.isLoadingRefreshToken = true;\n      const userTokens = await this.postFetch<IRefreshResponse>(\n        \"/auth/token\",\n        JSON.stringify({ token: this.refreshToken })\n      );\n\n      if (userTokens) {\n        const token = userTokens.accessToken.split(\"Bearer \")[1];\n\n        setCookie(TOKEN, token, { path: \"/\" });\n        this.localToken = token;\n        this.localRefreshToken = userTokens.refreshToken;\n        setCookie(REFRESH_TOKEN, userTokens.refreshToken, { path: \"/\" });\n      } else {\n        this.logOut();\n      }\n      this.isLoadingRefreshToken = false;\n    }\n  }\n\n  private async getNewFetchAfterTokenRefresh<T>({\n    url,\n    isProtect = false,\n    method,\n    body,\n  }: IFetchProps) {\n    if (this.localRefreshToken) {\n      const res = await this.simpleFetch({\n        url,\n        isProtect,\n        method,\n        body,\n      });\n\n      if (res.status === 200) {\n        this.localAbortController = null;\n        return (await res.json()) as T;\n      }\n\n      this.logOut();\n      throw new Error(`401===${errorAuthorized.unauthorized}`);\n    } else {\n      this.logOut();\n      throw new Error(`401===${errorAuthorized.unauthorized}`);\n    }\n  }\n\n  private async simpleFetch({\n    url,\n    isProtect = false,\n    method,\n    body,\n  }: IFetchProps) {\n    const newFetchFields = method\n      ? this.getFiledRequest(method, isProtect, body)\n      : undefined;\n    return await fetch(url, newFetchFields);\n  }\n\n  private getFiledRequest(\n    method: TMethod,\n    isProtect: boolean = false,\n    body?: BodyInit\n  ) {\n    const headers: { \"Content-Type\": string; Authorization?: string } = {\n      \"Content-Type\": \"application/json\",\n    };\n    if (isProtect) {\n      headers.Authorization = \"Bearer \" + this.localToken;\n    }\n    const retObject: RequestInit = {\n      method,\n      mode: \"cors\",\n      cache: \"no-cache\",\n      credentials: \"same-origin\",\n      headers,\n      redirect: \"follow\",\n      referrerPolicy: \"no-referrer\",\n    };\n\n    if (body) {\n      retObject.body = body;\n    }\n    if (this.localAbortController) {\n      retObject.signal = this.localAbortController.signal;\n    }\n\n    return retObject;\n  }\n\n  public waitFor(\n    condition: () => boolean,\n    cb: () => void,\n    delay?: number,\n  ){\n    if (!condition()) {\n      setTimeout(this.waitFor.bind(null, condition, cb, delay), delay || 100);\n    } else {\n      cb();\n    }\n  };\n\n  public waitForAsync = (condition: () => boolean, delay?: number) =>\n    new Promise<void>((resolve) => this.waitFor(condition, resolve, delay));\n}\n","import React from 'react';\n\nimport styles from './header.module.css';\n\ninterface IProps {\n  children: React.ReactChild;\n}\n\nexport default function Header({ children }: IProps) {\n  return (\n    <header className={styles.header}>\n      <div className={styles.content}>{children}</div>\n    </header>\n  );\n}\n","import React from 'react';\n\nimport styles from './main.module.css';\n\ninterface IProps {\n  children: React.ReactChild;\n}\n\nexport default function Main({ children }: IProps) {\n  return (\n    <main className={styles.main}>\n      <div className={styles.content}>{children}</div>\n    </main>\n  );\n}\n","import React from 'react';\n\ninterface IProps {\n  children: React.ReactChild;\n}\n\nexport default function MainIndent({ children }: IProps) {\n  return <div className={`pl-5 pr-5`}>{children}</div>;\n}\n","import React from 'react';\n\nimport styles from './main-maximum-height.module.css';\n\ninterface IProps {\n  children: React.ReactChild;\n}\n\nexport default function MainMaximumHeight({ children }: IProps) {\n  return <div className={styles.main_maximum_height}>{children}</div>;\n}\n","import React from 'react';\nimport Main from '../main/main';\nimport MainIndent from '../main-indent/main-indent';\nimport MainMaximumHeight from '../main-maximum-height/main-maximum-height';\n\ninterface IProps {\n  children: React.ReactChild;\n}\n\nexport default function MainAllLayouts({ children }: IProps) {\n  return (\n    <Main>\n      <MainIndent>\n        <MainMaximumHeight>{children}</MainMaximumHeight>\n      </MainIndent>\n    </Main>\n  );\n}\n","import React from 'react';\n\ninterface IProps {\n  error: Error;\n}\n\nexport default function ErrorMessage({ error }: IProps) {\n  return (\n    <section>\n      <h2>{error.name}</h2>\n      <p>{error.message}</p>\n    </section>\n  );\n}\n","import { useCallback, useState, MouseEvent } from \"react\";\n\nexport const useToggleModal = () => {\n    const [isOpenModal, setIsOpenModal] = useState(false);\n\n    const onCloseModal = useCallback((e?: MouseEvent<HTMLElement>) => {\n        if (e) {\n          e.stopPropagation();\n        }\n\n        setIsOpenModal(false);\n      }, []);\n\n      const onOpenModal = useCallback(() => {\n        setIsOpenModal(true);\n      }, []);\n\n      return {isOpenModal, onCloseModal, onOpenModal}\n}","import { CloseIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport React, { MouseEvent, ReactChild } from \"react\";\nimport styles from \"./modal-header.module.css\";\n\n\ninterface IProps {\n  children?: ReactChild;\n  className?: string;\n  onClose: (e: MouseEvent<HTMLElement>) => void;\n}\n\nexport default function ModalHeader({\n  children,\n  className = \"\",\n  onClose,\n}: IProps) {\n  return (\n    <div className={styles.modal_header}>\n      <div\n        className={`text text_type_main-large ${styles.modal_header_content} ${className}`}\n      >\n        {children ? children : \"\"}\n      </div>\n      <div\n        className={`p-2 ${styles.modal_header_close_button}`}\n        onClick={onClose}\n      >\n        <CloseIcon type=\"primary\" />\n      </div>\n    </div>\n  );\n}\n","import React, { MouseEvent, ReactChild } from \"react\";\n\nimport styles from \"./modal-overlay.module.css\";\n\ninterface IProps {\n  children: ReactChild | false | Element;\n  isAnimate?: boolean;\n  onClose?: (e: MouseEvent<HTMLElement>) => void;\n}\n\nexport default function ModalOverlay({\n  children,\n  onClose = () => {},\n  isAnimate = false,\n}: IProps) {\n  const dataType = \"modal\";\n\n  const onClick = (e: MouseEvent<HTMLElement>): void => {\n    const target = e.target as Element;\n\n    if (target.getAttribute(\"data-type\") === dataType) {\n      onClose(e);\n    }\n  };\n\n  return (\n    <div\n      className={`${styles.modal_overlay} ${\n        isAnimate ? styles.modal_overlay_animate : \"\"\n      }`}\n      onClick={onClick}\n      data-type={dataType}\n    >\n      {children}\n    </div>\n  );\n}\n","import \"animate.css\";\nimport { AnimatePresence, motion, useAnimation } from \"framer-motion\";\nimport React, { MouseEvent, ReactChild, useEffect, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport ModalHeader from \"./modal-header/modal-header\";\nimport ModalOverlay from \"./modal-overlay/modal-overlay\";\nimport styles from \"./modal.module.css\";\n\n\n\nconst modalRoot = document.getElementById(\"react-modals\");\n\ninterface IProps {\n  children: ReactChild;\n  header?: string;\n  classNameHeader?: string;\n  isAnimated?: boolean;\n  animateClassIn?: string;\n  animateClassOut?: string;\n  animateTime?: number;\n  onClose: (e?: MouseEvent<HTMLElement>) => void;\n}\n\nconst variants = {\n  visible: { y: 0, scaleX: 1 },\n  hidden: { y: \"100vh\", scaleX: 0.1 },\n};\n\nexport default function Modal({\n  children,\n  header,\n  classNameHeader = \"\",\n  isAnimated = true,\n  animateTime = 0.5,\n  onClose,\n}: IProps) {\n  const [timerId, setTimerId] = useState(0);\n  const [isEndAnimate, setIsEndAnimate] = useState(false);\n  const [isAnimationGoingOn, setIsAnimationGoingOn] = useState(false);\n  const controls = useAnimation();\n\n  useEffect(() => {\n    return () => {\n      clearTimeout(timerId);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const onKeyDown = (e: KeyboardEvent) => {\n    if (e.key === \"Escape\") {\n      e.preventDefault();\n      handleOnClose();\n    }\n  };\n\n  const handleOnClose = (\n    e?: React.MouseEvent<HTMLElement, globalThis.MouseEvent>\n  ) => {\n    setIsAnimationGoingOn(true);\n    setIsEndAnimate(true);\n\n    const timeout = window.setTimeout(() => {\n      onClose(e);\n    }, animateTime * 1000);\n\n    setTimerId(timeout);\n  };\n\n  useEffect(() => {\n    const goAnimate = async () => {\n      setIsAnimationGoingOn(true);\n      await controls.start(\"visible\");\n      setIsAnimationGoingOn(false);\n    };\n\n    window.addEventListener(\"keydown\", onKeyDown);\n    goAnimate();\n\n    return () => {\n      window.removeEventListener(\"keydown\", onKeyDown);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return createPortal(\n    <>\n      <ModalOverlay onClose={handleOnClose} isAnimate={isAnimationGoingOn}>\n        <AnimatePresence>\n          {!isEndAnimate && (\n            <motion.div\n              variants={variants}\n              initial=\"hidden\"\n              animate={controls}\n              exit=\"hidden\"\n              transition={{\n                duration: animateTime,\n                type: \"spring\",\n                stiffness: 80,\n              }}\n              className={`p-10 pb-15 ${styles.modal}`}\n            >\n              <ModalHeader onClose={handleOnClose} className={classNameHeader}>\n                {header}\n              </ModalHeader>\n              <div className={styles.modal_body}>{children}</div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </ModalOverlay>\n    </>,\n    modalRoot!\n  );\n}\n","import React, {\n  FC,\n  JSXElementConstructor,\n  ReactElement,\n  useEffect\n} from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { useToggleModal } from \"../common/modal/hooks/use_toggle_modal\";\nimport Modal from \"../common/modal/modal\";\n\ninterface IProps {\n  children: ReactElement<any, string | JSXElementConstructor<any>>;\n  title?: string;\n}\n\nconst DetailsModal: FC<IProps> = ({ children, title }) => {\n  const history = useHistory();\n  const { isOpenModal, onOpenModal, onCloseModal } = useToggleModal();\n  const { id } = useParams<{ id: string }>();\n\n  const handleOnCloseModal = () => {\n    onCloseModal();\n    history.goBack();\n  };\n\n  useEffect(() => {\n    onOpenModal();\n  }, [id, onOpenModal]);\n\n  return (\n    <>\n      {isOpenModal ? (\n        <Modal\n          header={title ? title : `#${id}`}\n          classNameHeader={title ? \"\" : \"text text_type_digits-default\"}\n          onClose={handleOnCloseModal}\n        >\n          {React.cloneElement(children, { id })}\n        </Modal>\n      ) : null}\n    </>\n  );\n};\n\nexport default DetailsModal;\n","import {\n    TypedUseSelectorHook,\n    useDispatch as dispatchHook,\n    useSelector as selectorHook\n} from \"react-redux\";\nimport { TAppDispatch, TRootState } from \"../services/store\";\n\nexport const useSelector: TypedUseSelectorHook<TRootState> = selectorHook;\n\nexport const useDispatch = () => dispatchHook<TAppDispatch>();\n","import React from 'react';\nimport { IIngredientsItem } from '../../models/ingredients';\n\nimport styles from './ingredient-details.module.css';\n\ninterface IProps {\n  ingredient: IIngredientsItem;\n}\n\nexport default function IngredientDetails({ ingredient }: IProps) {\n  const { image_large, name, calories, carbohydrates, fat, proteins } =\n    ingredient;\n\n  return (\n    <div className={styles.ingredient_details}>\n      <img className={styles.ingredient_image} alt={name} src={image_large} />\n      <p\n        className={`text text_type_main-medium pt-4 pb-7 ${styles.ingredient_name}`}\n      >\n        <span>{name}</span>\n      </p>\n      <ul className={`${styles.ingredient_info}`}>\n        <li>\n          <p>\n            <span>Калории,ккал</span>\n          </p>\n          <p>\n            <span>{calories}</span>\n          </p>\n        </li>\n        <li>\n          <p>\n            <span>Белки, г</span>\n          </p>\n          <p>\n            <span>{proteins}</span>\n          </p>\n        </li>\n        <li>\n          <p>\n            <span>Жиры, г</span>\n          </p>\n          <p>\n            <span>{fat}</span>\n          </p>\n        </li>\n        <li>\n          <p>\n            <span>Углеводы, г</span>\n          </p>\n          <p>\n            <span>{carbohydrates}</span>\n          </p>\n        </li>\n      </ul>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport { IIngredientsItem } from \"../../models/ingredients\";\nimport { useSelector } from \"../hooks\";\nimport IngredientDetails from \"../ingredient-details/ingredient-details\";\n\ninterface IProps {\n  id: string;\n}\n\nexport default function IngredientDetailsById({ id }: IProps) {\n  const [currentIngredient, setCurrentIngredient] =\n    useState<IIngredientsItem | null>();\n  const ingredients = useSelector((state) => state.ingredients.ingredients);\n\n  useEffect(() => {\n    const findIngredients = ingredients.find((item) => item._id === id);\n\n    if (findIngredients) setCurrentIngredient(findIngredients);\n  }, [id, ingredients]);\n\n  return currentIngredient ? (\n    <IngredientDetails ingredient={currentIngredient} />\n  ) : (\n    <div />\n  );\n}\n","import React, { memo } from 'react';\n\nimport styles from './scroll-container.module.css';\n\ninterface IProps {\n  children: React.ReactChild;\n  style?: React.CSSProperties;\n  className?: string;\n  styleInner?: React.CSSProperties;\n  classNameInner?: string;\n  forceUpdate?: string;\n}\n\nfunction ScrollContainer({\n  children,\n  style = {},\n  className = '',\n  styleInner = {},\n  classNameInner = '',\n}: IProps) {\n  return (\n    <div className={`${styles.scroll_container} ${className}`} style={style}>\n      <div\n        className={`${styles.scroll_container_inner} ${classNameInner} custom-scroll`}\n        style={styleInner}\n      >\n        {children}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(ScrollContainer);\n","export const WS_ORDER_ALL_CONNECTION_START =\n  \"WS_ORDER_ALL_CONNECTION_START\" as const;\nexport const WS_ORDER_ALL_SEND_MESSAGE = \"WS_ORDER_ALL_SEND_MESSAGE\" as const;\nexport const WS_ORDER_ALL_CLOSE = \"WS_ORDER_ALL_CLOSE\" as const;\n\nexport const WS_ORDER_CONNECTION_START = \"WS_ORDER_CONNECTION_START\" as const;\nexport const WS_ORDER_SEND_MESSAGE = \"WS_ORDER_SEND_MESSAGE\" as const;\nexport const WS_ORDER_CLOSE = \"WS_ORDER_CLOSE\" as const;\n","import {\n    WS_ORDER_ALL_CLOSE,\n    WS_ORDER_ALL_CONNECTION_START,\n    WS_ORDER_CLOSE,\n    WS_ORDER_CONNECTION_START\n} from \"./ws-action-types\";\n\nexport const wsOrderAllConnectionStart = () => ({\n  type: WS_ORDER_ALL_CONNECTION_START,\n});\nexport const wsOrderAllClose = () => ({\n  type: WS_ORDER_ALL_CLOSE,\n});\n\nexport const wsOrderConnectionStart = () => ({\n  type: WS_ORDER_CONNECTION_START,\n});\nexport const wsOrderClose = () => ({\n  type: WS_ORDER_CLOSE,\n});\n","import { AnimatePresence, motion, Variants } from \"framer-motion\";\nimport React from \"react\";\n\nimport styles from \"./loader.module.css\";\n\nconst variantsLoader1: Variants = {\n  visible: {\n    opacity: 1,\n    x: [-20, 20, -20],\n    y: [0, -30, 0],\n    transition: {\n      x: {\n        repeat: Infinity,\n        duration: 1,\n      },\n      y: {\n        repeat: Infinity,\n        duration: 0.5,\n      },\n    },\n  },\n  hidden: { opacity: 0 },\n};\nconst variantsLoader2: Variants = {\n  visible: {\n    opacity: 1,\n    x: [20, -20, 20],\n    y: [0, 30, 0],\n    transition: {\n      x: {\n        repeat: Infinity,\n        duration: 1,\n      },\n      y: {\n        repeat: Infinity,\n        duration: 0.5,\n      },\n    },\n  },\n  hidden: { opacity: 0 },\n};\nconst variantsContainer: Variants = {\n  visible: {\n    rotate: [0, 360],\n    transition: {\n      rotate: {\n        repeat: Infinity,\n        duration: 3,\n      },\n    },\n  },\n};\nconst variantsLoader3: Variants = {\n  visible: {\n    opacity: 1,\n    z: [-20, 20, -20],\n    y: [-30, 30, -30],\n    x: [20, -20, 20],\n    scale: [1, 1.5, 1, 0.5, 1],\n    transition: {\n      x: {\n        repeat: Infinity,\n        duration: 1,\n      },\n      y: {\n        repeat: Infinity,\n        duration: 1,\n      },\n      z: {\n        repeat: Infinity,\n        duration: 0.5,\n      },\n      scale: {\n        repeat: Infinity,\n        duration: 0.5,\n      },\n    },\n  },\n  hidden: { opacity: 0 },\n};\nconst variantsLoader4: Variants = {\n  visible: {\n    opacity: 1,\n    z: [20, -20, 20],\n    y: [20, -20, 20],\n    x: [-20, 20, -20],\n    scale: [1, 0.5, 1, 1.5, 1],\n    transition: {\n      x: {\n        repeat: Infinity,\n        duration: 1,\n      },\n      y: {\n        repeat: Infinity,\n        duration: 1,\n      },\n      z: {\n        repeat: Infinity,\n        duration: 0.5,\n      },\n      scale: {\n        repeat: Infinity,\n        duration: 0.5,\n      },\n    },\n  },\n  hidden: { opacity: 0 },\n};\n\nexport default function Loader() {\n  return (\n    <AnimatePresence>\n      <motion.div\n        className={styles.loader_container}\n        variants={variantsContainer}\n        animate={\"visible\"}\n      >\n        <motion.div\n          key=\"1\"\n          variants={variantsLoader1}\n          initial=\"hidden\"\n          exit=\"hidden\"\n          animate=\"visible\"\n          className={styles.loader1}\n        />\n        <motion.div\n          key=\"2\"\n          variants={variantsLoader2}\n          initial=\"hidden\"\n          exit=\"hidden\"\n          animate=\"visible\"\n          className={styles.loader2}\n        />\n        <motion.div\n          key=\"3\"\n          variants={variantsLoader3}\n          initial=\"hidden\"\n          exit=\"hidden\"\n          animate=\"visible\"\n          className={styles.loader3}\n        />\n        <motion.div\n          key=\"4\"\n          variants={variantsLoader4}\n          initial=\"hidden\"\n          exit=\"hidden\"\n          animate=\"visible\"\n          className={styles.loader4}\n        />\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n","import { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport React, { FC } from \"react\";\nimport styles from \"./price.module.css\";\n\ninterface IProps {\n  price: string;\n}\n\nconst Price: FC<IProps> = ({ price }) => {\n  return (\n    <div className={styles.price}>\n      <p>\n        <span className=\"text text_type_digits-default\">{price}</span>\n        <CurrencyIcon type=\"primary\" />\n      </p>\n    </div>\n  );\n};\n\nexport default Price;\n","import React, { FC } from \"react\";\nimport { IIngredientsItem } from \"../../../models/ingredients\";\nimport styles from \"./round-picture.module.css\";\n\ninterface IProps {\n  image: IIngredientsItem;\n}\n\nconst RoundPicture: FC<IProps> = ({ image }) => {\n  return (\n    <img alt={image.name} src={image.image_mobile} className={styles.image} />\n  );\n};\n\nexport default RoundPicture;\n","import React, { FC } from \"react\";\nimport { IIngredientsItem } from \"../../../../models/ingredients\";\nimport Price from \"../../../ui/price/price\";\nimport RoundPicture from \"../../../ui/round-picture/round-picture\";\nimport styles from \"./order-by-id-ingredient.module.css\";\n\ninterface IProps {\n  ingredient: IIngredientsItem;\n  counts: { [key: string]: number };\n}\n\nconst OrderByIdIngredient: FC<IProps> = ({ ingredient, counts }) => {\n  return (\n    <div className={styles.main_container}>\n      <RoundPicture image={ingredient} />\n      <div className={styles.name}>{ingredient.name}</div>\n      <Price price={`${counts[ingredient._id]} x ${ingredient.price}`} />\n    </div>\n  );\n};\n\nexport default OrderByIdIngredient;\n","import React, { FC, useEffect, useState } from \"react\";\nimport { IIngredientsItem } from \"../../../models/ingredients\";\nimport Loader from \"../../ui/loader/loader\";\nimport OrderByIdIngredient from \"./order-by-id-ingredient/order-by-id-ingredient\";\n\ninterface IProps {\n  list: IIngredientsItem[];\n}\n\nconst OrderByIdIngredientsList: FC<IProps> = ({ list }) => {\n  const [counts, setCounts] = useState<{ [key: string]: number } | null>(null);\n  const [filteredList, setFilteredList] = useState<IIngredientsItem[]>([]);\n\n  useEffect(() => {\n    const filteredListLocal: IIngredientsItem[] = [];\n    const countsLocal = list.reduce<{ [key: string]: number }>(\n      (returnCountObj, ingredient): { [key: string]: number } => {\n        if (returnCountObj[ingredient._id]) {\n          returnCountObj[ingredient._id] = returnCountObj[ingredient._id] + 1;\n        } else {\n          filteredListLocal.push({ ...ingredient });\n          returnCountObj[ingredient._id] = 1;\n        }\n\n        return returnCountObj;\n      },\n      {}\n    );\n\n    setFilteredList([...filteredListLocal]);\n    setCounts({ ...countsLocal });\n  }, [list]);\n\n  return (\n    <>\n      {counts && filteredList.length > 0 ? (\n        filteredList.map((item, index) => (\n          <OrderByIdIngredient ingredient={item} key={index} counts={counts} />\n        ))\n      ) : (\n        <Loader />\n      )}\n    </>\n  );\n};\n\nexport default OrderByIdIngredientsList;\n","import React, { FC, useEffect, useState } from \"react\";\nimport { getFormattedDateWithTime } from \"../../common/functions\";\nimport ScrollContainer from \"../../layouts/scroll-container/scroll-container\";\nimport { IOrderFeedElementWithIngredients } from \"../../models/order\";\nimport {\n  wsOrderAllClose,\n  wsOrderAllConnectionStart,\n  wsOrderClose,\n  wsOrderConnectionStart\n} from \"../../redux/action-types/ws-action-creators\";\nimport { useDispatch, useSelector } from \"../hooks\";\nimport Loader from \"../ui/loader/loader\";\nimport Price from \"../ui/price/price\";\nimport OrderByIdIngredientsList from \"./order-by-id-ingredients-list/order-by-id-ingredients-list\";\nimport styles from \"./order-by-id.module.css\";\n\ninterface IProps {\n  id: string;\n  isShowTitle?: boolean;\n}\n\nconst OrderById: FC<IProps> = ({ id, isShowTitle = true }) => {\n  const dispatch = useDispatch();\n  const [currentOrder, setCurrentOrder] =\n    useState<IOrderFeedElementWithIngredients | null>(null);\n  const [price, setPrice] = useState(0);\n  const orderFeedAll = useSelector((state) => state.order.orderFeedAll);\n  const ingredients = useSelector((state) => state.ingredients.ingredients);\n  const orderFeed = useSelector((state) => state.order.orderFeed);\n\n  useEffect(() => {\n    if (orderFeedAll && ingredients) {\n      const currentOrderLocal = orderFeedAll.orders.find(\n        (orderItem) => orderItem.number === +id\n      );\n\n      if (currentOrderLocal) {\n        setCurrentOrder(currentOrderLocal);\n      }\n    } else {\n      dispatch(wsOrderAllConnectionStart());\n    }\n    return () => {\n      dispatch(wsOrderAllClose());\n    };\n  }, [dispatch, id, orderFeedAll, ingredients]);\n\n  useEffect(() => {\n    if (orderFeed && ingredients) {\n      const currentOrderLocal = orderFeed.orders.find(\n        (orderItem) => orderItem.number === +id\n      );\n\n      if (currentOrderLocal) {\n        setCurrentOrder(currentOrderLocal);\n      }\n    } else {\n      dispatch(wsOrderConnectionStart());\n    }\n    return () => {\n      dispatch(wsOrderClose());\n    };\n  }, [dispatch, id, orderFeed, ingredients]);\n\n  useEffect(() => {\n    if (currentOrder) {\n      const total = currentOrder.ingredients.reduce(\n        (calcTotal, { price }) => (calcTotal = calcTotal + +price),\n        0\n      );\n\n      setPrice(total);\n    }\n  }, [currentOrder]);\n\n  return (\n    <div className={styles.main_container}>\n      {!currentOrder ? (\n        <Loader />\n      ) : (\n        <div\n          className={`${styles.flex_container} ${\n            isShowTitle\n              ? styles.flex_container_pt\n              : styles.flex_container_pt_min\n          }`}\n        >\n          {isShowTitle ? (\n            <div\n              className={`text text_type_digits-default ${styles.id}`}\n            >{`#${id}`}</div>\n          ) : null}\n          <h2 className=\"text text_type_main-medium\">{currentOrder.name}</h2>\n          <p\n            className={`${styles.status} ${\n              currentOrder.status === \"done\"\n                ? styles.done_status\n                : currentOrder.status === \"cancelled\"\n                ? styles.canceled_status\n                : styles.prepared_status\n            }`}\n          >\n            <span className=\"text text_type_main-default\">\n              {currentOrder.status === \"done\"\n                ? \"Выполнен\"\n                : currentOrder.status === \"cancelled\"\n                ? \"Отменен\"\n                : \"Готовиться\"}\n            </span>\n          </p>\n          <h3 className={`text text_type_main-medium ${styles.h3}`}>Состав:</h3>\n          <ScrollContainer style={{ height: \"312px\" }}>\n            <OrderByIdIngredientsList list={currentOrder.ingredients} />\n          </ScrollContainer>\n          <div className={styles.bottom_container}>\n            <div className={`text text_type_main-default ${styles.date}`}>\n              {getFormattedDateWithTime(currentOrder.createdAt)}\n            </div>\n            <Price price={price.toLocaleString()} />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default OrderById;\n","import React from \"react\";\nimport styles from \"./two-columns.module.css\";\n\n\ninterface IProps {\n  children: React.ReactChild;\n  style?: React.CSSProperties;\n  className?: string;\n}\n\nexport default function TwoColumns({ children, style, className }: IProps) {\n  return (\n    <div\n      className={`${styles.two_columns} ${className ? className : \"\"}`}\n      style={style ? style : {}}\n    >\n      {children}\n    </div>\n  );\n}\n","export const ItemTypes = {\n  INGREDIENT_CARD: 'ingredientCard',\n  CONSTRUCTOR_CARD: 'ConstructorCard',\n};\n","export const bunName = \"bun\";\nexport const reEmail = /^[A-Z0-9._%+-]+@[A-Z0-9-]+.+.[A-Z]{2,4}$/i;\n\nexport const categories = { bun: \"Булки\", sauce: \"Соусы\", main: \"Начинки\" };\n\nexport const categoriesTypeArray = Object.keys(categories) as Array<\n  keyof typeof categories\n>;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { IAppState } from '../models/app-store';\n\nconst initialState: IAppState = {\n  isLoading: false,\n  error: null,\n};\n\nconst appSlice = createSlice({\n  name: 'app',\n  initialState,\n  reducers: {\n    setAppLoading(state, action: PayloadAction<boolean>) {\n      state.isLoading = action.payload;\n    },\n    setAppError(state, action: PayloadAction<Error | null>) {\n      state.error = action.payload;\n    },\n  },\n});\n\nexport default appSlice.reducer;\n\nexport const { setAppLoading, setAppError } = appSlice.actions;\n","import {\n  IConstructorIngredientState,\n  IIngredientsState\n} from \"../models/app-store\";\nimport { ICountIngredient, IIngredientsItem } from \"../models/ingredients\";\nimport { setAppError } from \"./app-slice\";\nimport { TAppDispatch } from \"./store\";\n\nexport const calculateTotalPrice = (state: IConstructorIngredientState) => {\n  const totalAddition = state.constructorIngredients.reduce(\n    (accumulator, item) => {\n      return accumulator + item.price;\n    },\n    0\n  );\n  const totalBun = state.bun ? state.bun.price * 2 : 0;\n\n  return totalAddition + totalBun;\n};\n\nexport const addOrDeleteCountIngredients = (\n  state: IIngredientsState,\n  type: \"add\" | \"delete\",\n  idIngredient: string\n) => {\n  let newCountIngredients: ICountIngredient[] = [];\n\n  const index = state.countIngredients.findIndex(\n    (el) => el.id === idIngredient\n  );\n\n  const addCount = (item: ICountIngredient) =>\n    item.id === idIngredient ? { ...item, count: item.count + 1 } : item;\n\n  const deleteCount = (item: ICountIngredient) =>\n    item.id === idIngredient ? { ...item, count: item.count - 1 } : item;\n\n  if (type === \"add\") {\n    if (index !== -1) {\n      newCountIngredients = state.countIngredients.map(addCount);\n    } else {\n      newCountIngredients = [\n        ...state.countIngredients,\n        { id: idIngredient, count: 1 },\n      ];\n    }\n  } else {\n    if (state.countIngredients[index].count > 1) {\n      newCountIngredients = state.countIngredients.map(deleteCount);\n    } else {\n      newCountIngredients = state.countIngredients.filter(\n        (item) => item.id !== idIngredient\n      );\n    }\n  }\n\n  return newCountIngredients;\n};\n\nexport const getNewElementConstructor = (\n  state: IConstructorIngredientState,\n  addedIngredient: IIngredientsItem\n) => {\n  return {\n    ...addedIngredient,\n    sort_id: `${state.nextIndex}`,\n  };\n};\n\nexport const setErrorInAsyncThunk = (\n  error: Error,\n  dispatch: TAppDispatch,\n  rejectWithValue: (value: unknown) => any\n) => {\n  const sendError = {\n    name: (error as Error).name,\n    message: (error as Error).message,\n  };\n  rejectWithValue(error);\n  dispatch(setAppError(sendError));\n};\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { bunName } from '../common/constants';\nimport { IConstructorIngredientState } from '../models/app-store';\nimport { IIngredientsItem } from '../models/ingredients';\nimport { calculateTotalPrice, getNewElementConstructor } from './common';\n\nconst initialState: IConstructorIngredientState = {\n  bun: null,\n  constructorIngredients: [],\n  totalSum: 0,\n  nextIndex: 0,\n};\n\nconst constructorIngredientsSlice = createSlice({\n  name: 'constructorIngredients',\n  initialState,\n  reducers: {\n    setBun(state, action: PayloadAction<IIngredientsItem | null>) {\n      state.bun = action.payload;\n      state.totalSum = calculateTotalPrice(state);\n    },\n    calculateTotal(state) {\n      state.totalSum = calculateTotalPrice(state);\n    },\n    setIngredientsInConstructor(state, action: PayloadAction<IIngredientsItem[]>){\n      state.constructorIngredients = action.payload;\n      state.totalSum = calculateTotalPrice(state);\n    },\n    addIngredientInConstructor(state, action: PayloadAction<IIngredientsItem>) {\n      if (action.payload.type === bunName) {\n        state.bun = action.payload;\n      } else {\n        const newIngredient = getNewElementConstructor(state, action.payload);\n\n        state.constructorIngredients.push(newIngredient);\n        state.nextIndex++;\n      }\n      state.totalSum = calculateTotalPrice(state);\n    },\n    deleteIngredientFromConstructor(\n      state,\n      action: PayloadAction<IIngredientsItem>\n    ) {\n      state.constructorIngredients = state.constructorIngredients.filter(\n        (item) => item.sort_id !== action.payload.sort_id\n      );\n      state.totalSum = calculateTotalPrice(state);\n    },\n    swapCards(\n      state,\n      action: PayloadAction<{\n        dragId: string;\n        hoverId: string;\n      }>\n    ) {\n      const dragCard = state.constructorIngredients.find(\n        (item) => item.sort_id === action.payload.dragId\n      );\n      const dragIndex = state.constructorIngredients.findIndex(\n        (item) => item.sort_id === action.payload.dragId\n      );\n      const hoverIndex = state.constructorIngredients.findIndex(\n        (item) => item.sort_id === action.payload.hoverId\n      );\n\n      state.constructorIngredients.splice(dragIndex, 1);\n      state.constructorIngredients.splice(hoverIndex, 0, dragCard!);\n    },\n  },\n});\n\nexport default constructorIngredientsSlice.reducer;\n\nexport const {\n  setBun,\n  setIngredientsInConstructor,\n  addIngredientInConstructor,\n  deleteIngredientFromConstructor,\n  swapCards,\n} = constructorIngredientsSlice.actions;\n","import {\n  ConstructorElement,\n  DragIcon\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { motion } from \"framer-motion\";\nimport React, { useEffect, useRef } from \"react\";\nimport { DropTargetMonitor, useDrag, useDrop, XYCoord } from \"react-dnd\";\nimport { ItemTypes } from \"../../../../models/drag-and-drop\";\nimport { IIngredientsItem } from \"../../../../models/ingredients\";\nimport { swapCards } from \"../../../../services/constructor-ingredients-slice\";\nimport { useDispatch } from \"../../../hooks\";\nimport styles from \"./ingredient-item.module.css\";\n\ninterface IProps {\n  isTop?: boolean;\n  isBottom?: boolean;\n  image: string;\n  name: string;\n  price: number;\n  ingredient?: IIngredientsItem;\n  onDeleteItem?: (ingredient: IIngredientsItem) => void;\n}\n\nconst timerAnimation = 0.2;\n\nfunction IngredientItem({\n  isTop = false,\n  isBottom = false,\n  image,\n  name,\n  price,\n  ingredient,\n  onDeleteItem,\n}: IProps) {\n  const type = isTop ? \"top\" : isBottom ? \"bottom\" : undefined;\n  const isLocked = isTop || isBottom ? true : false;\n  const timerIdRef = useRef<NodeJS.Timeout | null>(null);\n  const dispatch = useDispatch();\n  const handleOnDelete =\n    ingredient && onDeleteItem\n      ? () => {\n          onDeleteItem(ingredient);\n        }\n      : undefined;\n\n  const ref = useRef<HTMLDivElement>(null);\n  const [{ handlerId }, drop] = useDrop({\n    accept: ItemTypes.CONSTRUCTOR_CARD,\n    collect(monitor) {\n      return {\n        handlerId: monitor.getHandlerId(),\n      };\n    },\n    hover(item: IIngredientsItem, monitor: DropTargetMonitor) {\n      if (!ref.current) {\n        return;\n      }\n      const dragId = item.sort_id!;\n      const hoverId = ingredient!.sort_id!;\n\n      if (dragId === hoverId) {\n        return;\n      }\n\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n      const clientOffset = monitor.getClientOffset();\n      const hoverClientY = (clientOffset as XYCoord).y - hoverBoundingRect.top;\n\n      if (dragId < hoverId && hoverClientY < hoverMiddleY) {\n        return;\n      }\n\n      if (dragId > hoverId && hoverClientY > hoverMiddleY) {\n        return;\n      }\n\n      if (timerIdRef.current === null) {\n        dispatch(swapCards({ dragId, hoverId }));\n        timerIdRef.current = setTimeout(() => {\n          timerIdRef.current = null;\n        }, timerAnimation * 1000);\n      }\n    },\n  });\n\n  useEffect(() => {\n    return () => {\n      if (timerIdRef.current) {\n        clearTimeout(timerIdRef.current);\n      }\n    };\n  }, []);\n\n  const [{ isDragging }, drag, preview] = useDrag({\n    type: ItemTypes.CONSTRUCTOR_CARD,\n    item: () => {\n      return ingredient;\n    },\n    collect: (monitor: any) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  const opacity = isDragging ? 0 : 1;\n\n  preview(drop(ref));\n\n  return (\n    <motion.div\n      className={styles.ingredient_item}\n      ref={ingredient ? ref : undefined}\n      style={{ opacity }}\n      data-handler-id={handlerId}\n      transition={{ duration: timerAnimation, type: \"tween\" }}\n      layout\n    >\n      <div className={styles.drag_container} ref={drag}>\n        {isTop || isBottom ? null : <DragIcon type=\"primary\" />}\n      </div>\n      <div className={styles.item_container}>\n        <ConstructorElement\n          type={type}\n          isLocked={isLocked}\n          text={`${name}${isTop ? \" (верх)\" : isBottom ? \" (низ)\" : \"\"}`}\n          price={price}\n          thumbnail={image}\n          handleClose={handleOnDelete}\n        />\n      </div>\n    </motion.div>\n  );\n}\n\nexport default IngredientItem;\n","import React from 'react';\n\nimport { IIngredientsItem } from '../../../../models/ingredients';\nimport IngredientItem from '../ingredient-item/ingredient-item';\n\ninterface IProps {\n  bun: IIngredientsItem | null;\n  isTop: boolean;\n}\n\nexport default function Bun({ bun, isTop }: IProps) {\n  return (\n    <div>\n      {bun ? (\n        <IngredientItem\n          isTop={isTop ? true : false}\n          isBottom={isTop ? false : true}\n          price={bun.price / 100}\n          name={bun.name}\n          image={bun.image_mobile}\n        />\n      ) : null}\n    </div>\n  );\n}\n","import { AnimateSharedLayout } from \"framer-motion\";\nimport React, { memo, useCallback } from \"react\";\nimport { IIngredientsItem } from \"../../../../models/ingredients\";\nimport IngredientItem from \"../ingredient-item/ingredient-item\";\n\ninterface IProps {\n  constructorIngredients: IIngredientsItem[];\n  deleteItem: (ingredient: IIngredientsItem) => void;\n}\n\nfunction ConstructorIngredientsList({\n  constructorIngredients,\n  deleteItem,\n}: IProps) {\n  const handleDeleteItem = useCallback(\n    (ingredient: IIngredientsItem) => {\n      deleteItem(ingredient);\n    },\n    [deleteItem]\n  );\n  return (\n    <AnimateSharedLayout>\n      {constructorIngredients.map((ingredient) => (\n        <IngredientItem\n          price={ingredient.price / 100}\n          name={ingredient.name}\n          image={ingredient.image_mobile}\n          key={ingredient.sort_id}\n          ingredient={ingredient}\n          onDeleteItem={handleDeleteItem}\n        />\n      ))}\n    </AnimateSharedLayout>\n  );\n}\n\nexport default memo(ConstructorIngredientsList);\n","export const MAIN_PATH = \"/\";\nexport const LOGIN_PATH = \"/login\";\nexport const REGISTER_PATH = \"/register\";\nexport const FORGOT_PASSWORD_PATH = \"/forgot-password\";\nexport const RESET_PASSWORD_PATH = \"/reset-password\";\nexport const PROFILE_PATH = \"/profile\";\nexport const ORDERS_PATH = \"/orders\";\nexport const INGREDIENTS_PATH = \"/ingredients\";\nexport const FEED_PATH = \"/feed\";\n","import { IIngredientsItem } from \"../models/ingredients\";\nimport { IOrder } from \"../models/order\";\nimport { Api } from \"./api\";\n\nconst api = Api.getInstance();\n\nexport const getIngredientData = async () => {\n  return await (\n    await api.getFetch<{ data: IIngredientsItem[] }>(\"/ingredients\")\n  ).data;\n};\n\nexport const getOrderData = async (\n  ingredients: string[]\n) => {\n  return await api.postProtectedFetch<IOrder>(\n    \"/orders\",\n    JSON.stringify({ ingredients })\n  );\n};\n\ninterface IChangePasswordResponse {\n  success: boolean;\n  message: string;\n}\n\nexport const getChangePassword = async (email: string) => {\n  return await api.postFetch<IChangePasswordResponse>(\n    \"/password-reset\",\n    JSON.stringify({ email })\n  );\n};\n\nexport const getResetPassword = async (password: string, token: string) => {\n  return await api.postFetch<IChangePasswordResponse>(\n    \"/password-reset/reset\",\n    JSON.stringify({ password, token })\n  );\n};\n","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { getIngredientData } from \"../api/agent\";\nimport { bunName } from \"../common/constants\";\nimport { IIngredientsState } from \"../models/app-store\";\nimport { ICountIngredient, IIngredientsItem } from \"../models/ingredients\";\nimport { addOrDeleteCountIngredients, setErrorInAsyncThunk } from \"./common\";\nimport {\n  addIngredientInConstructor,\n  deleteIngredientFromConstructor\n} from \"./constructor-ingredients-slice\";\n\nconst initialState: IIngredientsState = {\n  ingredients: [],\n  countIngredients: [],\n  isLoading: false,\n};\n\nexport const getIngredientFetch = createAsyncThunk(\n  \"ingredients/ingredientFetch\",\n  async function (_, { rejectWithValue, dispatch }) {\n    try {\n      const ingredientsData = await getIngredientData();\n\n      dispatch(setIngredients(ingredientsData));\n    } catch (error) {\n      setErrorInAsyncThunk(error as Error, dispatch, rejectWithValue);\n    }\n  }\n);\n\nconst ingredientsSlice = createSlice({\n  name: \"ingredients\",\n  initialState,\n  reducers: {\n    setIngredients(state, action: PayloadAction<IIngredientsItem[]>) {\n      state.ingredients = action.payload;\n    },\n    resetCountIngredients(state, action: PayloadAction<ICountIngredient[]>) {\n      state.countIngredients = action.payload;\n    },\n  },\n  extraReducers: {\n    [getIngredientFetch.pending.toString()]: (state) => {\n      state.isLoading = true;\n    },\n    [getIngredientFetch.fulfilled.toString()]: (state) => {\n      state.isLoading = false;\n    },\n    [getIngredientFetch.rejected.toString()]: (state) => {\n      state.isLoading = false;\n    },\n    [addIngredientInConstructor.toString()]: (\n      state: IIngredientsState,\n      action: PayloadAction<IIngredientsItem>\n    ) => {\n      if (action.payload.type !== bunName) {\n        state.countIngredients = addOrDeleteCountIngredients(\n          state,\n          \"add\",\n          action.payload._id\n        );\n      }\n    },\n    [deleteIngredientFromConstructor.toString()]: (\n      state: IIngredientsState,\n      action: PayloadAction<IIngredientsItem>\n    ) => {\n      state.countIngredients = addOrDeleteCountIngredients(\n        state,\n        \"delete\",\n        action.payload._id\n      );\n    },\n  },\n});\n\nexport default ingredientsSlice.reducer;\n\nexport const { setIngredients, resetCountIngredients } =\n  ingredientsSlice.actions;\n","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { getOrderData } from \"../api/agent\";\nimport { getNElementArr } from \"../common/functions\";\nimport { IOrderState } from \"../models/app-store\";\nimport { IOrder, IOrdersFeedWithIngredients } from \"../models/order\";\nimport {\n  setBun,\n  setIngredientsInConstructor\n} from \"./constructor-ingredients-slice\";\nimport { resetCountIngredients } from \"./ingredients-slice\";\nimport { TRootState } from \"./store\";\n\nconst initialState: IOrderState = {\n  order: null,\n  isLoading: false,\n  orderFeed: null,\n  orderFeedAll: null,\n};\n\nexport const getOrderFetch = createAsyncThunk(\n  \"order/getOrderFetch\",\n  async function (_, { rejectWithValue, dispatch, getState }) {\n    try {\n      const {\n        constructorIngredients: { constructorIngredients, bun },\n      } = getState() as TRootState;\n      const getIngredientIds = () =>\n        constructorIngredients.map((item) => item._id);\n      const ingredients = [\n        ...getIngredientIds(),\n        ...getNElementArr(2, bun?._id),\n      ];\n\n      const orderData = await getOrderData(ingredients);\n      dispatch(setOrder(orderData));\n      dispatch(setBun(null));\n      dispatch(setIngredientsInConstructor([]));\n      dispatch(resetCountIngredients([]));\n    } catch (error) {\n      console.log(error);\n      rejectWithValue(error);\n    }\n  }\n);\n\nconst orderSlice = createSlice({\n  name: \"order\",\n  initialState,\n  reducers: {\n    setOrder(state, action: PayloadAction<IOrder | null>) {\n      state.order = action.payload;\n    },\n    setOrderFeed(state, action: PayloadAction<IOrdersFeedWithIngredients | null>) {\n      state.orderFeed = action.payload;\n    },\n    setOrderFeedAll(state, action: PayloadAction<IOrdersFeedWithIngredients | null>) {\n      state.orderFeedAll = action.payload;\n    },\n  },\n  extraReducers: {\n    [getOrderFetch.pending.toString()]: (state) => {\n      state.isLoading = true;\n    },\n    [getOrderFetch.fulfilled.toString()]: (state) => {\n      state.isLoading = false;\n    },\n    [getOrderFetch.rejected.toString()]: (state, action: PayloadAction<Error>) => {\n      state.isLoading = false;\n      state.order = null;\n      console.log(action.payload);\n    },\n  },\n});\n\nexport default orderSlice.reducer;\n\nexport const { setOrderFeed, setOrderFeedAll, setOrder } = orderSlice.actions;\n","import { CheckMarkIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport React from \"react\";\nimport { useSelector } from \"../hooks\";\nimport Loader from \"../ui/loader/loader\";\nimport styles from \"./order-details.module.css\";\n\nexport default function OrderDetails() {\n  const order = useSelector((state) => state.order.order);\n  const isLoading = useSelector((state) => state.order.isLoading);\n\n  if (!isLoading && order) {\n    const {\n      name,\n      order: { number: orderNumber },\n      success,\n    } = order;\n\n    return (\n      <div className={styles.order_details}>\n        <p className={`pt-4 pb-4 text text_type_digits-large`}>\n          <span>{orderNumber}</span>\n        </p>\n        <p className={`pt-4 pb-15 text text_type_main-medium`}>\n          <span>идентификатор заказа</span>\n        </p>\n        <div className={styles.order_icon}>\n          {success ? <CheckMarkIcon type=\"primary\" /> : null}\n        </div>\n        <p className={`pt-15 pb-1 ${styles.status_text}`}>\n          <span>{name}</span>\n        </p>\n        <p className={`pt-1 pb-1 ${styles.bottom_text}`}>\n          <span>Дождитесь готовности на орбитальной станции</span>\n        </p>\n      </div>\n    );\n  } else {\n    return (\n      <div className={styles.order_details}>\n        <Loader />\n      </div>\n    );\n  }\n}\n","import {\n  Button,\n  CurrencyIcon\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Api } from \"../../../../api/api\";\nimport { LOGIN_PATH } from \"../../../../routes/constants-path\";\nimport { getOrderFetch } from \"../../../../services/order-slice\";\nimport { useToggleModal } from \"../../../common/modal/hooks/use_toggle_modal\";\nimport Modal from \"../../../common/modal/modal\";\nimport { useDispatch, useSelector } from \"../../../hooks\";\nimport OrderDetails from \"../../../order-details/order-details\";\nimport styles from \"./order.module.css\";\n\nconst api = Api.getInstance();\n\nexport default function Order() {\n  const nameButton = \"Оформить заказ\";\n  const history = useHistory();\n  const isLoading = useSelector((state) => state.order.isLoading);\n  const totalSum = useSelector(\n    (state) => state.constructorIngredients.totalSum\n  );\n  const bun = useSelector((state) => state.constructorIngredients.bun);\n  const refreshToken = useSelector((state) => state.user.refreshToken);\n  const dispatch = useDispatch();\n  const { isOpenModal, onOpenModal, onCloseModal } = useToggleModal();\n  const {\n    isOpenModal: isOpenModalAlert,\n    onOpenModal: onOpenModalAlert,\n    onCloseModal: onCloseModalAlert,\n  } = useToggleModal();\n\n  const handleOnOpenModule = async () => {\n    if (!isLoading) {\n      if (refreshToken) {\n        if (bun) {\n          api.setAbortController();\n          onOpenModal();\n          await dispatch(getOrderFetch());\n        } else {\n          onOpenModalAlert();\n        }\n      } else {\n        history.push(LOGIN_PATH);\n      }\n    }\n  };\n\n  const handleOnCloseModule = (\n    e?: React.MouseEvent<HTMLElement, MouseEvent> | undefined\n  ) => {\n    if (isLoading) {\n      api.getAbortFetch();\n    }\n    onCloseModal(e);\n  };\n\n  return (\n    <>\n      <div className={`pt-10 pb-10 ${styles.burger_constructor_footer}`}>\n        <p className={`pr-10 ${styles.total_container}`}>\n          <span className=\"text text_type_digits-medium\">{totalSum / 100}</span>\n          <span className={styles.total_icon}>\n            <CurrencyIcon type=\"primary\" />\n          </span>\n        </p>\n        <Button type=\"primary\" size=\"large\" onClick={handleOnOpenModule}>\n          {nameButton}\n        </Button>\n      </div>\n\n      {isOpenModal ? (\n        <Modal onClose={handleOnCloseModule}>\n          <OrderDetails />\n        </Modal>\n      ) : null}\n      {isOpenModalAlert ? (\n        <Modal onClose={onCloseModalAlert}>\n          <h2 className={styles.alert}>\n            {\"Бургером можно наслаждаться только с булками! =)\"}\n          </h2>\n        </Modal>\n      ) : null}\n    </>\n  );\n}\n","import React, { memo, useCallback } from \"react\";\nimport { useDrop } from \"react-dnd\";\nimport ScrollContainer from \"../../../layouts/scroll-container/scroll-container\";\nimport { ItemTypes } from \"../../../models/drag-and-drop\";\nimport { IIngredientsItem } from \"../../../models/ingredients\";\nimport {\n  addIngredientInConstructor,\n  deleteIngredientFromConstructor\n} from \"../../../services/constructor-ingredients-slice\";\nimport { useDispatch, useSelector } from \"../../hooks\";\nimport Bun from \"./bun/bun\";\nimport styles from \"./burger-constructor.module.css\";\nimport ConstructorIngredientsList from \"./constructor-ingredients-list/constructor-ingredients-list\";\nimport Order from \"./order/order\";\n\nfunction BurgerConstructor() {\n  const { bun, constructorIngredients } = useSelector((state) => ({\n    bun: state.constructorIngredients.bun,\n    constructorIngredients: state.constructorIngredients.constructorIngredients,\n  }));\n  const dispatch = useDispatch();\n  const [{ canDrop, isOver }, drop] = useDrop(() => ({\n    accept: ItemTypes.INGREDIENT_CARD,\n    drop: (item) => {\n      dispatch(addIngredientInConstructor(item as IIngredientsItem));\n    },\n    collect: (monitor) => ({\n      canDrop: monitor.canDrop(),\n      isOver: monitor.isOver(),\n    }),\n  }));\n\n  const handleDeleteItem = useCallback(\n    (ingredient: IIngredientsItem) => {\n      dispatch(deleteIngredientFromConstructor(ingredient));\n    },\n    [dispatch]\n  );\n\n  return (\n    <section className={styles.burger_constructor}>\n      <div className={styles.burger_constructor_body}>\n        <Bun bun={bun} isTop={true} />\n        <div\n          className={`${styles.burger_list_container} ${\n            canDrop ? styles.burger_list_container_target_illumination : \"\"\n          } ${isOver ? styles.burger_list_container_over_illumination : \"\"}`}\n          ref={drop}\n        >\n          <ScrollContainer className={styles.burger_list_scroll}>\n            <ConstructorIngredientsList\n              constructorIngredients={constructorIngredients}\n              deleteItem={handleDeleteItem}\n            />\n          </ScrollContainer>\n        </div>\n        <Bun bun={bun} isTop={false} />\n      </div>\n      <Order />\n    </section>\n  );\n}\n\nexport default memo(BurgerConstructor);\n","import React, { LegacyRef, memo } from 'react';\n\ninterface IProps {\n  children: React.ReactChild;\n  categoryName: string;\n  style?: React.CSSProperties;\n  className?: string;\n  currentTabRef?: LegacyRef<HTMLDivElement> | undefined;\n}\n\nfunction CategoriesSection({\n  children,\n  categoryName,\n  style = {},\n  className = '',\n  currentTabRef,\n}: IProps) {\n  return (\n    <div style={style} className={className} ref={currentTabRef}>\n      <h2 className=\"pt-10 pb-6\">{categoryName}</h2>\n      {children}\n    </div>\n  );\n}\n\nexport default memo(CategoriesSection);\n","import {\n  Counter,\n  CurrencyIcon\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { AnimatePresence, motion, useAnimation, Variants } from \"framer-motion\";\nimport React, { memo, useEffect, useRef } from \"react\";\nimport { DragPreviewImage, useDrag } from \"react-dnd\";\nimport { useHistory, useLocation } from \"react-router\";\nimport { ItemTypes } from \"../../../../models/drag-and-drop\";\nimport { IIngredientsItem } from \"../../../../models/ingredients\";\nimport { INGREDIENTS_PATH } from \"../../../../routes/constants-path\";\nimport styles from \"./ingredient-card.module.css\";\n\ninterface IProps {\n  ingredientData: IIngredientsItem;\n  count?: number;\n  numElement?: number;\n}\n\nconst variants: Variants = {\n  visible: (i: number) => ({\n    opacity: 1,\n    scaleX: 1,\n    scaleY: 1,\n    transition: {\n      delay: i * 0.1,\n    },\n  }),\n  hidden: { opacity: 0, scaleX: 0.1, scaleY: 0.1 },\n};\n\nconst variantsCount: Variants = {\n  visible: {\n    opacity: 1,\n    scaleX: 1,\n    scaleY: 1,\n    transition: {\n      duration: 0.3,\n      type: \"spring\",\n      stiffness: 90,\n    },\n  },\n  addCount: {\n    scale: [1.1, 1],\n    transition: {\n      duration: 0.5,\n    },\n  },\n  hidden: { opacity: 0, scaleX: 0.1, scaleY: 0.1 },\n  exit: {\n    opacity: 0,\n    scaleX: 1,\n    scaleY: 1,\n    transition: {\n      duration: 0.2,\n      ease: \"easeOut\",\n    },\n  },\n};\n\nfunction IngredientCard({ ingredientData, count = 0, numElement = 0 }: IProps) {\n  const countRef = useRef(0);\n  const controls = useAnimation();\n  const history = useHistory();\n  const location = useLocation();\n  const [{ isDragging }, drag, preview] = useDrag(() => ({\n    type: ItemTypes.INGREDIENT_CARD,\n    item: ingredientData,\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n    options: {\n      dropEffect: \"copy\",\n    },\n  }));\n\n  const handleOnClick = () => {\n    history.push({\n      pathname: `${INGREDIENTS_PATH}/${ingredientData._id}`,\n      state: { background: location }\n    });\n  };\n\n  useEffect(() => {\n    if (\n      (count > 1 && countRef.current !== 0) ||\n      (count === 1 && count < countRef.current)\n    ) {\n      controls.start(\"addCount\");\n    } else if (count === 1 || (countRef.current === 0 && count > 0)) {\n      controls.start(\"visible\");\n    } else {\n      controls.start(\"exit\");\n    }\n    countRef.current = count;\n  }, [controls, count]);\n\n  const opacity = isDragging ? 0.2 : 1;\n\n  return (\n    <>\n      <DragPreviewImage connect={preview} src={ingredientData.image} />\n      <motion.li\n        className={styles.ingredient_card}\n        style={{ opacity }}\n        variants={variants}\n        custom={numElement}\n        initial=\"hidden\"\n        animate=\"visible\"\n        onClick={handleOnClick}\n        ref={drag}\n      >\n        <AnimatePresence>\n          {count ? (\n            <motion.div\n              className={styles.ingredient_count}\n              variants={variantsCount}\n              animate={controls}\n              initial=\"hidden\"\n              exit=\"exit\"\n            >\n              <Counter count={count} size={count < 100 ? \"default\" : \"small\"} />\n            </motion.div>\n          ) : null}\n        </AnimatePresence>\n        <img\n          className={styles.ingredient_image}\n          src={ingredientData.image}\n          alt={ingredientData.name}\n        />\n        <p className={`p-2 ${styles.ingredient_price_container}`}>\n          <span className=\"text text_type_digits-default\">\n            {ingredientData.price / 100}\n          </span>\n          <span className={styles.ingredient_price_icon}>\n            <CurrencyIcon type=\"primary\" />\n          </span>\n        </p>\n        <p className={styles.ingredient_name}>\n          <span className=\"text text_type_main-default\">\n            {ingredientData.name}\n          </span>\n        </p>\n      </motion.li>\n    </>\n  );\n}\n\nexport default memo(IngredientCard);\n","import React, { memo, MutableRefObject, useCallback } from \"react\";\nimport InView from \"react-intersection-observer\";\n\nimport {\n  bunName,\n  categories,\n  categoriesTypeArray,\n} from \"../../../../common/constants\";\nimport {\n  ICountIngredient,\n  IIngredientsItem,\n  TCategory,\n} from \"../../../../models/ingredients\";\nimport CategoriesSection from \"../categories-section/categories-section\";\nimport IngredientCard from \"../ingredient-card/ingredient-card\";\n\nimport styles from \"./ingredients-list.module.css\";\n\ninterface IProps {\n  tabListRefs: MutableRefObject<{\n    bun?: HTMLDivElement | null | undefined;\n    sauce?: HTMLDivElement | null | undefined;\n    main?: HTMLDivElement | null | undefined;\n  }>;\n  ingredients: IIngredientsItem[];\n  countIngredients: ICountIngredient[];\n  isClicked: boolean;\n  bun: IIngredientsItem | null;\n  onChangeInView: (inView: boolean, entry: IntersectionObserverEntry) => void;\n}\n\nfunction IngredientsList({\n  tabListRefs,\n  ingredients,\n  countIngredients,\n  isClicked,\n  bun,\n  onChangeInView,\n}: IProps) {\n  let numElement = 0;\n\n  const getCount = useCallback(\n    (item: IIngredientsItem) => {\n      if (item.type === bunName) {\n        return bun && bun!._id === item._id ? 2 : 0;\n      } else {\n        const findCountObj = countIngredients.find(\n          (countObj) => countObj.id === item._id\n        );\n\n        return findCountObj ? findCountObj.count : 0;\n      }\n    },\n    [bun, countIngredients]\n  );\n\n  return (\n    <>\n      {categoriesTypeArray.map((categoryKey: TCategory) => {\n        const categoryName = categories[categoryKey];\n        const filteredDate = ingredients.filter(\n          (item) => item.type === categoryKey\n        );\n\n        return (\n          <CategoriesSection\n            categoryName={categoryName}\n            key={categoryKey}\n            currentTabRef={(node) => (tabListRefs.current[categoryKey] = node)}\n          >\n            <InView\n              as=\"div\"\n              name={categoryKey}\n              // threshold={0.6}\n              skip={isClicked}\n              onChange={onChangeInView}\n            >\n              <ul className={`${styles.category_ingredients_container}`}>\n                {filteredDate.map((filteredItem) => {\n                  numElement++;\n\n                  return (\n                    <IngredientCard\n                      ingredientData={filteredItem}\n                      key={filteredItem._id}\n                      count={getCount(filteredItem)}\n                      numElement={numElement}\n                    />\n                  );\n                })}\n              </ul>\n            </InView>\n          </CategoriesSection>\n        );\n      })}\n    </>\n  );\n}\n\nexport default memo(IngredientsList);\n","import React, { memo, RefObject } from 'react';\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\n\nimport { categories, categoriesTypeArray } from '../../../../common/constants';\nimport { TCategory } from '../../../../models/ingredients';\n\nimport styles from './tab-nav-by-category.module.css';\n\ninterface IProps {\n  currentTabName: TCategory;\n  tabsRef: RefObject<HTMLDivElement>;\n  onMouseEnter: () => void;\n  onMouseLeave: () => void;\n  onClickTab: (value: string) => void;\n}\n\nfunction TabNavByCategory({\n  currentTabName,\n  tabsRef,\n  onMouseEnter,\n  onMouseLeave,\n  onClickTab,\n}: IProps) {\n  return (\n    <nav\n      className={styles.tabs_container}\n      ref={tabsRef}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n    >\n      {categoriesTypeArray.map((categoryKey: TCategory) => {\n        const categoryName = categories[categoryKey];\n\n        return (\n          <Tab\n            value={categoryKey}\n            active={currentTabName === categoryKey}\n            onClick={onClickTab}\n            key={categoryKey}\n          >\n            {categoryName}\n          </Tab>\n        );\n      })}\n    </nav>\n  );\n}\n\nexport default memo(TabNavByCategory);\n","import React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState\n} from \"react\";\nimport { bunName, categoriesTypeArray } from \"../../../common/constants\";\nimport ScrollContainer from \"../../../layouts/scroll-container/scroll-container\";\nimport { TCategory } from \"../../../models/ingredients\";\nimport { useSelector } from \"../../hooks\";\nimport { useForceMemoUpdate } from \"./hooks/use-force-memo-update\";\nimport { useToggleRefs } from \"./hooks/use-toggle-refs\";\nimport IngredientsList from \"./ingredients-list/ingredients-list\";\nimport TabNavByCategory from \"./tab-nav-by-category/tab-nav-by-category\";\n\nexport default function BurgerIngredients() {\n  const tabsRef = useRef<HTMLDivElement>(null);\n  const ingredients = useSelector((state) => state.ingredients.ingredients);\n  const bun = useSelector((state) => state.constructorIngredients.bun);\n  const countIngredients = useSelector(\n    (state) => state.ingredients.countIngredients\n  );\n  const [visibleList, setVisibleList] = useState<TCategory[]>([]);\n  const [isClicked, setIsClicked] = useState(false);\n  const forceMemoUpdate = useForceMemoUpdate([ingredients]);\n  const { currentTabName, tabListRefs, setCurrentType } =\n    useToggleRefs(bunName);\n\n  useEffect(() => {\n    const findTabName = (name: TCategory) =>\n      visibleList.find((nameList) => name === nameList);\n    const newTab = categoriesTypeArray.find(findTabName) as TCategory;\n\n    setCurrentType(newTab);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [visibleList]);\n\n  const handleOnClickTab = useCallback(\n    (value: string) => {\n      setCurrentType(value as TCategory);\n    },\n    [setCurrentType]\n  );\n\n  const handleOnChangeInView = useCallback(\n    (inView: boolean, entry: IntersectionObserverEntry) => {\n      const inViewName = entry.target.getAttribute(\"name\") as TCategory;\n\n      if (inView) {\n        setVisibleList([...visibleList, inViewName]);\n      } else {\n        const newList = visibleList.filter((item) => item !== inViewName);\n        setVisibleList([...newList]);\n      }\n    },\n    [visibleList]\n  );\n\n  const handleOnMouseEnter = useCallback(() => {\n    setIsClicked(true);\n  }, []);\n\n  const handleOnMouseLeave = useCallback(() => {\n    setIsClicked(false);\n  }, []);\n\n  const styleIngredientsContainer = useMemo(\n    () =>\n      tabsRef.current\n        ? {\n            height: `calc(100% - ${tabsRef.current.clientHeight}px - 20px)`,\n          }\n        : {},\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [tabsRef.current]\n  );\n\n  return (\n    <section>\n      <TabNavByCategory\n        tabsRef={tabsRef}\n        currentTabName={currentTabName}\n        onClickTab={handleOnClickTab}\n        onMouseEnter={handleOnMouseEnter}\n        onMouseLeave={handleOnMouseLeave}\n      />\n      <ScrollContainer\n        style={styleIngredientsContainer}\n        forceUpdate={forceMemoUpdate}\n      >\n        <IngredientsList\n          tabListRefs={tabListRefs}\n          ingredients={ingredients}\n          countIngredients={countIngredients}\n          isClicked={isClicked}\n          bun={bun}\n          onChangeInView={handleOnChangeInView}\n        />\n      </ScrollContainer>\n    </section>\n  );\n}\n","import { DependencyList, useEffect, useState } from \"react\";\n\nexport const useForceMemoUpdate = (deps?: DependencyList | undefined) => {\n    const [forceMemoUpdate, setForceMemoUpdate] = useState<string>(\n        new Date().getTime().toString()\n    );\n\n    useEffect(() => {\n        setForceMemoUpdate(new Date().getTime().toString());\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, deps);\n\n    return forceMemoUpdate;\n}","import { useEffect, useRef, useState } from 'react';\nimport { TCategory } from '../../../../models/ingredients';\n\nexport const useToggleRefs = (initialName: TCategory) => {\n  const [currentTabName, setCurrentTabNameLocal] =\n    useState<TCategory>(initialName);\n  const tabListRefs = useRef<{ [key in TCategory]?: HTMLDivElement | null }>(\n    {}\n  );\n\n  useEffect(() => {\n    if (tabListRefs.current[currentTabName]) {\n      tabListRefs.current[currentTabName]!.scrollIntoView({\n        block: 'start',\n        behavior: 'smooth',\n      });\n    }\n\n    return () => {};\n  }, [currentTabName]);\n\n  function setCurrentType(name: TCategory) {\n    setCurrentTabNameLocal(name);\n  }\n\n  return { currentTabName, tabListRefs, setCurrentType };\n};\n","import React from \"react\";\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport TwoColumns from \"../../layouts/two-columns/two-columns\";\nimport { useSelector } from \"../hooks\";\nimport Loader from \"../ui/loader/loader\";\nimport BurgerConstructor from \"./burger-constructor/burger-constructor\";\nimport BurgerIngredients from \"./burger-ingredients/burger-ingredients\";\n\nexport default function BurgerFactory() {\n  const isLoading = useSelector((state) => state.ingredients.isLoading);\n  const title = \"Соберите бургер\";\n\n  return (\n    <>\n      <h1>{title}</h1>\n      {isLoading ? (\n        <Loader />\n      ) : (\n        <TwoColumns style={{ height: \"100%\" }}>\n          <DndProvider backend={HTML5Backend}>\n            <BurgerIngredients />\n            <BurgerConstructor />\n          </DndProvider>\n        </TwoColumns>\n      )}\n    </>\n  );\n}\n","import React from 'react';\n\nimport BurgerFactory from '../../components/burger-factory/burger-factory';\nimport MainAllLayouts from '../../layouts/main-all-layouts/main-all-layouts';\n\nexport default function BurgerFactoryPage() {\n  return (\n    <MainAllLayouts>\n      <BurgerFactory />\n    </MainAllLayouts>\n  );\n}\n","import React, { FC } from \"react\";\nimport { IIngredientsItem } from \"../../../models/ingredients\";\nimport RoundPicture from \"../round-picture/round-picture\";\nimport styles from \"./row-round-pictures.module.css\";\n\ninterface IProps {\n  images: IIngredientsItem[];\n}\n\nconst maxIndex = 6;\n\nconst RowRoundPictures: FC<IProps> = ({ images }) => {\n  return (\n    <div className={styles.main_container}>\n      <div className={styles.images_container}>\n        {[...images].reverse().map((image, index) =>\n          index < maxIndex ? (\n            <div key={index} className={styles.image_container}>\n              <RoundPicture image={image} />\n            </div>\n          ) : null\n        )}\n      </div>\n\n      {images.length >= maxIndex && images.length - maxIndex > 0 ? (\n        <div className={`text text_type_main-default ${styles.another}`}>\n          <p>{`+${images.length - maxIndex}`}</p>\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nexport default RowRoundPictures;\n","import React, { FC, useEffect, useState } from \"react\";\nimport { getFormattedDateWithTime } from \"../../common/functions\";\nimport { IOrderFeedElementWithIngredients } from \"../../models/order\";\nimport Price from \"../ui/price/price\";\nimport RowRoundPictures from \"../ui/row-round-pictures/row-round-pictures\";\nimport styles from \"./order-feed-element.module.css\";\n\ninterface IProps {\n  orderElement: IOrderFeedElementWithIngredients;\n  showStatus?: boolean;\n  OnClick?: (idFeed: string) => void;\n}\n\nconst OrderFeedElement: FC<IProps> = ({\n  orderElement: { createdAt, ingredients, name, number, status },\n  showStatus = false,\n  OnClick,\n}) => {\n  const handleOnClick = OnClick ? () => OnClick(`${number}`) : undefined;\n  const [price, setPrice] = useState(0);\n\n  useEffect(() => {\n    const total = ingredients.reduce(\n      (calcTotal, { price }) => (calcTotal = calcTotal + +price),\n      0\n    );\n\n    setPrice(total);\n  }, [ingredients]);\n\n  return (\n    <div className={styles.main_container} onClick={handleOnClick}>\n      <div className={styles.top_container}>\n        <div\n          className={`text text_type_digits-default ${styles.id}`}\n        >{`#${number}`}</div>\n        <div className={`text text_type_main-default ${styles.data}`}>\n          {getFormattedDateWithTime(createdAt)}\n        </div>\n      </div>\n      <div className={`text text_type_main-medium ${styles.name_container}`}>\n        {name}\n      </div>\n      {showStatus ? (\n        <div\n          className={`text text_type_main-default ${\n            status === \"done\"\n              ? styles.done_status\n              : status === \"cancelled\"\n              ? styles.canceled_status\n              : styles.prepared_status\n          }`}\n        >\n          {status === \"done\"\n            ? \"Выполнен\"\n            : status === \"cancelled\"\n            ? \"Отменен\"\n            : \"Готовиться\"}\n        </div>\n      ) : null}\n      <div className={styles.bottom_container}>\n        <div className={styles.images_container}>\n          <RowRoundPictures images={ingredients} />\n        </div>\n        <Price price={price.toLocaleString()} />\n      </div>\n    </div>\n  );\n};\n\nexport default OrderFeedElement;\n","import React, { FC, useCallback } from \"react\";\nimport { useHistory, useLocation, useRouteMatch } from \"react-router-dom\";\nimport { IOrderFeedElementWithIngredients } from \"../../models/order\";\nimport OrderFeedElement from \"../order-feed-element/order-feed-element\";\n\ninterface IProps {\n  orderFeedListElement: IOrderFeedElementWithIngredients[];\n  showStatus?: boolean;\n}\n\nconst OrderFeedElementsList: FC<IProps> = ({ orderFeedListElement, showStatus = false }) => {\n  const { path } = useRouteMatch();\n  const history = useHistory();\n  const location = useLocation();\n  const handleOnClick = useCallback(\n    (idFeed: string) => {\n      history.push({\n        pathname: `${path}/${idFeed}`,\n        state: { background: location },\n      });\n    },\n    [history, location, path]\n  );\n\n  return (\n    <div>\n      {orderFeedListElement.map((feedElement) => (\n        <OrderFeedElement\n          orderElement={feedElement}\n          key={feedElement._id}\n          showStatus={showStatus}\n          OnClick={handleOnClick}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default OrderFeedElementsList;\n","import React, { FC } from \"react\";\nimport ScrollContainer from \"../../../layouts/scroll-container/scroll-container\";\nimport styles from \"./statistics.module.css\";\n\ninterface IProps {\n  ready: string[];\n  inTheWork: string[];\n  completedForAllTime: number;\n  completedToday: number;\n}\n\nconst Statistics: FC<IProps> = ({\n  ready,\n  inTheWork,\n  completedForAllTime,\n  completedToday,\n}) => {\n  return (\n    <section className={styles.main_container}>\n      <div className={styles.status_table}>\n        <div className={styles.ready}>\n          <h3 className=\"text text_type_main-medium\">Готовы:</h3>\n          <ScrollContainer style={{ height: \"250px\" }}>\n            <ul>\n              {ready.map((item) => (\n                <li key={item} className=\"text text_type_digits-default\">\n                  {item}\n                </li>\n              ))}\n            </ul>\n          </ScrollContainer>\n        </div>\n        <div className={styles.in_work}>\n          <h3 className=\"text text_type_main-medium\">В работе:</h3>\n          <ScrollContainer style={{ height: \"250px\" }}>\n            <ul>\n              {inTheWork.map((item) => (\n                <li key={item} className=\"text text_type_digits-default\">\n                  {item}\n                </li>\n              ))}\n            </ul>\n          </ScrollContainer>\n        </div>\n      </div>\n      <div className={styles.completed_block}>\n        <h3 className=\"text text_type_main-medium\">Выполнено за все время:</h3>\n        <p>\n          <span className=\"text text_type_digits-large\">\n            {completedForAllTime.toLocaleString()}\n          </span>\n        </p>\n      </div>\n      <div className={styles.completed_block}>\n        <h3 className=\"text text_type_main-medium\">Выполнено за сегодня:</h3>\n        <p>\n          <span className=\"text text_type_digits-large\">\n            {completedToday.toLocaleString()}\n          </span>\n        </p>\n      </div>\n    </section>\n  );\n};\n\nexport default Statistics;\n","import React, { useEffect, useState } from \"react\";\nimport ScrollContainer from \"../../layouts/scroll-container/scroll-container\";\nimport TwoColumns from \"../../layouts/two-columns/two-columns\";\nimport { IOrderFeedElementWithIngredients } from \"../../models/order\";\nimport {\n  wsOrderAllClose,\n  wsOrderAllConnectionStart\n} from \"../../redux/action-types/ws-action-creators\";\nimport { useDispatch, useSelector } from \"../hooks\";\nimport OrderFeedElementsList from \"../order-feed-elements-list/order-feed-elements-list\";\nimport Loader from \"../ui/loader/loader\";\nimport styles from \"./order-feed.module.css\";\nimport Statistics from \"./statistics/statistics\";\n\nexport default function OrderFeed() {\n  const dispatch = useDispatch();\n  const title = \"Лента заказов\";\n  const [orderData, setOrderData] = useState<\n    IOrderFeedElementWithIngredients[]\n  >([]);\n  const [completedForAllTime, setCompletedForAllTime] = useState(0);\n  const [completedToday, setCompletedToday] = useState(0);\n  const [readyOrders, setReadyOrders] = useState<string[]>([]);\n  const [inTheWorkOrders, setInTheWorkOrders] = useState<string[]>([]);\n\n  const orderFeedAll = useSelector((state) => state.order.orderFeedAll);\n\n  useEffect(() => {\n    dispatch(wsOrderAllConnectionStart());\n\n    return () => {\n      dispatch(wsOrderAllClose());\n    };\n    //eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (orderFeedAll) {\n      setOrderData(orderFeedAll.orders);\n      setCompletedForAllTime(orderFeedAll.total);\n      setCompletedToday(orderFeedAll.totalToday);\n\n      const ready: string[] = [];\n      const inTheWork: string[] = [];\n\n      orderFeedAll.orders.forEach((orderItem) => {\n        if (orderItem.status === \"done\") {\n          ready.push(`${orderItem.number}`);\n        } else {\n          inTheWork.push(`${orderItem.number}`);\n        }\n\n        setReadyOrders([...ready]);\n        setInTheWorkOrders([...inTheWork]);\n      });\n    }\n  }, [orderFeedAll]);\n\n  return (\n    <div className={styles.main_container}>\n      <h1>{title}</h1>\n      {orderData.length > 0 ? (\n        <TwoColumns style={{ height: \"100%\" }} className={styles.gap60}>\n          <>\n            <section>\n              <ScrollContainer style={{ height: \"100%\" }}>\n                <OrderFeedElementsList orderFeedListElement={orderData} />\n              </ScrollContainer>\n            </section>\n            <Statistics\n              ready={readyOrders}\n              inTheWork={inTheWorkOrders}\n              completedForAllTime={completedForAllTime}\n              completedToday={completedToday}\n            />\n          </>\n        </TwoColumns>\n      ) : (\n        <Loader />\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport OrderFeed from '../../components/order-feed/order-feed';\nimport MainAllLayouts from '../../layouts/main-all-layouts/main-all-layouts';\n\n\nexport default function FeedPage() {\n  return (\n    <MainAllLayouts>\n      <OrderFeed />\n    </MainAllLayouts>\n  );\n}","import React from 'react';\n\nimport styles from './login-layout-container.module.css';\n\ninterface IProps {\n  children: React.ReactChild;\n}\n\nexport default function LoginLayoutContainer({ children }: IProps) {\n  return (\n    <div className={styles.login_layout_container}>{children}</div>\n  );\n}","import {\n  ILogoutResponse, IUserDataResponse,\n  IUserResponse\n} from \"../models/user\";\nimport { Api } from \"./api\";\n\nconst api = Api.getInstance();\nconst LOCAL_URL = \"/auth\";\n\nexport const getRegisterUser = async (\n  email: string,\n  password: string,\n  name: string\n) => {\n  return await api.postFetch<IUserResponse>(\n    LOCAL_URL + \"/register\",\n    JSON.stringify({ email, password, name })\n  );\n};\n\nexport const getLoginUser = async (email: string, password: string) => {\n  return await api.postFetch<IUserResponse>(\n    LOCAL_URL + \"/login\",\n    JSON.stringify({ email, password })\n  );\n};\n\nexport const getLogout = async (refreshToken: string) => {\n  return await api.postFetch<ILogoutResponse>(\n    LOCAL_URL + \"/logout\",\n    JSON.stringify({ token: refreshToken })\n  );\n};\n\nexport const getUser = async () => {\n  return await api.getProtectedFetch<IUserDataResponse>(LOCAL_URL + \"/user\");\n};\n\nexport const updateUser = async (\n  email: string,\n  password: string,\n  name: string\n) => {\n  return await api.patchProtectedFetch<IUserDataResponse>(\n    LOCAL_URL + \"/user\",\n    JSON.stringify({ email, password, name })\n  );\n};\n\nexport const getRefreshToken = async () => {\n  await api.refreshTokenFetch();\n};\n","export enum nameFields {\n  Email = \"email\",\n  Password = \"password\",\n  Login = \"login\",\n  Name = \"name\",\n  Code = \"code\",\n}\n","import {\n  AnyAction,\n  createAsyncThunk,\n  createSlice,\n  PayloadAction,\n  ThunkDispatch\n} from \"@reduxjs/toolkit\";\nimport { Api, errorAuthorized } from \"../api/api\";\nimport {\n  getLoginUser,\n  getLogout,\n  getRegisterUser,\n  getUser,\n  updateUser\n} from \"../api/auth\";\nimport { IUserState } from \"../models/app-store\";\nimport { IRefreshResponse, IUserFields } from \"../models/user\";\nimport { MAIN_PATH } from \"../routes/constants-path\";\nimport { setErrorInAsyncThunk } from \"./common\";\nimport { TRootState } from \"./store\";\n\nconst api = Api.getInstance();\n\nconst initialState: IUserState = {\n  user: {\n    name: \"\",\n    email: \"\",\n  },\n  isLoading: false,\n  redirectTo: \"\",\n  errorText: \"\",\n  refreshToken: api.refreshToken,\n};\n\nconst setToken = (\n  userResponse: IRefreshResponse,\n  dispatch: ThunkDispatch<unknown, unknown, AnyAction>\n) => {\n  api.token = userResponse.accessToken;\n  api.refreshToken = userResponse.refreshToken;\n  dispatch(setRefreshToken(userResponse.refreshToken));\n};\n\nconst deleteToken = (dispatch: ThunkDispatch<unknown, unknown, AnyAction>) => {\n  api.logOut();\n\n  dispatch(setRefreshToken(\"\"));\n};\n\nexport const getRegisterFetch = createAsyncThunk(\n  \"user/getRegisterFetch\",\n  async function (\n    {\n      email,\n      password,\n      name,\n    }: { email: string; password: string; name: string },\n    { rejectWithValue, dispatch, getState }\n  ) {\n    const {\n      user: { isLoading },\n    } = getState() as TRootState;\n\n    if (!isLoading) {\n      dispatch(setIsLoading(true));\n      try {\n        const userResponse = await getRegisterUser(email, password, name);\n\n        if (userResponse.success) {\n          setToken(userResponse, dispatch);\n          dispatch(setUser(userResponse.user));\n        }\n      } catch (error) {\n        const [errorSuccess, errorMessage] = (error as Error).message.split(\n          \"===\"\n        );\n        if (errorSuccess === \"403\") {\n          dispatch(setError(errorMessage));\n        } else {\n          setErrorInAsyncThunk(error as Error, dispatch, rejectWithValue);\n        }\n      }\n      dispatch(setRefreshToken(api.refreshToken));\n    }\n  }\n);\n\nexport const getLoginFetch = createAsyncThunk(\n  \"user/getLoginFetch\",\n  async function (\n    { email, password }: { email: string; password: string },\n    { rejectWithValue, dispatch, getState }\n  ) {\n    const {\n      user: { isLoading },\n    } = getState() as TRootState;\n    if (!isLoading) {\n      dispatch(setIsLoading(true));\n      try {\n        dispatch(setRedirectPath(\"\"));\n        const userResponse = await getLoginUser(email, password);\n\n        if (userResponse.success) {\n          setToken(userResponse, dispatch);\n          dispatch(setUser(userResponse.user));\n          dispatch(setRedirectPath(MAIN_PATH));\n        }\n      } catch (error) {\n        const [errorSuccess, errorMessage] = (error as Error).message.split(\n          \"===\"\n        );\n        if (\n          errorSuccess === \"401\" &&\n          errorMessage === errorAuthorized.emailOrPasswordAreIncorrect\n        ) {\n          alert(\"Не корректный логин или пароль\");\n        } else {\n          setErrorInAsyncThunk(error as Error, dispatch, rejectWithValue);\n        }\n      }\n    }\n    dispatch(setRefreshToken(api.refreshToken));\n  }\n);\n\nexport const getLogoutFetch = createAsyncThunk(\n  \"user/getLogoutFetch\",\n  async function (_, { rejectWithValue, dispatch, getState }) {\n    const {\n      user: { isLoading, refreshToken },\n    } = getState() as TRootState;\n\n    if (!isLoading) {\n      dispatch(setIsLoading(true));\n      try {\n        dispatch(setRedirectPath(\"\"));\n        const userResponse = await getLogout(refreshToken);\n\n        if (userResponse.success) {\n          deleteToken(dispatch);\n          dispatch(setUser({ email: \"\", name: \"\" }));\n          // dispatch(setRefreshToken(api.refreshToken));\n        } else {\n          deleteToken(dispatch);\n          dispatch(setUser({ email: \"\", name: \"\" }));\n        }\n      } catch (error) {\n        setErrorInAsyncThunk(error as Error, dispatch, rejectWithValue);\n      }\n    }\n    dispatch(setRefreshToken(api.refreshToken));\n  }\n);\n\nexport const getUserFetch = createAsyncThunk(\n  \"user/getUserFetch\",\n  async function (_, { rejectWithValue, dispatch, getState }) {\n    const {\n      user: { isLoading },\n    } = getState() as TRootState;\n\n    if (!isLoading) {\n      dispatch(setIsLoading(true));\n      try {\n        const userResponse = await getUser();\n\n        if (userResponse.success) {\n          dispatch(setUser(userResponse.user));\n          dispatch(setRefreshToken(api.refreshToken));\n        } else {\n          console.log(userResponse);\n        }\n      } catch (error) {\n        const [errorSuccess, errorMessage] = (error as Error).message.split(\n          \"===\"\n        );\n\n        if (\n          errorSuccess === \"403\" &&\n          errorMessage === errorAuthorized.jwtExpired\n        ) {\n          // alert(\"\");\n        } else {\n          setErrorInAsyncThunk(error as Error, dispatch, rejectWithValue);\n        }\n      }\n    }\n    dispatch(setRefreshToken(api.refreshToken));\n  }\n);\n\nexport const updateUserFetch = createAsyncThunk(\n  \"user/updateUserFetch\",\n  async function (\n    {\n      email,\n      password,\n      name,\n    }: { email: string; password: string; name: string },\n    { rejectWithValue, dispatch, getState }\n  ) {\n    const {\n      user: { isLoading },\n    } = getState() as TRootState;\n\n    if (!isLoading) {\n      dispatch(setIsLoading(true));\n      try {\n        const userResponse = await updateUser(email, password, name);\n\n        if (userResponse.success) {\n          dispatch(setUser(userResponse.user));\n          dispatch(setRefreshToken(api.refreshToken));\n        }\n      } catch (error) {\n        setErrorInAsyncThunk(error as Error, dispatch, rejectWithValue);\n      }\n    }\n    dispatch(setRefreshToken(api.refreshToken));\n  }\n);\n\nconst userSlice = createSlice({\n  name: \"user\",\n  initialState,\n  reducers: {\n    setUser(state, action: PayloadAction<IUserFields>) {\n      state.user = action.payload;\n    },\n    setRedirectPath(state, action: PayloadAction<string>) {\n      state.redirectTo = action.payload;\n    },\n    setError(state, action: PayloadAction<string>) {\n      state.errorText = action.payload;\n    },\n    setRefreshToken(state, action: PayloadAction<string>) {\n      state.refreshToken = action.payload;\n    },\n    setIsLoading(state, action: PayloadAction<boolean>) {\n      state.isLoading = action.payload;\n    },\n  },\n  extraReducers: {\n    // [getRegisterFetch.pending]: (state) => {\n    //   state.isLoading = true;\n    // },\n    [getRegisterFetch.fulfilled.toString()]: (state) => {\n      state.isLoading = false;\n    },\n    [getRegisterFetch.rejected.toString()]: (state) => {\n      state.isLoading = false;\n    },\n    [getLoginFetch.fulfilled.toString()]: (state) => {\n      state.isLoading = false;\n    },\n    [getLoginFetch.rejected.toString()]: (state) => {\n      state.isLoading = false;\n    },\n    [getLogoutFetch.fulfilled.toString()]: (state) => {\n      state.isLoading = false;\n    },\n    [getLogoutFetch.rejected.toString()]: (state) => {\n      state.isLoading = false;\n    },\n    [getUserFetch.fulfilled.toString()]: (state) => {\n      state.isLoading = false;\n    },\n    [getUserFetch.rejected.toString()]: (state) => {\n      state.isLoading = false;\n    },\n    [updateUserFetch.fulfilled.toString()]: (state) => {\n      state.isLoading = false;\n    },\n    [updateUserFetch.rejected.toString()]: (state) => {\n      state.isLoading = false;\n    },\n  },\n});\n\nexport default userSlice.reducer;\n\nconst { setUser, setRedirectPath, setRefreshToken, setIsLoading } =\n  userSlice.actions;\nexport const { setError } = userSlice.actions;\n","import { reEmail } from \"../../../common/constants\";\nimport {\n    getPhraseMustBeMoreThan,\n    INVALID_FORMAT,\n    REQUIRED_TO_FILL\n} from \"../../../common/phrases\";\nimport { Validation } from \"../../../models/forms\";\nimport { nameFields } from \"./names-forms\";\n\nexport const requiredValidation = {\n  required: {\n    value: true,\n    message: REQUIRED_TO_FILL,\n  },\n};\n\nexport const validations = {\n  [nameFields.Email]: {\n    requiredValidation,\n    pattern: {\n      value: reEmail,\n      message: INVALID_FORMAT,\n    },\n  } as Validation,\n  [nameFields.Password]: {\n    requiredValidation,\n    custom: {\n      isValid: (value) => value.length > 5,\n      message: getPhraseMustBeMoreThan(\"5-ти\"),\n    },\n  } as Validation,\n};\n","export const REQUIRED_TO_FILL =  \"Обязательно к заполнению\";\nexport const INVALID_FORMAT =  \"Неверный формат ...\";\nexport const getPhraseMustBeMoreThan =  (text:string) => `Пароль должен быть больше ${text} символов...`;","import {\n  Input,\n  PasswordInput\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport React, { useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { LOGIN_PATH } from \"../../../routes/constants-path\";\nimport { getRegisterFetch, setError } from \"../../../services/user-slice\";\nimport { useDispatch, useSelector } from \"../../hooks\";\nimport { requiredValidation, validations } from \"../common/validate-form\";\nimport FormWrapper from \"../form-wrapper/form-wrapper\";\nimport { useForm } from \"../hooks/use-form\";\n\nenum nameFields {\n  Name = \"name\",\n  Email = \"email\",\n  Password = \"password\",\n}\n\ninterface IRegisterForm {\n  [nameFields.Name]: string;\n  [nameFields.Email]: string;\n  [nameFields.Password]: string;\n}\n\nexport default function Register() {\n  const dispatch = useDispatch();\n  const errorText = useSelector((state) => state.user.errorText);\n  const isLoading = useSelector((state) => state.user.isLoading);\n  const { handleSubmit, handleChange, data, errors } = useForm<IRegisterForm>({\n    initialValues: {\n      [nameFields.Name]: \"\",\n      [nameFields.Email]: \"\",\n      [nameFields.Password]: \"\",\n    },\n    validations: {\n      [nameFields.Name]: requiredValidation,\n      [nameFields.Email]: validations[nameFields.Email],\n      [nameFields.Password]: validations[nameFields.Password],\n    },\n    onSubmit: async () => {\n      if (!isLoading) {\n        dispatch(setError(\"\"));\n        await dispatch(\n          getRegisterFetch({\n            email: data[nameFields.Email],\n            password: data[nameFields.Password],\n            name: data[nameFields.Name],\n          })\n        );\n      }\n    },\n  });\n\n  useEffect(() => {\n    if (errorText) {\n      alert(errorText);\n    }\n\n    return () => {\n      dispatch(setError(\"\"));\n    };\n  }, [dispatch, errorText]);\n\n  return (\n    <section className=\"login_container\">\n      <FormWrapper\n        onSubmit={handleSubmit}\n        title=\"Регистрация\"\n        buttonName=\"Зарегистрироваться\"\n      >\n        <div className=\"login_input_container\">\n          <Input\n            type={\"text\"}\n            placeholder={\"Имя\"}\n            onChange={handleChange(nameFields.Name)}\n            value={data[nameFields.Name]}\n            name={nameFields.Name}\n            error={!!errors[nameFields.Name]}\n            errorText={errors[nameFields.Name]}\n          />\n        </div>\n        <div className=\"login_input_container\">\n          <Input\n            type={\"email\"}\n            placeholder={\"E-mail\"}\n            onChange={handleChange(nameFields.Email)}\n            value={data[nameFields.Email]}\n            name={nameFields.Email}\n            error={!!errors[nameFields.Email]}\n            errorText={errors[nameFields.Email]}\n          />\n        </div>\n        <div className=\"login_input_container\">\n          <PasswordInput\n            onChange={handleChange(nameFields.Password)}\n            value={data[nameFields.Password]}\n            name={nameFields.Password}\n          />\n        </div>\n      </FormWrapper>\n      <p className=\"text text_type_main-default\">\n        <span>Уже зарегистрированы?</span>\n        <Link to={LOGIN_PATH}>Войти</Link>\n      </p>\n    </section>\n  );\n}\n","import { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport React, { FC, FormEvent } from \"react\";\n\ninterface IProps {\n  title?: string;\n  onSubmit: (e: FormEvent<Element>) => Promise<void>;\n  buttonName?: string;\n}\n\nconst FormWrapper: FC<IProps> = ({ onSubmit, title, buttonName, children }) => {\n  return (\n    <>\n      {title ? <h2 className=\"text text_type_main-medium\">{title}</h2> : null}\n      <form onSubmit={onSubmit}>\n        {children}\n        {buttonName ? (\n          <div className=\"login_button_container\">\n            <Button type=\"primary\" size=\"medium\">\n              {buttonName}\n            </Button>\n          </div>\n        ) : null}\n      </form>\n    </>\n  );\n};\n\nexport default FormWrapper;\n","import { ChangeEvent, FormEvent, useState } from \"react\";\nimport { ErrorRecord, IUseForm } from \"../../../models/forms\";\n\nexport const useForm = <T extends Record<keyof T, any> = {}>(\n  options: IUseForm<T>\n) => {\n  const [data, setData] = useState<T>((options?.initialValues || {}) as T);\n  const [errors, setErrors] = useState<ErrorRecord<T>>({});\n\n  const handleChange =\n    <S extends unknown>(key: keyof T, sanitizeFn?: (value: string) => S) =>\n    (e: ChangeEvent<HTMLInputElement & HTMLSelectElement>) => {\n      const value = sanitizeFn ? sanitizeFn(e.target.value) : e.target.value;\n      setErrors({ ...errors, [key]: \"\" });\n      setData({\n        ...data,\n        [key]: value,\n      });\n    };\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n\n    const valid = isValidForm();\n\n    if (!valid) {\n      return;\n    }\n\n    setErrors({});\n\n    if (options?.onSubmit) {\n      options.onSubmit();\n    }\n  };\n\n  const isValidForm = () => {\n    let valid = true;\n\n    const validations = options?.validations;\n\n    if (validations) {\n      const newErrors = {} as ErrorRecord<T>;\n      for (const key in validations) {\n        const value = data[key];\n        const validation = validations[key];\n\n        const pattern = validation?.pattern;\n        if (pattern?.value && !pattern.value.test(value)) {\n          valid = false;\n          newErrors[key] = pattern.message;\n        }\n\n        const custom = validation?.custom;\n        if (custom?.isValid && !custom.isValid(value)) {\n          valid = false;\n          newErrors[key] = custom.message;\n        }\n\n        if (validation?.required?.value && !value) {\n          valid = false;\n          newErrors[key] = validation?.required?.message;\n        }\n      }\n\n      if (!valid) {\n        setErrors(newErrors);\n      }\n    }\n\n    return valid;\n  };\n\n  return {\n    data,\n    setData,\n    handleChange,\n    handleSubmit,\n    setErrors,\n    errors,\n  };\n};\n","import {\n  Input,\n  PasswordInput\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  FORGOT_PASSWORD_PATH,\n  REGISTER_PATH\n} from \"../../../routes/constants-path\";\nimport { getLoginFetch } from \"../../../services/user-slice\";\nimport { useDispatch, useSelector } from \"../../hooks\";\nimport { nameFields } from \"../common/names-forms\";\nimport { validations } from \"../common/validate-form\";\nimport FormWrapper from \"../form-wrapper/form-wrapper\";\nimport { useForm } from \"../hooks/use-form\";\n\ninterface ILoginForm {\n  [nameFields.Email]: string;\n  [nameFields.Password]: string;\n}\n\nexport default function Login() {\n  const dispatch = useDispatch();\n  const isLoading = useSelector((state) => state.user.isLoading);\n  const { handleSubmit, handleChange, data, errors } = useForm<ILoginForm>({\n    initialValues: {\n      [nameFields.Email]: \"\",\n      [nameFields.Password]: \"\",\n    },\n    validations: {\n      [nameFields.Email]: validations[nameFields.Email],\n      [nameFields.Password]: validations[nameFields.Password],\n    },\n    onSubmit: async () => {\n      if (!isLoading) {\n        await dispatch(\n          getLoginFetch({\n            email: data[nameFields.Email],\n            password: data[nameFields.Password],\n          })\n        );\n      }\n    },\n  });\n\n  return (\n    <section className=\"login_container\">\n      <FormWrapper onSubmit={handleSubmit} title=\"Вход\" buttonName=\"Войти\">\n        <div className=\"login_input_container\">\n          <Input\n            type={\"email\"}\n            placeholder={\"E-mail\"}\n            onChange={handleChange(nameFields.Email)}\n            value={data[nameFields.Email] || \"\"}\n            name={nameFields.Email}\n            error={!!errors[nameFields.Email]}\n            errorText={errors[nameFields.Email]}\n          />\n        </div>\n        <div className=\"login_input_container\">\n          <PasswordInput\n            onChange={handleChange(nameFields.Password)}\n            value={data[nameFields.Password] || \"\"}\n            name={nameFields.Password}\n          />\n        </div>\n      </FormWrapper>\n\n      <p className=\"text text_type_main-default\">\n        <span>Вы — новый пользователь?</span>\n        <Link to={REGISTER_PATH}>Зарегистрироваться</Link>\n      </p>\n      <p className=\"text text_type_main-default\">\n        <span>Забыли пароль?</span>\n        <Link to={FORGOT_PASSWORD_PATH}>Восстановить пароль</Link>\n      </p>\n    </section>\n  );\n}\n","import {\n  Input\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport React, { useState } from \"react\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport { getChangePassword } from \"../../../api/agent\";\nimport {\n  LOGIN_PATH,\n  RESET_PASSWORD_PATH\n} from \"../../../routes/constants-path\";\nimport { nameFields } from \"../common/names-forms\";\nimport { validations } from \"../common/validate-form\";\nimport FormWrapper from \"../form-wrapper/form-wrapper\";\nimport { useForm } from \"../hooks/use-form\";\n\ninterface IForgotPasswordForm {\n  [nameFields.Email]: string;\n}\n\nexport default function ForgotPassword() {\n  const history = useHistory();\n  const location = useLocation();\n  const [isLoading, setIsLoading] = useState(false);\n  const { handleSubmit, handleChange, data, errors } =\n    useForm<IForgotPasswordForm>({\n      initialValues: {\n        [nameFields.Email]: \"\",\n      },\n      validations: {\n        [nameFields.Email]: validations[nameFields.Email],\n      },\n      onSubmit: async () => {\n        if (!isLoading) {\n          setIsLoading(true);\n\n          try {\n            const result = await getChangePassword(data[nameFields.Email]);\n            setIsLoading(false);\n\n            if (result.success) {\n              history.push(RESET_PASSWORD_PATH, {\n                prevPath: location.pathname,\n              });\n            }\n          } catch (error) {\n            setIsLoading(false);\n            console.log(error);\n          }\n        }\n      },\n    });\n\n  return (\n    <section className=\"login_container\">\n      <FormWrapper\n        onSubmit={handleSubmit}\n        title=\"Восстановление пароля\"\n        buttonName=\"Восстановить\"\n      >\n        <div className=\"login_input_container\">\n          <Input\n            type={\"email\"}\n            placeholder={\"Укажите e-mail\"}\n            onChange={handleChange(nameFields.Email)}\n            value={data[nameFields.Email] || \"\"}\n            name={nameFields.Email}\n            error={!!errors[nameFields.Email]}\n            errorText={errors[nameFields.Email]}\n          />\n        </div>\n      </FormWrapper>\n      <p className=\"text text_type_main-default\">\n        <span>Вспомнили пароль?</span>\n        <Link to={LOGIN_PATH}>Войти</Link>\n      </p>\n    </section>\n  );\n}\n","import {\n  Input\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport React, { useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { getResetPassword } from \"../../../api/agent\";\nimport { LOGIN_PATH } from \"../../../routes/constants-path\";\nimport { nameFields } from \"../common/names-forms\";\nimport { requiredValidation, validations } from \"../common/validate-form\";\nimport FormWrapper from \"../form-wrapper/form-wrapper\";\nimport { useForm } from \"../hooks/use-form\";\n\ninterface IResetPasswordForm {\n  [nameFields.Code]: string;\n  [nameFields.Password]: string;\n}\n\nexport default function ResetPassword() {\n  const history = useHistory();\n  const [isShowPassword, setIsShowPassword] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const { handleSubmit, handleChange, data, errors } =\n    useForm<IResetPasswordForm>({\n      initialValues: {\n        [nameFields.Code]: \"\",\n        [nameFields.Password]: \"\",\n      },\n      validations: {\n        [nameFields.Code]: requiredValidation,\n        [nameFields.Password]: validations[nameFields.Password],\n      },\n      onSubmit: async () => {\n        if (!isLoading) {\n          setIsLoading(true);\n          try {\n            const result = await getResetPassword(\n              data[nameFields.Password],\n              data[nameFields.Code]\n            );\n\n            setIsLoading(false);\n\n            if (result.success) {\n              history.push(LOGIN_PATH);\n            }\n          } catch (error) {\n            const [errorSuccess, errorMessage] = (error as Error).message.split(\n              \"===\"\n            );\n            alert(errorMessage);\n            console.log(errorSuccess);\n            console.log(error);\n            setIsLoading(false);\n          }\n        }\n      },\n    });\n\n  const handleOnIconClick = () => {\n    setIsShowPassword(!isShowPassword);\n  };\n\n  return (\n    <section className=\"login_container\">\n      <FormWrapper\n        onSubmit={handleSubmit}\n        title=\"Восстановление пароля\"\n        buttonName=\"Сохранить\"\n      >\n        <div className=\"login_input_container\">\n          <Input\n            type={isShowPassword ? \"text\" : \"password\"}\n            placeholder={\"Введите новый пароль\"}\n            onChange={handleChange(nameFields.Password)}\n            icon={isShowPassword ? \"HideIcon\" : \"ShowIcon\"}\n            value={data[nameFields.Password]}\n            name={nameFields.Password}\n            onIconClick={handleOnIconClick}\n            error={!!errors[nameFields.Password]}\n            errorText={errors[nameFields.Password]}\n          />\n        </div>\n        <div className=\"login_input_container\">\n          <Input\n            type={\"text\"}\n            placeholder={\"Введите код из письма\"}\n            onChange={handleChange(nameFields.Code)}\n            value={data[nameFields.Code]}\n            name={nameFields.Code}\n            error={!!errors[nameFields.Code]}\n            errorText={errors[nameFields.Code]}\n          />\n        </div>\n      </FormWrapper>\n      <p className=\"text text_type_main-default\">\n        <span>Вспомнили пароль?</span>\n        <Link to={LOGIN_PATH}>Войти</Link>\n      </p>\n    </section>\n  );\n}\n","import { Variants } from \"framer-motion\";\n\nconst timeAnimation = 0.6;\nexport const variantsNextRouter: Variants = {\n  visible: {\n    opacity: 1,\n    transition: {\n      duration: timeAnimation,\n    },\n  },\n  hidden: { opacity: 0 },\n  exit: {\n    opacity: 0,\n  },\n};\nexport const variantsProfileButton: Variants = {\n  visible: (i) => ({\n    opacity: 1,\n    x: 0,\n    transition: {\n      delay: i * 0.3,\n      duration: 0.5,\n    },\n  }),\n  hidden: { opacity: 0, x: -100 },\n};\n","import {\n  Button,\n  Input\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { getUserFetch, updateUserFetch } from \"../../../services/user-slice\";\nimport { useDispatch, useSelector } from \"../../hooks\";\nimport Loader from \"../../ui/loader/loader\";\nimport { variantsNextRouter } from \"../common/animations-form\";\nimport { nameFields } from \"../common/names-forms\";\nimport { requiredValidation, validations } from \"../common/validate-form\";\nimport FormWrapper from \"../form-wrapper/form-wrapper\";\nimport { useForm } from \"../hooks/use-form\";\nimport styles from \"./profile.module.css\";\n\ninterface IProfileForm {\n  [nameFields.Name]: string;\n  [nameFields.Login]: string;\n  [nameFields.Password]: string;\n}\n\nexport default function Profile() {\n  const dispatch = useDispatch();\n  const [focusedName, setFocusedName] = useState(\"\");\n  const isLoading = useSelector((state) => state.user.isLoading);\n  const user = useSelector((state) => state.user.user);\n  const { handleSubmit, handleChange, setData, data, errors } =\n    useForm<IProfileForm>({\n      initialValues: {\n        [nameFields.Name]: \"\",\n        [nameFields.Password]: \"\",\n        [nameFields.Login]: \"\",\n      },\n      validations: {\n        [nameFields.Name]: requiredValidation,\n        [nameFields.Password]: validations[nameFields.Password],\n        [nameFields.Login]: requiredValidation,\n      },\n      onSubmit: async () => {\n        if (!isLoading) {\n          await dispatch(\n            updateUserFetch({\n              name: data[nameFields.Name],\n              email: data[nameFields.Login],\n              password: data[nameFields.Password],\n            })\n          );\n        }\n      },\n    });\n\n  const handleOnFocus = (e: React.FocusEvent<HTMLInputElement>) => {\n    setFocusedName(e.currentTarget.name);\n  };\n  const handleOnIconClick = (\n    e: React.MouseEvent<HTMLDivElement, MouseEvent>\n  ) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    console.log(e.currentTarget);\n  };\n  const handleOnBlur = () => {\n    setFocusedName(\"\");\n  };\n\n  const handleOnCancellation = (e: React.MouseEvent<HTMLElement>) => {\n    e.preventDefault();\n\n    setData((state) => ({\n      ...state,\n      [nameFields.Name]: user.name,\n      [nameFields.Login]: user.email,\n    }));\n  };\n\n  useEffect(() => {\n    dispatch(getUserFetch());\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (user.name) {\n      setData((state) => ({\n        ...state,\n        [nameFields.Name]: user.name,\n        [nameFields.Login]: user.email,\n      }));\n    }\n  }, [setData, user]);\n\n  return (\n    <motion.section\n      className={`login_container ${styles.motion_container}`}\n      variants={variantsNextRouter}\n      initial=\"hidden\"\n      exit=\"exit\"\n      animate=\"visible\"\n    >\n      <AnimatePresence exitBeforeEnter>\n        {isLoading ? (\n          <Loader />\n        ) : (\n          <motion.div\n            className=\"login_container\"\n            variants={variantsNextRouter}\n            initial=\"hidden\"\n            exit=\"exit\"\n            animate=\"visible\"\n          >\n            <FormWrapper onSubmit={handleSubmit}>\n              <div className=\"login_input_container\">\n                <Input\n                  type={\"text\"}\n                  placeholder={\"Имя\"}\n                  onChange={handleChange(nameFields.Name)}\n                  icon={\n                    focusedName === nameFields.Name ? \"CloseIcon\" : \"EditIcon\"\n                  }\n                  value={data[nameFields.Name]}\n                  name={nameFields.Name}\n                  error={!!errors[nameFields.Name]}\n                  errorText={errors[nameFields.Name]}\n                  onFocus={handleOnFocus}\n                  onBlur={handleOnBlur}\n                  onIconClick={handleOnIconClick}\n                />\n              </div>\n              <div className=\"login_input_container\">\n                <Input\n                  type={\"text\"}\n                  placeholder={\"Логин\"}\n                  onChange={handleChange(nameFields.Login)}\n                  icon={\n                    focusedName === nameFields.Login ? \"CloseIcon\" : \"EditIcon\"\n                  }\n                  value={data[nameFields.Login]}\n                  name={nameFields.Login}\n                  error={!!errors[nameFields.Login]}\n                  errorText={errors[nameFields.Login]}\n                  onFocus={handleOnFocus}\n                  onBlur={handleOnBlur}\n                  onIconClick={handleOnIconClick}\n                />\n              </div>\n              <div className=\"login_input_container\">\n                <Input\n                  type={\"password\"}\n                  placeholder={\"Пароль\"}\n                  onChange={handleChange(nameFields.Password)}\n                  icon={\n                    focusedName === nameFields.Password\n                      ? \"CloseIcon\"\n                      : \"EditIcon\"\n                  }\n                  value={data[nameFields.Password]}\n                  name={nameFields.Password}\n                  error={!!errors[nameFields.Password]}\n                  errorText={errors[nameFields.Password]}\n                  onFocus={handleOnFocus}\n                  onBlur={handleOnBlur}\n                  onIconClick={handleOnIconClick}\n                />\n              </div>\n              <button type=\"submit\" style={{ display: \"none\" }}>\n                Submit\n              </button>\n              <div\n                className={`login_input_container ${styles.buttons_container}`}\n              >\n                <div>\n                  <Link to={\"#\"} onClick={handleOnCancellation}>\n                    Отмена\n                  </Link>\n                </div>\n                <Button type=\"primary\" size=\"medium\">\n                  Сохранить\n                </Button>\n              </div>\n            </FormWrapper>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </motion.section>\n  );\n}\n","import React from \"react\";\n\nimport MainAllLayouts from \"../../layouts/main-all-layouts/main-all-layouts\";\nimport LoginLayoutContainer from \"../../layouts/login-layout-container/login-layout-container\";\nimport { ForgotPasswordForm } from \"../../components/forms\";\n\nexport default function ForgotPasswordPage() {\n  return (\n    <MainAllLayouts>\n      <LoginLayoutContainer>\n        <ForgotPasswordForm/>\n      </LoginLayoutContainer>\n    </MainAllLayouts>\n  );\n}\n","import React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport IngredientDetailsById from \"../../components/ingredient-details-by-id/ingredient-details-by-id\";\nimport MainAllLayouts from \"../../layouts/main-all-layouts/main-all-layouts\";\nimport styles from \"./ingredient-page.module.css\";\n\n\nexport default function IngredientPage() {\n  const { id } = useParams<{ id: string }>();\n\n  return (\n    <MainAllLayouts>\n      <div className={styles.ingredient_page_container}>\n        <h2\n          className={`text text_type_main-large ${styles.ingredient_page_container_header}`}\n        >\n          Детали ингредиента\n        </h2>\n        <IngredientDetailsById id={id} />\n      </div>\n    </MainAllLayouts>\n  );\n}\n","import React from \"react\";\n\nimport MainAllLayouts from \"../../layouts/main-all-layouts/main-all-layouts\";\nimport LoginLayoutContainer from \"../../layouts/login-layout-container/login-layout-container\";\nimport { LoginForm } from \"../../components/forms\";\n\nexport default function LoginPage() {\n  return (\n    <MainAllLayouts>\n      <LoginLayoutContainer>\n        <LoginForm/>\n      </LoginLayoutContainer>\n    </MainAllLayouts>\n  );\n}\n","import React from \"react\";\nimport MainAllLayouts from \"../../layouts/main-all-layouts/main-all-layouts\";\n\nexport default function NotFound404Page() {\n  return (\n    <MainAllLayouts>\n      <h2>Oops!… I Did It Again</h2>\n    </MainAllLayouts>\n  );\n}\n","import { motion } from \"framer-motion\";\nimport React, { useEffect, useState } from \"react\";\nimport ScrollContainer from \"../../layouts/scroll-container/scroll-container\";\nimport { IOrderFeedElementWithIngredients } from \"../../models/order\";\nimport {\n  wsOrderClose,\n  wsOrderConnectionStart\n} from \"../../redux/action-types/ws-action-creators\";\nimport { variantsNextRouter } from \"../forms/common/animations-form\";\nimport { useDispatch, useSelector } from \"../hooks\";\nimport OrderFeedElementsList from \"../order-feed-elements-list/order-feed-elements-list\";\nimport Loader from \"../ui/loader/loader\";\nimport styles from \"./order-feeds-list-animation.module.css\";\n\nconst OrderFeedsListAnimation = () => {\n  const [orderData, setOrderData] = useState<\n    IOrderFeedElementWithIngredients[]\n  >([]);\n  const orderFeed = useSelector((state) => state.order.orderFeed);\n  const ingredients = useSelector((state) => state.ingredients.ingredients);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (ingredients.length > 0) {\n      dispatch(wsOrderConnectionStart());\n    }\n\n    return () => {\n      dispatch(wsOrderClose());\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [ingredients]);\n  useEffect(() => {\n    if (orderFeed) {\n      setOrderData(orderFeed.orders);\n    }\n  }, [orderFeed]);\n\n  return orderData.length > 0 ? (\n    <motion.div\n      className={styles.motion_container}\n      variants={variantsNextRouter}\n      initial=\"hidden\"\n      exit=\"exit\"\n      animate=\"visible\"\n    >\n      <section className={styles.main_Container}>\n        <ScrollContainer style={{ height: \"100%\" }}>\n          <OrderFeedElementsList\n            orderFeedListElement={orderData}\n            showStatus={true}\n          />\n        </ScrollContainer>\n      </section>\n    </motion.div>\n  ) : (\n    <Loader />\n  );\n};\n\nexport default OrderFeedsListAnimation;\n","import { AnimatePresence } from \"framer-motion\";\nimport React from \"react\";\nimport { Switch, useLocation, useRouteMatch } from \"react-router\";\nimport { Route } from \"react-router-dom\";\nimport { ProfileForm } from \"../components/forms\";\nimport OrderFeedsListAnimation from \"../components/order-feeds-list-animation/order-feeds-list-animation\";\nimport { ORDERS_PATH } from \"./constants-path\";\n\nexport default function ProfilePageRoutes() {\n  const location = useLocation();\n  const { path } = useRouteMatch();\n\n  return (\n    <AnimatePresence exitBeforeEnter>\n      <Switch location={location} key={location.key}>\n        <Route exact path={path}>\n          <ProfileForm />\n        </Route>\n        <Route path={`${path}${ORDERS_PATH}`}>\n          <OrderFeedsListAnimation />\n        </Route>\n      </Switch>\n    </AnimatePresence>\n  );\n}\n","import { motion } from \"framer-motion\";\nimport React from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { variantsProfileButton } from \"../../components/forms/common/animations-form\";\nimport { useDispatch } from \"../../components/hooks\";\nimport MainAllLayouts from \"../../layouts/main-all-layouts/main-all-layouts\";\nimport { ORDERS_PATH, PROFILE_PATH } from \"../../routes/constants-path\";\nimport ProfilePageRoutes from \"../../routes/profile-page-routes\";\nimport { getLogoutFetch } from \"../../services/user-slice\";\nimport styles from \"./profile-page.module.css\";\n\nconst ORDER_HISTORY_PATH = PROFILE_PATH + ORDERS_PATH;\n\nexport default function ProfilePage() {\n  const dispatch = useDispatch();\n  const { pathname } = useLocation();\n  const handleOnClickLogOut = async (\n    event: React.MouseEvent<HTMLAnchorElement, MouseEvent>\n  ) => {\n    event.stopPropagation();\n    event.preventDefault();\n\n    dispatch(getLogoutFetch());\n  };\n\n  return (\n    <MainAllLayouts>\n      <section className={styles.profile_page_container}>\n        <ul className={styles.profile_page_container_menu}>\n          <motion.li\n            className=\"text text_type_main-medium\"\n            variants={variantsProfileButton}\n            initial=\"hidden\"\n            animate=\"visible\"\n            custom={0}\n          >\n            <Link\n              to={PROFILE_PATH}\n              className={`${styles.menu_link} ${\n                pathname === PROFILE_PATH ? styles.active : \"\"\n              }`}\n            >\n              Профиль\n            </Link>\n          </motion.li>\n          <motion.li\n            className=\"text text_type_main-medium\"\n            variants={variantsProfileButton}\n            initial=\"hidden\"\n            animate=\"visible\"\n            custom={1}\n          >\n            <Link\n              to={ORDER_HISTORY_PATH}\n              className={`${styles.menu_link} ${\n                pathname === ORDER_HISTORY_PATH ? styles.active : \"\"\n              }`}\n            >\n              История заказов\n            </Link>\n          </motion.li>\n          <motion.li\n            className=\"text text_type_main-medium\"\n            variants={variantsProfileButton}\n            initial=\"hidden\"\n            animate=\"visible\"\n            custom={2}\n          >\n            <Link\n              to={`#`}\n              className={styles.menu_link}\n              onClick={handleOnClickLogOut}\n            >\n              Выход\n            </Link>\n          </motion.li>\n\n          <li className=\"text text_type_main-default\">\n            <p>\n              <span>\n                В этом разделе вы можете\n                <br /> изменить свои персональные данные\n              </span>\n            </p>\n          </li>\n        </ul>\n        <ProfilePageRoutes />\n      </section>\n    </MainAllLayouts>\n  );\n}\n","import React from \"react\";\n\nimport MainAllLayouts from \"../../layouts/main-all-layouts/main-all-layouts\";\nimport LoginLayoutContainer from \"../../layouts/login-layout-container/login-layout-container\";\nimport { RegisterForm } from \"../../components/forms\";\n\nexport default function RegisterPage() {\n  return (\n    <MainAllLayouts>\n      <LoginLayoutContainer>\n        <RegisterForm/>\n      </LoginLayoutContainer>\n    </MainAllLayouts>\n  );\n}\n","import React from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { ResetPasswordForm } from \"../../components/forms\";\nimport LoginLayoutContainer from \"../../layouts/login-layout-container/login-layout-container\";\nimport MainAllLayouts from \"../../layouts/main-all-layouts/main-all-layouts\";\nimport { ILocationState } from \"../../models/routes\";\nimport { FORGOT_PASSWORD_PATH } from \"../../routes/constants-path\";\n\n\nexport default function ResetPasswordPage() {\n  const location = useLocation<ILocationState>();\n  const history = useHistory();\n\n  if (\n    !(\n      location.state &&\n      location.state.prevPath &&\n      location.state.prevPath === FORGOT_PASSWORD_PATH\n    )\n  ) {\n    history.push(FORGOT_PASSWORD_PATH);\n  }\n\n  return (\n    <MainAllLayouts>\n      <LoginLayoutContainer>\n        <ResetPasswordForm />\n      </LoginLayoutContainer>\n    </MainAllLayouts>\n  );\n}\n","import React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport OrderById from \"../../components/order-by-id/order-by-id\";\nimport MainAllLayouts from \"../../layouts/main-all-layouts/main-all-layouts\";\n\nconst OrderByIdPage = () => {\n    const { id } = useParams<{ id: string }>();\n    \n  return (\n    <MainAllLayouts>\n      <OrderById id={id}/>\n    </MainAllLayouts>\n  );\n};\n\nexport default OrderByIdPage;\n","import React, { useEffect, useState } from \"react\";\nimport { Redirect, Route, RouteProps } from \"react-router-dom\";\nimport { useSelector } from \"../../components/hooks\";\nimport { MAIN_PATH } from \"../constants-path\";\n\ninterface IProps extends RouteProps {\n  children: React.ReactChild;\n}\n\ninterface ILocalState {\n  state: { from: string };\n}\n\nexport default function ProtectedFromAuthorizedRoute({\n  children,\n  ...rest\n}: IProps) {\n  const refreshToken = useSelector((state) => state.user.refreshToken);\n  const [isUserAuthorized, setIsUserAuthorized] = useState(!!refreshToken);\n\n  useEffect(() => {\n    setIsUserAuthorized(!!refreshToken);\n  }, [refreshToken]);\n\n  return (\n    <Route\n      {...rest}\n      render={({ location }) => {\n        return !isUserAuthorized ? (\n          children\n        ) : (\n          <Redirect\n            to={{\n              pathname:\n                ((location as ILocalState).state &&\n                  (location as ILocalState).state.from) ||\n                MAIN_PATH,\n              state: {},\n            }}\n          />\n        );\n      }}\n    />\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport { Redirect, Route, RouteProps } from \"react-router-dom\";\nimport { useSelector } from \"../../components/hooks\";\nimport { LOGIN_PATH } from \"../constants-path\";\n\ninterface IProps extends RouteProps {\n  children: React.ReactChild;\n  redirectTo?: string;\n  protectionFromAuthorized?: boolean;\n}\n\ninterface ILocalState {\n  state: { from: string };\n}\n\nexport default function ProtectedRoute({\n  children,\n  redirectTo = LOGIN_PATH,\n  ...rest\n}: IProps) {\n  const refreshToken = useSelector((state) => state.user.refreshToken);\n  const [isUserAuthorized, setIsUserAuthorized] = useState(!!refreshToken);\n\n  useEffect(() => {\n    setIsUserAuthorized(!!refreshToken);\n  }, [refreshToken]);\n\n  return (\n    <Route\n      {...rest}\n      render={({ location }) => {\n        const localState = (location as ILocalState).state || {};\n\n        return isUserAuthorized ? (\n          children\n        ) : (\n          <Redirect\n            to={{\n              pathname: redirectTo,\n              state: { ...localState, from: location.pathname },\n            }}\n          />\n        );\n      }}\n    />\n  );\n}\n","import React, { useEffect, useMemo } from \"react\";\nimport { Route, Switch, useHistory, useLocation } from \"react-router-dom\";\nimport ErrorMessage from \"../components/common/error-message/error-message\";\nimport DetailsModal from \"../components/details-modal/details-modal\";\nimport { useDispatch, useSelector } from \"../components/hooks\";\nimport IngredientDetailsById from \"../components/ingredient-details-by-id/ingredient-details-by-id\";\nimport OrderById from \"../components/order-by-id/order-by-id\";\nimport MainAllLayouts from \"../layouts/main-all-layouts/main-all-layouts\";\nimport { ILocationState } from \"../models/routes\";\nimport {\n  BurgerFactoryPage,\n  FeedPage,\n  ForgotPasswordPage,\n  IngredientPage,\n  LoginPage,\n  NotFound404Page,\n  ProfilePage,\n  RegisterPage,\n  ResetPasswordPage\n} from \"../pages\";\nimport OrderByIdPage from \"../pages/order-by-id-page/order-by-id-page\";\nimport { setAppError } from \"../services/app-slice\";\nimport {\n  FEED_PATH,\n  FORGOT_PASSWORD_PATH,\n  INGREDIENTS_PATH,\n  LOGIN_PATH,\n  MAIN_PATH,\n  ORDERS_PATH,\n  PROFILE_PATH,\n  REGISTER_PATH,\n  RESET_PASSWORD_PATH\n} from \"./constants-path\";\nimport ProtectedFromAuthorizedRoute from \"./protected-from-authorized-route/protected-from-authorized-route\";\nimport ProtectedRoute from \"./protected-route/protected-route\";\n\nexport default function Routes() {\n  const location = useLocation<ILocationState>();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const error = useSelector((state) => state.app.error);\n  const background = useMemo(\n    () => location.state && location.state.background,\n    [location.state]\n  );\n\n  useEffect(() => {\n    dispatch(setAppError(null));\n  }, [dispatch, location.pathname]);\n\n  const isPushAction = useMemo(\n    () => history.action === \"PUSH\",\n    [history.action]\n  );\n\n  const isModalIngredientBackgroundLocation = useMemo(\n    () => (isPushAction && background ? background : location),\n    [background, isPushAction, location]\n  );\n  return (\n    <>\n      {error ? (\n        <MainAllLayouts>\n          <ErrorMessage error={error} />\n        </MainAllLayouts>\n      ) : (\n        <>\n          <Switch location={isModalIngredientBackgroundLocation}>\n            <Route path={MAIN_PATH} exact>\n              <BurgerFactoryPage />\n            </Route>\n            <Route path={`${FEED_PATH}/:id`}>\n              <OrderByIdPage />\n            </Route>\n            <Route path={FEED_PATH} exact>\n              <FeedPage />\n            </Route>\n            <ProtectedFromAuthorizedRoute path={LOGIN_PATH}>\n              <LoginPage />\n            </ProtectedFromAuthorizedRoute>\n            <ProtectedFromAuthorizedRoute path={REGISTER_PATH}>\n              <RegisterPage />\n            </ProtectedFromAuthorizedRoute>\n            <ProtectedFromAuthorizedRoute path={FORGOT_PASSWORD_PATH}>\n              <ForgotPasswordPage />\n            </ProtectedFromAuthorizedRoute>\n            <ProtectedFromAuthorizedRoute path={RESET_PASSWORD_PATH}>\n              <ResetPasswordPage />\n            </ProtectedFromAuthorizedRoute>\n            <ProtectedRoute path={`${PROFILE_PATH}${ORDERS_PATH}/:id`}>\n              <OrderByIdPage />\n            </ProtectedRoute>\n            <ProtectedRoute path={PROFILE_PATH}>\n              <ProfilePage />\n            </ProtectedRoute>\n            <Route path={`${INGREDIENTS_PATH}/:id`}>\n              <IngredientPage />\n            </Route>\n            <Route path={INGREDIENTS_PATH} exact>\n              <BurgerFactoryPage />\n            </Route>\n            <Route>\n              <NotFound404Page />\n            </Route>\n          </Switch>\n          {background && isPushAction && (\n            <>\n              <Route\n                path={`${PROFILE_PATH}${ORDERS_PATH}/:id`}\n                children={\n                  <DetailsModal>\n                    <OrderById id={\"\"} isShowTitle={false} />\n                  </DetailsModal>\n                }\n              />\n              <Route\n                path={`${FEED_PATH}/:id`}\n                children={\n                  <DetailsModal>\n                    <OrderById id={\"\"} isShowTitle={false} />\n                  </DetailsModal>\n                }\n              />\n              <Route\n                path={`${INGREDIENTS_PATH}/:id`}\n                children={\n                  <DetailsModal title={\"Детали ингредиента\"}>\n                    <IngredientDetailsById id={\"\"} />\n                  </DetailsModal>\n                }\n              />\n            </>\n          )}\n        </>\n      )}\n    </>\n  );\n}\n","import React, { useEffect, useMemo, useState } from \"react\";\nimport { NavLink, useLocation } from \"react-router-dom\";\n\nimport styles from \"./menu-button.module.css\";\n\ntype TType = \"primary\" | \"secondary\";\n\ninterface IIconProps {\n  type: TType;\n}\n\ninterface IProps {\n  Icon?: React.ComponentType<IIconProps>;\n  link: string;\n  children: React.ReactChild;\n  entry?: boolean;\n}\n\nexport default function MenuButton({\n  Icon,\n  link,\n  children,\n  entry = false,\n}: IProps) {\n  const location = useLocation();\n  const [isSelected, setIsSelected] = useState(false);\n  const [isDisplayed, setIsDisplayed] = useState(false);\n  const classType = isDisplayed ? \"text_color_primary\" : \"text_color_inactive\";\n  const type: TType = isDisplayed ? \"primary\" : \"secondary\";\n\n  const criterion: boolean = useMemo(\n    () =>\n      entry ? location.pathname.indexOf(link) >= 0 : location.pathname === link,\n    [entry, link, location.pathname]\n  );\n\n  useEffect(() => {\n    setIsSelected(criterion);\n  }, [criterion]);\n\n  useEffect(() => {\n    if (isSelected) {\n      setIsDisplayed(true);\n    } else {\n      setIsDisplayed(false);\n    }\n  }, [isSelected]);\n\n  return (\n    <NavLink\n      to={{ pathname: link }}\n      className={`p-4 pl-5 pr-5 ${classType} ${styles.menu_button}`}\n      onMouseEnter={() => setIsDisplayed(true)}\n      onMouseLeave={() => setIsDisplayed(isSelected)}\n    >\n      {Icon ? <Icon type={type} /> : null}\n      {children}\n    </NavLink>\n  );\n}\n","import {\n  BurgerIcon,\n  ListIcon\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport React from \"react\";\nimport { FEED_PATH } from \"../../../routes/constants-path\";\nimport MenuButton from \"../menu-button/menu-button\";\nimport styles from \"./left-menu.module.css\";\n\nexport default function LeftMenu() {\n  return (\n    <menu className={`text text_type_main-default ${styles.left_menu}`}>\n      <MenuButton Icon={BurgerIcon} link=\"/\">\n        <span>Конструктор</span>\n      </MenuButton>\n      <MenuButton Icon={ListIcon} link={FEED_PATH}>\n        <span>Лента заказов</span>\n      </MenuButton>\n    </menu>\n  );\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Logo } from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport styles from \"./logo-link.module.css\";\nimport { MAIN_PATH } from \"../../../routes/constants-path\";\n\nconst LogoLink = () => {\n  return (\n    <Link className={`pt-6 pb-6 ${styles.logo_link}`} to={MAIN_PATH}>\n      <Logo />\n    </Link>\n  );\n};\n\nexport default LogoLink;\n","import { ProfileIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport React from \"react\";\nimport { ORDERS_PATH, PROFILE_PATH } from \"../../../routes/constants-path\";\nimport MenuButton from \"../menu-button/menu-button\";\n\n\nexport default function RightMenu() {\n  return (\n    <MenuButton Icon={ProfileIcon} link={`${PROFILE_PATH}${ORDERS_PATH}`} entry={true}>\n      <span>Личный кабинет</span>\n    </MenuButton>\n  );\n}\n","import React from 'react';\n\nimport styles from './app-header.module.css';\nimport LeftMenu from './left-menu/left-menu';\nimport LogoLink from '../ui/logo-link/logo-link';\nimport RightMenu from './right-menu/right-menu';\n\nexport default function AppHeader() {\n  return (\n    <nav className={styles.app_header}>\n      <div className={styles.content_left}>\n        <LeftMenu />\n      </div>\n      <div className={styles.content_center}>\n        <LogoLink />\n      </div>\n      <div className={styles.content_right}>\n        <RightMenu />\n      </div>\n    </nav>\n  );\n}\n","import React, { Component, ErrorInfo } from 'react';\n\ninterface Props {}\n\ninterface State {\n  hasError: boolean;\n}\n\nexport default class ErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error: Error) {\n    console.log('getDerivedStateFromError', error);\n\n    return { hasError: true };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.log('Возникла ошибка!', error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <section>\n          <h1>Что-то пошло не так :(</h1>\n          <p>\n            В приложении произошла ошибка. Пожалуйста, перезагрузите страницу.\n          </p>\n        </section>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n","import \"@ya.praktikum/react-developer-burger-ui-components/dist/ui/box.css\";\nimport \"@ya.praktikum/react-developer-burger-ui-components/dist/ui/common.css\";\nimport React, { useEffect } from \"react\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport Header from \"../../layouts/header/header\";\nimport MainAllLayouts from \"../../layouts/main-all-layouts/main-all-layouts\";\nimport RoutesRoot from \"../../routes/routes\";\nimport { getIngredientFetch } from \"../../services/ingredients-slice\";\nimport \"../../styles/main.css\";\nimport AppHeader from \"../app-header/app-header\";\nimport ErrorBoundary from \"../common/error-boundary/error-boundary\";\nimport { useDispatch, useSelector } from \"../hooks\";\nimport Loader from \"../ui/loader/loader\";\n\nfunction App() {\n  const isLoading = useSelector((state) => state.app.isLoading);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(getIngredientFetch());\n  }, [dispatch]);\n\n  return (\n    <div className=\"App\">\n      <ErrorBoundary>\n        <Router>\n          <Header>\n            <AppHeader />\n          </Header>\n\n          {isLoading ? (\n            <MainAllLayouts>\n              <Loader />\n            </MainAllLayouts>\n          ) : (\n            <RoutesRoot />\n          )}\n        </Router>\n      </ErrorBoundary>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","class WS {\n  private static _instance: WS;\n  private sockets: { [key: string]: WebSocket } = {};\n\n  private constructor() {}\n\n  public static getInstance(): WS {\n    if (!WS._instance) {\n      WS._instance = new WS();\n    }\n    return WS._instance;\n  }\n\n  public addSocket(name: string, url: string) {\n    if (!(name in this.sockets)) {\n      this.sockets[name] = new WebSocket(url);\n    }\n  }\n\n  public closeSocket(name: string) {\n    if (name in this.sockets) {\n      this.sockets[name].close(1000, \"работа закончена\");\n\n      delete this.sockets[name];\n    }\n  }\n\n  public getSocket(name: string) {\n    if (name in this.sockets) {\n      return this.sockets[name];\n    }\n  }\n}\nexport default WS;\n","import { AnyAction } from \"@reduxjs/toolkit\";\nimport { Api } from \"../../api/api\";\nimport { getRefreshToken } from \"../../api/auth\";\nimport WS from \"../../api/ws\";\nimport { IIngredientsItem } from \"../../models/ingredients\";\nimport {\n  IOrderFeedElement,\n  IOrderFeedElementWithIngredients,\n  IOrdersFeed,\n  IOrdersFeedFetch,\n  IOrdersFeedWithIngredients\n} from \"../../models/order\";\n\nconst api = Api.getInstance();\n\nexport type TWsWorker = {\n  wsUrl: string;\n  wsName: string;\n  ingredients: IIngredientsItem[];\n  onMessageCallBack: (orderFeed: IOrdersFeedWithIngredients) => void;\n  action: AnyAction;\n  typeWsStart: string;\n  protect?: boolean;\n  typeWsSend?: string;\n  typeWsClose?: string;\n  isInvertReturnedIngredients?: boolean;\n  wsStartCallBack?: () => void;\n};\n\nconst sockets = WS.getInstance();\n\nexport const wsWorker = async <T extends IOrdersFeedFetch>({\n  wsUrl,\n  wsName,\n  ingredients,\n  onMessageCallBack,\n  action,\n  typeWsStart,\n  protect = false,\n  typeWsSend,\n  typeWsClose,\n  isInvertReturnedIngredients = false,\n  wsStartCallBack,\n}: TWsWorker) => {\n  const { type, payload } = action;\n\n  if (type === typeWsStart) {\n    if (wsStartCallBack) {\n      wsStartCallBack();\n    }\n    if (protect) {\n      try {\n        await getRefreshToken();\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    if (api.isLoadingRefreshToken) {\n      await api.waitFor(\n        () => api.isLoadingRefreshToken,\n        () =>\n          sockets.addSocket(\n            wsName,\n            `${wsUrl}${protect ? `?token=${api.token}` : \"\"}`\n          )\n      );\n    } else {\n      sockets.addSocket(\n        wsName,\n        `${wsUrl}${protect ? `?token=${api.token}` : \"\"}`\n      );\n    }\n  }\n\n  if (sockets.getSocket(wsName)) {\n    const socketItem = sockets.getSocket(wsName);\n    socketItem!.onopen = (event) => {\n      console.log(`${wsName}:SUCCESS`, event);\n    };\n    socketItem!.onerror = (event) => {\n      console.log(`${wsName}:ERROR`, event);\n    };\n    socketItem!.onmessage = (event) => {\n      getOnMessage<T>(\n        event,\n        socketItem!,\n        ingredients,\n        onMessageCallBack,\n        isInvertReturnedIngredients\n      );\n    };\n    socketItem!.onclose = (event) => {\n      console.log(`${wsName}:CLOSE`, event);\n    };\n\n    if (typeWsSend && type === typeWsSend) {\n      const message = payload;\n      socketItem!.send(JSON.stringify(message));\n    }\n    if (typeWsClose && type === typeWsClose) {\n      sockets.closeSocket(wsName);\n    }\n  }\n};\n\nconst getOnMessage = <T extends IOrdersFeedFetch>(\n  event: MessageEvent,\n  socket: WebSocket,\n  ingredients: IIngredientsItem[],\n  callBack: (orderFeed: IOrdersFeedWithIngredients) => void,\n  isReverse: boolean = false\n) => {\n  if (event.data === \"ping\") {\n    socket.send(\"pong\");\n  }\n  const { data } = event;\n  const parsedData = JSON.parse(data) as T;\n  if (parsedData.success) {\n    const orderFeed = addIngredientsToFeed(parsedData, ingredients, isReverse);\n\n    callBack(orderFeed);\n  }\n};\n\nconst addIngredientsToFeed = (\n  ordersFeed: IOrdersFeed,\n  ingredients: IIngredientsItem[],\n  isReverse: boolean = false\n): IOrdersFeedWithIngredients => {\n  const newOrders = ordersFeed.orders.reduce<\n    IOrderFeedElementWithIngredients[]\n  >(getOrdersWithIngredients(ingredients), []);\n\n  if (isReverse) {\n    newOrders.reverse();\n  }\n\n  return { ...ordersFeed, orders: newOrders };\n};\n\nconst getOrdersWithIngredients =\n  (ingredients: IIngredientsItem[]) =>\n  (\n    returnOrdersObj: IOrderFeedElementWithIngredients[],\n    orderFeedItem: IOrderFeedElement\n  ): IOrderFeedElementWithIngredients[] => {\n    const newIngredients = getIngredientsById(orderFeedItem, ingredients);\n\n    const newOrderFeed: IOrderFeedElementWithIngredients = {\n      ...orderFeedItem,\n      ingredients: [...newIngredients],\n    };\n    returnOrdersObj.push(newOrderFeed);\n\n    return returnOrdersObj;\n  };\n\nconst getIngredientsById = (\n  orderFeedItem: IOrderFeedElement,\n  ingredients: IIngredientsItem[]\n) => {\n  const newIngredients: IIngredientsItem[] = [];\n\n  orderFeedItem.ingredients.forEach((ingredientId) => {\n    const newIngredientElement = findIngredientItemById(\n      ingredients,\n      ingredientId\n    );\n\n    if (newIngredientElement) {\n      newIngredients.push({ ...newIngredientElement });\n    }\n  });\n\n  return newIngredients;\n};\n\nconst findIngredientItemById = (\n  ingredients: IIngredientsItem[],\n  ingredientId: string\n) => {\n  return ingredients.find((ingredient) => ingredient._id === ingredientId);\n};\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { ICurrentIngredientState } from '../models/app-store';\nimport { IIngredientsItem } from '../models/ingredients';\n\nconst initialState: ICurrentIngredientState = {\n  currentIngredient: null,\n};\n\nconst currentIngredientSlice = createSlice({\n  name: 'currentIngredient',\n  initialState,\n  reducers: {\n    setCurrentIngredient(\n      state,\n      action: PayloadAction<IIngredientsItem | null>\n    ) {\n      state.currentIngredient = action.payload;\n    },\n  },\n});\n\nexport default currentIngredientSlice.reducer;\n\nexport const { setCurrentIngredient } = currentIngredientSlice.actions;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport { socketMiddleware } from \"../redux/middleware/socket-middleware\";\nimport appReducer from \"./app-slice\";\nimport constructorIngredientsReducer from \"./constructor-ingredients-slice\";\nimport currentIngredientReducer from \"./current-ingredient-slice\";\nimport ingredientReducer from \"./ingredients-slice\";\nimport orderReducer from \"./order-slice\";\nimport userReducer from \"./user-slice\";\n\nconst store = configureStore({\n  reducer: {\n    app: appReducer,\n    ingredients: ingredientReducer,\n    currentIngredient: currentIngredientReducer,\n    constructorIngredients: constructorIngredientsReducer,\n    order: orderReducer,\n    user: userReducer,\n  },\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      serializableCheck: false,\n    })\n      .prepend(socketMiddleware())\n      .concat(),\n  devTools: process.env.NODE_ENV !== \"production\",\n});\nexport type TRootState = ReturnType<typeof store.getState>;\nexport type TAppDispatch = typeof store.dispatch;\n\nexport default store;\n","import { AnyAction, Middleware, MiddlewareAPI } from \"redux\";\nimport { IOrdersFeedWithIngredients } from \"../../models/order\";\nimport { setOrderFeed, setOrderFeedAll } from \"../../services/order-slice\";\nimport { TAppDispatch, TRootState } from \"../../services/store\";\nimport {\n  WS_ORDER_ALL_CLOSE,\n  WS_ORDER_ALL_CONNECTION_START,\n  WS_ORDER_ALL_SEND_MESSAGE,\n  WS_ORDER_CLOSE,\n  WS_ORDER_CONNECTION_START,\n  WS_ORDER_SEND_MESSAGE\n} from \"../action-types/ws-action-types\";\nimport { wsWorker } from \"./ws-worker\";\n\nexport const socketMiddleware = (): Middleware<{}> => {\n  return (store: MiddlewareAPI<TAppDispatch, TRootState>) => {\n    return (next: TAppDispatch) =>\n      async <A extends AnyAction>(action: A) => {\n        const { dispatch, getState } = store;\n        const ingredients = getState().ingredients.ingredients;\n\n        await wsWorker({\n          typeWsStart: WS_ORDER_ALL_CONNECTION_START,\n          wsUrl: \"wss://norma.nomoreparties.space/orders/all\",\n          wsName: \"orders_all\",\n          action,\n          ingredients,\n          onMessageCallBack: (orderFeed: IOrdersFeedWithIngredients) => {\n            dispatch(setOrderFeedAll(orderFeed));\n          },\n          typeWsSend: WS_ORDER_ALL_SEND_MESSAGE,\n          typeWsClose: WS_ORDER_ALL_CLOSE,\n        });\n\n        wsWorker({\n          typeWsStart: WS_ORDER_CONNECTION_START,\n          wsUrl: `wss://norma.nomoreparties.space/orders`,\n          wsName: \"orders\",\n          action,\n          protect: true,\n          ingredients,\n          onMessageCallBack: (orderFeed: IOrdersFeedWithIngredients) => {\n            dispatch(setOrderFeed(orderFeed));\n          },\n          typeWsSend: WS_ORDER_SEND_MESSAGE,\n          typeWsClose: WS_ORDER_CLOSE,\n          isInvertReturnedIngredients: true,\n        });\n\n        next(action);\n      };\n  };\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { Api } from './api/api';\n\nimport App from './components/app/app';\nimport './index.css';\nimport reportWebVitals from './reportWebVitals';\nimport store from './services/store';\n\nApi.getInstance();\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main_container\":\"order-by-id_main_container__1L5zx\",\"flex_container\":\"order-by-id_flex_container__2cges\",\"flex_container_pt\":\"order-by-id_flex_container_pt__39uo0\",\"flex_container_pt_min\":\"order-by-id_flex_container_pt_min__3CTq0\",\"id\":\"order-by-id_id__tquym\",\"status\":\"order-by-id_status__21yaD\",\"done_status\":\"order-by-id_done_status__2-sWC\",\"canceled_status\":\"order-by-id_canceled_status__oQktY\",\"prepared_status\":\"order-by-id_prepared_status__3-2hv\",\"h3\":\"order-by-id_h3__3qQKz\",\"bottom_container\":\"order-by-id_bottom_container__1Z6nP\",\"date\":\"order-by-id_date__2VRyv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main_container\":\"order-feed-element_main_container__3-YhC\",\"done_status\":\"order-feed-element_done_status__1S_TY\",\"canceled_status\":\"order-feed-element_canceled_status__2-cVL\",\"prepared_status\":\"order-feed-element_prepared_status__EFheo\",\"top_container\":\"order-feed-element_top_container__1pwwm\",\"data\":\"order-feed-element_data__1XDBI\",\"bottom_container\":\"order-feed-element_bottom_container__3tRxl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile_page_container\":\"profile-page_profile_page_container__1IBPX\",\"profile_page_container_menu\":\"profile-page_profile_page_container_menu__2pBCf\",\"menu_link\":\"profile-page_menu_link__2MW6G\",\"active\":\"profile-page_active__2DIiL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burger_constructor\":\"burger-constructor_burger_constructor__1f-2q\",\"burger_constructor_body\":\"burger-constructor_burger_constructor_body__2a7KL\",\"burger_list_container\":\"burger-constructor_burger_list_container__2SiWG\",\"burger_list_container_target_illumination\":\"burger-constructor_burger_list_container_target_illumination__3h44O\",\"burger_list_container_over_illumination\":\"burger-constructor_burger_list_container_over_illumination__1tBRx\",\"burger_list_scroll\":\"burger-constructor_burger_list_scroll__2crCp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient_card\":\"ingredient-card_ingredient_card__1Xi-l\",\"ingredient_count\":\"ingredient-card_ingredient_count__1h3g6\",\"ingredient_image\":\"ingredient-card_ingredient_image__3uGdZ\",\"ingredient_price_container\":\"ingredient-card_ingredient_price_container__1GqdR\",\"ingredient_price_icon\":\"ingredient-card_ingredient_price_icon__2enUI\",\"ingredient_name\":\"ingredient-card_ingredient_name__UIQI7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"status_table\":\"statistics_status_table__z9vm_\",\"ready\":\"statistics_ready__bJP2Q\",\"completed_block\":\"statistics_completed_block__1TaUh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader_container\":\"loader_loader_container__1dRZ-\",\"loader1\":\"loader_loader1__BdH45\",\"loader2\":\"loader_loader2__GDz9v\",\"loader3\":\"loader_loader3__2TV8R\",\"loader4\":\"loader_loader4__3RvgU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order_details\":\"order-details_order_details__220Tz\",\"order_icon\":\"order-details_order_icon__4KJmo\",\"status_text\":\"order-details_status_text__3BFCI\",\"bottom_text\":\"order-details_bottom_text__2l6Jv\"};"],"sourceRoot":""}