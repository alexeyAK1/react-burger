(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{103:function(e,t,n){e.exports={ingredient_details:"ingredient-details_ingredient_details__2GSfO",ingredient_image:"ingredient-details_ingredient_image__3TLI6",ingredient_name:"ingredient-details_ingredient_name__aF9DM",ingredient_info:"ingredient-details_ingredient_info__1p1kk"}},104:function(e,t,n){e.exports={burger_constructor_footer:"order_burger_constructor_footer__2djmF",total_container:"order_total_container__9GsVo",total_icon:"order_total_icon__1hMSs",alert:"order_alert__1efB1"}},105:function(e,t,n){e.exports={main_container:"row-round-pictures_main_container__1V1Pk",images_container:"row-round-pictures_images_container__aC0A_",image_container:"row-round-pictures_image_container__1dZ6i",another:"row-round-pictures_another__3_c7K"}},106:function(e,t,n){e.exports={app_header:"app-header_app_header__3cMSX",content_left:"app-header_content_left__24QsZ",content_center:"app-header_content_center__B09a9",content_right:"app-header_content_right__3LTwF"}},126:function(e,t,n){e.exports={modal_header:"modal-header_modal_header__18CMb",modal_header_content:"modal-header_modal_header_content__2rY_M",modal_header_close_button:"modal-header_modal_header_close_button__fV9dQ"}},128:function(e,t,n){e.exports={ingredient_item:"ingredient-item_ingredient_item__9F5j_",drag_container:"ingredient-item_drag_container__CkH1U",item_container:"ingredient-item_item_container__gKfrA",item_container_top:"ingredient-item_item_container_top__1aJUh",item_container_bottom:"ingredient-item_item_container_bottom__3R30-",item_image:"ingredient-item_item_image__2ICYJ",item_name:"ingredient-item_item_name__2Y121",item_price_container:"ingredient-item_item_price_container__3MhfW",item_price_icon:"ingredient-item_item_price_icon__B4Mmn",item_delete:"ingredient-item_item_delete__6oPoq"}},148:function(e,t,n){e.exports={header:"header_header__1Vgpf",content:"header_content__2YGX-"}},149:function(e,t,n){e.exports={main:"main_main__47lCi",content:"main_content__2SJC3"}},150:function(e,t,n){e.exports={modal_overlay:"modal-overlay_modal_overlay__3h6D4",modal_overlay_animate:"modal-overlay_modal_overlay_animate__2tOOj"}},151:function(e,t,n){e.exports={modal:"modal_modal__2Wqgo",modal_body:"modal_modal_body__3XfOG"}},156:function(e,t,n){e.exports={scroll_container:"scroll-container_scroll_container__3Q2bs",scroll_container_inner:"scroll-container_scroll_container_inner__3qpwq"}},157:function(e,t,n){e.exports={main_container:"order-by-id-ingredient_main_container__M3803",name:"order-by-id-ingredient_name__25TO4"}},160:function(e,t,n){e.exports={main_container:"order-feed_main_container__28JcQ",gap60:"order-feed_gap60__9qU0U"}},161:function(e,t,n){e.exports={motion_container:"profile_motion_container__3Z2CF",buttons_container:"profile_buttons_container__yd5_V"}},162:function(e,t,n){e.exports={ingredient_page_container:"ingredient-page_ingredient_page_container__1fQp8",ingredient_page_container_header:"ingredient-page_ingredient_page_container_header__1fSBN"}},163:function(e,t,n){e.exports={motion_container:"order-feeds-list-animation_motion_container__2UEQY",main_Container:"order-feeds-list-animation_main_Container__3xeKx"}},190:function(e,t,n){e.exports={main_maximum_height:"main-maximum-height_main_maximum_height__2U_1E"}},192:function(e,t,n){e.exports={price:"price_price__3cAIW"}},193:function(e,t,n){e.exports={image:"round-picture_image__1sAEk"}},194:function(e,t,n){e.exports={two_columns:"two-columns_two_columns__1Xp2P"}},196:function(e,t,n){e.exports={category_ingredients_container:"ingredients-list_category_ingredients_container__vbNg7"}},198:function(e,t,n){e.exports={tabs_container:"tab-nav-by-category_tabs_container__1dfO9"}},199:function(e,t,n){e.exports={login_layout_container:"login-layout-container_login_layout_container__3D0AD"}},200:function(e,t,n){e.exports={menu_button:"menu-button_menu_button__1xYFf"}},201:function(e,t,n){e.exports={left_menu:"left-menu_left_menu__-h5qy"}},202:function(e,t,n){e.exports={logo_link:"logo-link_logo_link__1wEeb"}},293:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(77),i=n.n(c),s=n(101),o=n(3),u=n.n(o),l=n(7),d=n(78),j=n(79),b=n(10),h=n(37),p=n.n(h),f=n(186),m=n.n(f),_=n(187),O=n.n(_),x=n(188),g=n.n(x),v=n(189),y=n.n(v);n(216),p.a.extend(g.a),p.a.extend(m.a),p.a.extend(O.a),p.a.extend(y.a),p.a.locale("ru");var k;function N(e,t,n){(n=Object(b.a)({path:"/"},n)).expires instanceof Date&&(n.expires=n.expires.toUTCString());var r=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var a in n){r+="; "+a;var c=n[a];!0!==c&&(r+="="+c)}document.cookie=r}function w(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function S(e){var t=function(e){var t=p()(e).format("YYYY-MM-DD");return p()(t).isToday()?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f":p()(t).isYesterday()?"\u0412\u0447\u0435\u0440\u0430":p()(t).fromNow()}(e),n=p()(e).utc().local().format("HH:mm"),r=p()(e).utc().local().format("Z");return"".concat(t,", ").concat(n," i-GMT").concat(r.split(":")[0])}!function(e){e.jwtExpired="jwt expired",e.youShouldBeAuthorized="You should be authorised",e.unauthorized="Unauthorized",e.tokenIsInvalid="Token is invalid",e.emailOrPasswordAreIncorrect="email or password are incorrect"}(k||(k={}));var C="refresh_token",I="token",T=function(){function e(){var t=this;Object(d.a)(this,e),this.localToken=void 0,this.localRefreshToken=void 0,this.localAbortController=void 0,this.isLoadingRefreshTokenLocal=void 0,this.waitForAsync=function(e,n){return new Promise((function(r){return t.waitFor(e,r,n)}))};var n=w(C),r=w(I);this.localToken="",this.localRefreshToken="",this.localAbortController=null,this.isLoadingRefreshTokenLocal=!1,n&&(this.localRefreshToken=n),r&&(this.localToken=r)}return Object(j.a)(e,[{key:"token",get:function(){var e=w(I);return this.localToken?this.localToken:e||""},set:function(e){if(e){var t=e.split("Bearer ")[1];N(I,t,{path:"/"}),this.localToken=t}else this.localToken=""}},{key:"isLoadingRefreshToken",get:function(){return this.isLoadingRefreshTokenLocal},set:function(e){this.isLoadingRefreshTokenLocal=e}},{key:"refreshToken",get:function(){return this.localRefreshToken},set:function(e){e?(N(C,e,{path:"/"}),this.localRefreshToken=e):this.localRefreshToken=""}},{key:"logOut",value:function(){var e;w(e=C)&&N(e,"",{"max-age":-1}),this.localRefreshToken="",this.localToken="",this.localAbortController=null}},{key:"setAbortController",value:function(){this.localAbortController=new AbortController}},{key:"getAbortFetch",value:function(){this.localAbortController&&this.localAbortController.abort()}},{key:"postFetch",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mainFetch({url:t,isProtect:!1,method:"POST",body:n}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"postProtectedFetch",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mainFetch({url:t,isProtect:!0,method:"POST",body:n}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"patchProtectedFetch",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mainFetch({url:t,isProtect:!0,method:"PATCH",body:n}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getProtectedFetch",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mainFetch({url:t,isProtect:!0,method:"GET"}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFetch",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mainFetch({url:t,method:"GET"}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mainFetch",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,a,c,i,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.isProtect,a=void 0!==r&&r,c=t.method,i=t.body,this.ifNeedInitialRestartAbortController(),e.next=4,this.ifNeedInitialRefreshToken(a);case 4:return s="https://norma.nomoreparties.space/api"+n,e.next=7,this.simpleFetch({url:s,isProtect:a,method:c,body:i});case 7:if(200!==(o=e.sent).status){e.next=12;break}return e.next=11,o.json();case 11:case 14:return e.abrupt("return",e.sent);case 12:return e.next=14,this.refreshTokenOrLogout({url:s,isProtect:a,method:c,body:i,responseError:o});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ifNeedInitialRestartAbortController",value:function(){var e;(null===(e=this.localAbortController)||void 0===e?void 0:e.signal.aborted)&&(this.localAbortController=null)}},{key:"ifNeedInitialRefreshToken",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||this.localToken){e.next=3;break}return e.next=3,this.refreshTokenFetch();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"refreshTokenOrLogout",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,a,c,i,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.isProtect,a=void 0!==r&&r,c=t.method,i=t.body,s=t.responseError,e.next=3,s.json();case 3:if(o=e.sent,!this.isNeedRefreshToken(o)){e.next=12;break}return e.next=7,this.refreshTokenFetch();case 7:return e.next=9,this.getNewFetchAfterTokenRefresh({url:n,isProtect:a,method:c,body:i});case 9:return e.abrupt("return",e.sent);case 12:throw this.logOut(),new Error(s.status+"==="+o.message);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isNeedRefreshToken",value:function(e){return!!this.localRefreshToken&&!!e.message&&(k.jwtExpired===e.message||k.youShouldBeAuthorized===e.message)}},{key:"refreshTokenFetch",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLoadingRefreshToken){e.next=7;break}return this.isLoadingRefreshToken=!0,e.next=4,this.postFetch("/auth/token",JSON.stringify({token:this.refreshToken}));case 4:(t=e.sent)?(n=t.accessToken.split("Bearer ")[1],N(I,n,{path:"/"}),this.localToken=n,this.localRefreshToken=t.refreshToken,N(C,t.refreshToken,{path:"/"})):this.logOut(),this.isLoadingRefreshToken=!1;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getNewFetchAfterTokenRefresh",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,a,c,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url,r=t.isProtect,a=void 0!==r&&r,c=t.method,i=t.body,!this.localRefreshToken){e.next=14;break}return e.next=4,this.simpleFetch({url:n,isProtect:a,method:c,body:i});case 4:if(200!==(s=e.sent).status){e.next=10;break}return this.localAbortController=null,e.next=9,s.json();case 9:return e.abrupt("return",e.sent);case 10:case 14:throw this.logOut(),new Error("401===".concat(k.unauthorized));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"simpleFetch",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,a,c,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.isProtect,a=void 0!==r&&r,c=t.method,i=t.body,s=c?this.getFiledRequest(c,a,i):void 0,e.next=4,fetch(n,s);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFiledRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r={"Content-Type":"application/json"};t&&(r.Authorization="Bearer "+this.localToken);var a={method:e,mode:"cors",cache:"no-cache",credentials:"same-origin",headers:r,redirect:"follow",referrerPolicy:"no-referrer"};return n&&(a.body=n),this.localAbortController&&(a.signal=this.localAbortController.signal),a}},{key:"waitFor",value:function(e,t,n){e()?t():setTimeout(this.waitFor.bind(null,e,t,n),n||100)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();T.instance=void 0;n(165),n(166);var E=n(11),L=n(148),F=n.n(L),R=n(0);function P(e){var t=e.children;return Object(R.jsx)("header",{className:F.a.header,children:Object(R.jsx)("div",{className:F.a.content,children:t})})}var A=n(149),D=n.n(A);function M(e){var t=e.children;return Object(R.jsx)("main",{className:D.a.main,children:Object(R.jsx)("div",{className:D.a.content,children:t})})}function B(e){var t=e.children;return Object(R.jsx)("div",{className:"pl-5 pr-5",children:t})}var W=n(190),V=n.n(W);function U(e){var t=e.children;return Object(R.jsx)("div",{className:V.a.main_maximum_height,children:t})}function z(e){var t=e.children;return Object(R.jsx)(M,{children:Object(R.jsx)(B,{children:Object(R.jsx)(U,{children:t})})})}var Y=n(13);function J(e){var t=e.error;return Object(R.jsxs)("section",{children:[Object(R.jsx)("h2",{children:t.name}),Object(R.jsx)("p",{children:t.message})]})}var q=n(4),G=function(){var e=Object(r.useState)(!1),t=Object(q.a)(e,2),n=t[0],a=t[1];return{isOpenModal:n,onCloseModal:Object(r.useCallback)((function(e){e&&e.stopPropagation(),a(!1)}),[]),onOpenModal:Object(r.useCallback)((function(){a(!0)}),[])}},X=(n(218),n(308)),H=n(307),Q=n(303),Z=n(8),K=n(126),$=n.n(K);function ee(e){var t=e.children,n=e.className,r=void 0===n?"":n,a=e.onClose;return Object(R.jsxs)("div",{className:$.a.modal_header,children:[Object(R.jsx)("div",{className:"text text_type_main-large ".concat($.a.modal_header_content," ").concat(r),children:t||""}),Object(R.jsx)("div",{className:"p-2 ".concat($.a.modal_header_close_button),onClick:a,children:Object(R.jsx)(Z.CloseIcon,{type:"primary"})})]})}var te=n(150),ne=n.n(te);function re(e){var t=e.children,n=e.onClose,r=void 0===n?function(){}:n,a=e.isAnimate,c=void 0!==a&&a,i="modal";return Object(R.jsx)("div",{className:"".concat(ne.a.modal_overlay," ").concat(c?ne.a.modal_overlay_animate:""),onClick:function(e){e.target.getAttribute("data-type")===i&&r(e)},"data-type":i,children:t})}var ae=n(151),ce=n.n(ae),ie=document.getElementById("react-modals"),se={visible:{y:0,scaleX:1},hidden:{y:"100vh",scaleX:.1}};function oe(e){var t=e.children,n=e.header,a=e.classNameHeader,i=void 0===a?"":a,s=(e.isAnimated,e.animateTime),o=void 0===s?.5:s,d=e.onClose,j=Object(r.useState)(0),b=Object(q.a)(j,2),h=b[0],p=b[1],f=Object(r.useState)(!1),m=Object(q.a)(f,2),_=m[0],O=m[1],x=Object(r.useState)(!1),g=Object(q.a)(x,2),v=g[0],y=g[1],k=Object(X.a)();Object(r.useEffect)((function(){return function(){clearTimeout(h)}}),[]);var N=function(e){"Escape"===e.key&&(e.preventDefault(),w())},w=function(e){y(!0),O(!0);var t=window.setTimeout((function(){d(e)}),1e3*o);p(t)};return Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,k.start("visible");case 3:y(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.addEventListener("keydown",N),e(),function(){window.removeEventListener("keydown",N)}}),[]),Object(c.createPortal)(Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(re,{onClose:w,isAnimate:v,children:Object(R.jsx)(H.a,{children:!_&&Object(R.jsxs)(Q.a.div,{variants:se,initial:"hidden",animate:k,exit:"hidden",transition:{duration:o,type:"spring",stiffness:80},className:"p-10 pb-15 ".concat(ce.a.modal),children:[Object(R.jsx)(ee,{onClose:w,className:i,children:n}),Object(R.jsx)("div",{className:ce.a.modal_body,children:t})]})})})}),ie)}var ue=function(e){var t=e.children,n=e.title,c=Object(Y.g)(),i=G(),s=i.isOpenModal,o=i.onOpenModal,u=i.onCloseModal,l=Object(Y.i)().id;return Object(r.useEffect)((function(){o()}),[l,o]),Object(R.jsx)(R.Fragment,{children:s?Object(R.jsx)(oe,{header:n||"#".concat(l),classNameHeader:n?"":"text text_type_digits-default",onClose:function(){u(),c.goBack()},children:a.a.cloneElement(t,{id:l})}):null})},le=s.c,de=function(){return Object(s.b)()},je=n(103),be=n.n(je);function he(e){var t=e.ingredient,n=t.image_large,r=t.name,a=t.calories,c=t.carbohydrates,i=t.fat,s=t.proteins;return Object(R.jsxs)("div",{className:be.a.ingredient_details,children:[Object(R.jsx)("img",{className:be.a.ingredient_image,alt:r,src:n}),Object(R.jsx)("p",{className:"text text_type_main-medium pt-4 pb-7 ".concat(be.a.ingredient_name),children:Object(R.jsx)("span",{children:r})}),Object(R.jsxs)("ul",{className:"".concat(be.a.ingredient_info),children:[Object(R.jsxs)("li",{children:[Object(R.jsx)("p",{children:Object(R.jsx)("span",{children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"})}),Object(R.jsx)("p",{children:Object(R.jsx)("span",{children:a})})]}),Object(R.jsxs)("li",{children:[Object(R.jsx)("p",{children:Object(R.jsx)("span",{children:"\u0411\u0435\u043b\u043a\u0438, \u0433"})}),Object(R.jsx)("p",{children:Object(R.jsx)("span",{children:s})})]}),Object(R.jsxs)("li",{children:[Object(R.jsx)("p",{children:Object(R.jsx)("span",{children:"\u0416\u0438\u0440\u044b, \u0433"})}),Object(R.jsx)("p",{children:Object(R.jsx)("span",{children:i})})]}),Object(R.jsxs)("li",{children:[Object(R.jsx)("p",{children:Object(R.jsx)("span",{children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"})}),Object(R.jsx)("p",{children:Object(R.jsx)("span",{children:c})})]})]})]})}function pe(e){var t=e.id,n=Object(r.useState)(),a=Object(q.a)(n,2),c=a[0],i=a[1],s=le((function(e){return e.ingredients.ingredients}));return Object(r.useEffect)((function(){var e=s.find((function(e){return e._id===t}));e&&i(e)}),[t,s]),c?Object(R.jsx)(he,{ingredient:c}):Object(R.jsx)("div",{})}var fe=n(156),me=n.n(fe);function _e(e){var t=e.children,n=e.style,r=void 0===n?{}:n,a=e.className,c=void 0===a?"":a,i=e.styleInner,s=void 0===i?{}:i,o=e.classNameInner,u=void 0===o?"":o;return Object(R.jsx)("div",{className:"".concat(me.a.scroll_container," ").concat(c),style:r,children:Object(R.jsx)("div",{className:"".concat(me.a.scroll_container_inner," ").concat(u," custom-scroll"),style:s,children:t})})}var Oe=Object(r.memo)(_e),xe="WS_ORDER_ALL_CONNECTION_START",ge="WS_ORDER_ALL_CLOSE",ve="WS_ORDER_CONNECTION_START",ye="WS_ORDER_CLOSE",ke=function(){return{type:xe}},Ne=function(){return{type:ge}},we=function(){return{type:ve}},Se=function(){return{type:ye}},Ce=n(88),Ie=n.n(Ce),Te={visible:{opacity:1,x:[-20,20,-20],y:[0,-30,0],transition:{x:{repeat:1/0,duration:1},y:{repeat:1/0,duration:.5}}},hidden:{opacity:0}},Ee={visible:{opacity:1,x:[20,-20,20],y:[0,30,0],transition:{x:{repeat:1/0,duration:1},y:{repeat:1/0,duration:.5}}},hidden:{opacity:0}},Le={visible:{rotate:[0,360],transition:{rotate:{repeat:1/0,duration:3}}}},Fe={visible:{opacity:1,z:[-20,20,-20],y:[-30,30,-30],x:[20,-20,20],scale:[1,1.5,1,.5,1],transition:{x:{repeat:1/0,duration:1},y:{repeat:1/0,duration:1},z:{repeat:1/0,duration:.5},scale:{repeat:1/0,duration:.5}}},hidden:{opacity:0}},Re={visible:{opacity:1,z:[20,-20,20],y:[20,-20,20],x:[-20,20,-20],scale:[1,.5,1,1.5,1],transition:{x:{repeat:1/0,duration:1},y:{repeat:1/0,duration:1},z:{repeat:1/0,duration:.5},scale:{repeat:1/0,duration:.5}}},hidden:{opacity:0}};function Pe(){return Object(R.jsx)(H.a,{children:Object(R.jsxs)(Q.a.div,{className:Ie.a.loader_container,variants:Le,animate:"visible",children:[Object(R.jsx)(Q.a.div,{variants:Te,initial:"hidden",exit:"hidden",animate:"visible",className:Ie.a.loader1},"1"),Object(R.jsx)(Q.a.div,{variants:Ee,initial:"hidden",exit:"hidden",animate:"visible",className:Ie.a.loader2},"2"),Object(R.jsx)(Q.a.div,{variants:Fe,initial:"hidden",exit:"hidden",animate:"visible",className:Ie.a.loader3},"3"),Object(R.jsx)(Q.a.div,{variants:Re,initial:"hidden",exit:"hidden",animate:"visible",className:Ie.a.loader4},"4")]})})}var Ae=n(192),De=n.n(Ae),Me=function(e){var t=e.price;return Object(R.jsx)("div",{className:De.a.price,children:Object(R.jsxs)("p",{children:[Object(R.jsx)("span",{className:"text text_type_digits-default",children:t}),Object(R.jsx)(Z.CurrencyIcon,{type:"primary"})]})})},Be=n(193),We=n.n(Be),Ve=function(e){var t=e.image;return Object(R.jsx)("img",{alt:t.name,src:t.image_mobile,className:We.a.image})},Ue=n(157),ze=n.n(Ue),Ye=function(e){var t=e.ingredient,n=e.counts;return Object(R.jsxs)("div",{className:ze.a.main_container,children:[Object(R.jsx)(Ve,{image:t}),Object(R.jsx)("div",{className:ze.a.name,children:t.name}),Object(R.jsx)(Me,{price:"".concat(n[t._id]," x ").concat(t.price)})]})},Je=function(e){var t=e.list,n=Object(r.useState)(null),a=Object(q.a)(n,2),c=a[0],i=a[1],s=Object(r.useState)([]),o=Object(q.a)(s,2),u=o[0],l=o[1];return Object(r.useEffect)((function(){var e=[],n=t.reduce((function(t,n){return t[n._id]?t[n._id]=t[n._id]+1:(e.push(Object(b.a)({},n)),t[n._id]=1),t}),{});l([].concat(e)),i(Object(b.a)({},n))}),[t]),Object(R.jsx)(R.Fragment,{children:c&&u.length>0?u.map((function(e,t){return Object(R.jsx)(Ye,{ingredient:e,counts:c},t)})):Object(R.jsx)(Pe,{})})},qe=n(39),Ge=n.n(qe),Xe=function(e){var t=e.id,n=e.isShowTitle,a=void 0===n||n,c=de(),i=Object(r.useState)(null),s=Object(q.a)(i,2),o=s[0],u=s[1],l=Object(r.useState)(0),d=Object(q.a)(l,2),j=d[0],b=d[1],h=le((function(e){return e.order.orderFeedAll})),p=le((function(e){return e.ingredients.ingredients})),f=le((function(e){return e.order.orderFeed}));return Object(r.useEffect)((function(){if(h&&p){var e=h.orders.find((function(e){return e.number===+t}));e&&u(e)}else c(ke());return function(){c(Ne())}}),[c,t,h,p]),Object(r.useEffect)((function(){if(f&&p){var e=f.orders.find((function(e){return e.number===+t}));e&&u(e)}else c(we());return function(){c(Se())}}),[c,t,f,p]),Object(r.useEffect)((function(){if(o){var e=o.ingredients.reduce((function(e,t){return e+ +t.price}),0);b(e)}}),[o]),Object(R.jsx)("div",{className:Ge.a.main_container,children:o?Object(R.jsxs)("div",{className:"".concat(Ge.a.flex_container," ").concat(a?Ge.a.flex_container_pt:Ge.a.flex_container_pt_min),children:[a?Object(R.jsx)("div",{className:"text text_type_digits-default ".concat(Ge.a.id),children:"#".concat(t)}):null,Object(R.jsx)("h2",{className:"text text_type_main-medium",children:o.name}),Object(R.jsx)("p",{className:"".concat(Ge.a.status," ").concat("done"===o.status?Ge.a.done_status:"cancelled"===o.status?Ge.a.canceled_status:Ge.a.prepared_status),children:Object(R.jsx)("span",{className:"text text_type_main-default",children:"done"===o.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"cancelled"===o.status?"\u041e\u0442\u043c\u0435\u043d\u0435\u043d":"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u044c\u0441\u044f"})}),Object(R.jsx)("h3",{className:"text text_type_main-medium ".concat(Ge.a.h3),children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(R.jsx)(Oe,{style:{height:"312px"},children:Object(R.jsx)(Je,{list:o.ingredients})}),Object(R.jsxs)("div",{className:Ge.a.bottom_container,children:[Object(R.jsx)("div",{className:"text text_type_main-default ".concat(Ge.a.date),children:S(o.createdAt)}),Object(R.jsx)(Me,{price:j.toLocaleString()})]})]}):Object(R.jsx)(Pe,{})})},He=n(302),Qe=n(203),Ze=n(194),Ke=n.n(Ze);function $e(e){var t=e.children,n=e.style,r=e.className;return Object(R.jsx)("div",{className:"".concat(Ke.a.two_columns," ").concat(r||""),style:n||{},children:t})}var et=n(304),tt="ingredientCard",nt="ConstructorCard",rt=n(18),at="bun",ct={bun:"\u0411\u0443\u043b\u043a\u0438",sauce:"\u0421\u043e\u0443\u0441\u044b",main:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"},it=Object.keys(ct),st=n(43),ot=Object(rt.c)({name:"app",initialState:{isLoading:!1,error:null},reducers:{setAppLoading:function(e,t){e.isLoading=t.payload},setAppError:function(e,t){e.error=t.payload}}}),ut=ot.reducer,lt=ot.actions,dt=(lt.setAppLoading,lt.setAppError),jt=function(e){return e.constructorIngredients.reduce((function(e,t){return e+t.price}),0)+(e.bun?2*e.bun.price:0)},bt=function(e,t,n){var r=e.countIngredients.findIndex((function(e){return e.id===n}));return"add"===t?-1!==r?e.countIngredients.map((function(e){return e.id===n?Object(b.a)(Object(b.a)({},e),{},{count:e.count+1}):e})):[].concat(Object(st.a)(e.countIngredients),[{id:n,count:1}]):e.countIngredients[r].count>1?e.countIngredients.map((function(e){return e.id===n?Object(b.a)(Object(b.a)({},e),{},{count:e.count-1}):e})):e.countIngredients.filter((function(e){return e.id!==n}))},ht=function(e,t,n){var r={name:e.name,message:e.message};n(e),t(dt(r))},pt=Object(rt.c)({name:"constructorIngredients",initialState:{bun:null,constructorIngredients:[],totalSum:0,nextIndex:0},reducers:{setBun:function(e,t){e.bun=t.payload,e.totalSum=jt(e)},calculateTotal:function(e){e.totalSum=jt(e)},setIngredientsInConstructor:function(e,t){e.constructorIngredients=t.payload,e.totalSum=jt(e)},addIngredientInConstructor:function(e,t){if(t.payload.type===at)e.bun=t.payload;else{var n=function(e,t){return Object(b.a)(Object(b.a)({},t),{},{sort_id:"".concat(e.nextIndex)})}(e,t.payload);e.constructorIngredients.push(n),e.nextIndex++}e.totalSum=jt(e)},deleteIngredientFromConstructor:function(e,t){e.constructorIngredients=e.constructorIngredients.filter((function(e){return e.sort_id!==t.payload.sort_id})),e.totalSum=jt(e)},swapCards:function(e,t){var n=e.constructorIngredients.find((function(e){return e.sort_id===t.payload.dragId})),r=e.constructorIngredients.findIndex((function(e){return e.sort_id===t.payload.dragId})),a=e.constructorIngredients.findIndex((function(e){return e.sort_id===t.payload.hoverId}));e.constructorIngredients.splice(r,1),e.constructorIngredients.splice(a,0,n)}}}),ft=pt.reducer,mt=pt.actions,_t=mt.setBun,Ot=mt.setIngredientsInConstructor,xt=mt.addIngredientInConstructor,gt=mt.deleteIngredientFromConstructor,vt=mt.swapCards,yt=n(305),kt=n(128),Nt=n.n(kt);var wt=function(e){var t=e.isTop,n=void 0!==t&&t,a=e.isBottom,c=void 0!==a&&a,i=e.image,s=e.name,o=e.price,u=e.ingredient,l=e.onDeleteItem,d=n?"top":c?"bottom":void 0,j=!(!n&&!c),b=Object(r.useRef)(null),h=de(),p=u&&l?function(){l(u)}:void 0,f=Object(r.useRef)(null),m=Object(et.a)({accept:nt,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var n;if(f.current){var r=e.sort_id,a=u.sort_id;if(r!==a){var c=null===(n=f.current)||void 0===n?void 0:n.getBoundingClientRect(),i=(c.bottom-c.top)/2,s=t.getClientOffset().y-c.top;r<a&&s<i||r>a&&s>i||null===b.current&&(h(vt({dragId:r,hoverId:a})),b.current=setTimeout((function(){b.current=null}),200))}}}}),_=Object(q.a)(m,2),O=_[0].handlerId,x=_[1];Object(r.useEffect)((function(){return function(){b.current&&clearTimeout(b.current)}}),[]);var g=Object(yt.a)({type:nt,item:function(){return u},collect:function(e){return{isDragging:e.isDragging()}}}),v=Object(q.a)(g,3),y=v[0].isDragging,k=v[1],N=y?0:1;return(0,v[2])(x(f)),Object(R.jsxs)(Q.a.div,{className:Nt.a.ingredient_item,ref:u?f:void 0,style:{opacity:N},"data-handler-id":O,transition:{duration:.2,type:"tween"},layout:!0,children:[Object(R.jsx)("div",{className:Nt.a.drag_container,ref:k,children:n||c?null:Object(R.jsx)(Z.DragIcon,{type:"primary"})}),Object(R.jsx)("div",{className:Nt.a.item_container,children:Object(R.jsx)(Z.ConstructorElement,{type:d,isLocked:j,text:"".concat(s).concat(n?" (\u0432\u0435\u0440\u0445)":c?" (\u043d\u0438\u0437)":""),price:o,thumbnail:i,handleClose:p})})]})};function St(e){var t=e.bun,n=e.isTop;return Object(R.jsx)("div",{children:t?Object(R.jsx)(wt,{isTop:!!n,isBottom:!n,price:t.price/100,name:t.name,image:t.image_mobile}):null})}var Ct=n(72),It=n.n(Ct),Tt=n(306);function Et(e){var t=e.constructorIngredients,n=e.deleteItem,a=Object(r.useCallback)((function(e){n(e)}),[n]);return Object(R.jsx)(Tt.a,{children:t.map((function(e){return Object(R.jsx)(wt,{price:e.price/100,name:e.name,image:e.image_mobile,ingredient:e,onDeleteItem:a},e.sort_id)}))})}var Lt,Ft,Rt=Object(r.memo)(Et),Pt="/login",At="/register",Dt="/forgot-password",Mt="/reset-password",Bt="/profile",Wt="/orders",Vt="/ingredients",Ut="/feed",zt=n(5),Yt=T.getInstance(),Jt=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yt.getFetch("/ingredients");case 2:return e.next=4,e.sent.data;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qt=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yt.postProtectedFetch("/orders",JSON.stringify({ingredients:t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Gt=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yt.postFetch("/password-reset",JSON.stringify({email:t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xt=function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yt.postFetch("/password-reset/reset",JSON.stringify({password:t,token:n}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ht=Object(rt.b)("ingredients/ingredientFetch",function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,a=n.dispatch,e.prev=1,e.next=4,Jt();case 4:c=e.sent,a($t(c)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),ht(e.t0,a,r);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),Qt=Object(rt.c)({name:"ingredients",initialState:{ingredients:[],countIngredients:[],isLoading:!1},reducers:{setIngredients:function(e,t){e.ingredients=t.payload},resetCountIngredients:function(e,t){e.countIngredients=t.payload}},extraReducers:(Lt={},Object(zt.a)(Lt,Ht.pending.toString(),(function(e){e.isLoading=!0})),Object(zt.a)(Lt,Ht.fulfilled.toString(),(function(e){e.isLoading=!1})),Object(zt.a)(Lt,Ht.rejected.toString(),(function(e){e.isLoading=!1})),Object(zt.a)(Lt,xt.toString(),(function(e,t){t.payload.type!==at&&(e.countIngredients=bt(e,"add",t.payload._id))})),Object(zt.a)(Lt,gt.toString(),(function(e,t){e.countIngredients=bt(e,"delete",t.payload._id)})),Lt)}),Zt=Qt.reducer,Kt=Qt.actions,$t=Kt.setIngredients,en=Kt.resetCountIngredients,tn=Object(rt.b)("order/getOrderFetch",function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a,c,i,s,o,l,d,j,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,a=n.dispatch,c=n.getState,e.prev=1,i=c(),s=i.constructorIngredients,o=s.constructorIngredients,l=s.bun,d=function(){return o.map((function(e){return e._id}))},j=[].concat(Object(st.a)(d()),Object(st.a)((t=2,u=null===l||void 0===l?void 0:l._id,new Array(t).fill(u)))),e.next=7,qt(j);case 7:b=e.sent,a(on(b)),a(_t(null)),a(Ot([])),a(en([])),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0),r(e.t0);case 18:case"end":return e.stop()}var t,u}),e,null,[[1,14]])})));return function(t,n){return e.apply(this,arguments)}}()),nn=Object(rt.c)({name:"order",initialState:{order:null,isLoading:!1,orderFeed:null,orderFeedAll:null},reducers:{setOrder:function(e,t){e.order=t.payload},setOrderFeed:function(e,t){e.orderFeed=t.payload},setOrderFeedAll:function(e,t){e.orderFeedAll=t.payload}},extraReducers:(Ft={},Object(zt.a)(Ft,tn.pending.toString(),(function(e){e.isLoading=!0})),Object(zt.a)(Ft,tn.fulfilled.toString(),(function(e){e.isLoading=!1})),Object(zt.a)(Ft,tn.rejected.toString(),(function(e,t){e.isLoading=!1,e.order=null,console.log(t.payload)})),Ft)}),rn=nn.reducer,an=nn.actions,cn=an.setOrderFeed,sn=an.setOrderFeedAll,on=an.setOrder,un=n(89),ln=n.n(un);function dn(){var e=le((function(e){return e.order.order}));if(!le((function(e){return e.order.isLoading}))&&e){var t=e.name,n=e.order.number,r=e.success;return Object(R.jsxs)("div",{className:ln.a.order_details,children:[Object(R.jsx)("p",{className:"pt-4 pb-4 text text_type_digits-large",children:Object(R.jsx)("span",{children:n})}),Object(R.jsx)("p",{className:"pt-4 pb-15 text text_type_main-medium",children:Object(R.jsx)("span",{children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"})}),Object(R.jsx)("div",{className:ln.a.order_icon,children:r?Object(R.jsx)(Z.CheckMarkIcon,{type:"primary"}):null}),Object(R.jsx)("p",{className:"pt-15 pb-1 ".concat(ln.a.status_text),children:Object(R.jsx)("span",{children:t})}),Object(R.jsx)("p",{className:"pt-1 pb-1 ".concat(ln.a.bottom_text),children:Object(R.jsx)("span",{children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})})]})}return Object(R.jsx)("div",{className:ln.a.order_details,children:Object(R.jsx)(Pe,{})})}var jn=n(104),bn=n.n(jn),hn=T.getInstance();function pn(){var e=Object(Y.g)(),t=le((function(e){return e.order.isLoading})),n=le((function(e){return e.constructorIngredients.totalSum})),r=le((function(e){return e.constructorIngredients.bun})),a=le((function(e){return e.user.refreshToken})),c=de(),i=G(),s=i.isOpenModal,o=i.onOpenModal,d=i.onCloseModal,j=G(),b=j.isOpenModal,h=j.onOpenModal,p=j.onCloseModal,f=function(){var n=Object(l.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=13;break}if(!a){n.next=12;break}if(!r){n.next=9;break}return hn.setAbortController(),o(),n.next=7,c(tn());case 7:n.next=10;break;case 9:h();case 10:n.next=13;break;case 12:e.push(Pt);case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)("div",{className:"pt-10 pb-10 ".concat(bn.a.burger_constructor_footer),children:[Object(R.jsxs)("p",{className:"pr-10 ".concat(bn.a.total_container),children:[Object(R.jsx)("span",{className:"text text_type_digits-medium",children:n/100}),Object(R.jsx)("span",{className:bn.a.total_icon,children:Object(R.jsx)(Z.CurrencyIcon,{type:"primary"})})]}),Object(R.jsx)(Z.Button,{type:"primary",size:"large",onClick:f,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]}),s?Object(R.jsx)(oe,{onClose:function(e){t&&hn.getAbortFetch(),d(e)},children:Object(R.jsx)(dn,{})}):null,b?Object(R.jsx)(oe,{onClose:p,children:Object(R.jsx)("h2",{className:bn.a.alert,children:"\u0411\u0443\u0440\u0433\u0435\u0440\u043e\u043c \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0441\u043b\u0430\u0436\u0434\u0430\u0442\u044c\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0441 \u0431\u0443\u043b\u043a\u0430\u043c\u0438! =)"})}):null]})}function fn(){var e=le((function(e){return{bun:e.constructorIngredients.bun,constructorIngredients:e.constructorIngredients.constructorIngredients}})),t=e.bun,n=e.constructorIngredients,a=de(),c=Object(et.a)((function(){return{accept:tt,drop:function(e){a(xt(e))},collect:function(e){return{canDrop:e.canDrop(),isOver:e.isOver()}}}})),i=Object(q.a)(c,2),s=i[0],o=s.canDrop,u=s.isOver,l=i[1],d=Object(r.useCallback)((function(e){a(gt(e))}),[a]);return Object(R.jsxs)("section",{className:It.a.burger_constructor,children:[Object(R.jsxs)("div",{className:It.a.burger_constructor_body,children:[Object(R.jsx)(St,{bun:t,isTop:!0}),Object(R.jsx)("div",{className:"".concat(It.a.burger_list_container," ").concat(o?It.a.burger_list_container_target_illumination:""," ").concat(u?It.a.burger_list_container_over_illumination:""),ref:l,children:Object(R.jsx)(Oe,{className:It.a.burger_list_scroll,children:Object(R.jsx)(Rt,{constructorIngredients:n,deleteItem:d})})}),Object(R.jsx)(St,{bun:t,isTop:!1})]}),Object(R.jsx)(pn,{})]})}var mn=Object(r.memo)(fn),_n=n(197);function On(e){var t=e.children,n=e.categoryName,r=e.style,a=void 0===r?{}:r,c=e.className,i=void 0===c?"":c,s=e.currentTabRef;return Object(R.jsxs)("div",{style:a,className:i,ref:s,children:[Object(R.jsx)("h2",{className:"pt-10 pb-6",children:n}),t]})}var xn=Object(r.memo)(On),gn=n(301),vn=n(73),yn=n.n(vn),kn={visible:function(e){return{opacity:1,scaleX:1,scaleY:1,transition:{delay:.1*e}}},hidden:{opacity:0,scaleX:.1,scaleY:.1}},Nn={visible:{opacity:1,scaleX:1,scaleY:1,transition:{duration:.3,type:"spring",stiffness:90}},addCount:{scale:[1.1,1],transition:{duration:.5}},hidden:{opacity:0,scaleX:.1,scaleY:.1},exit:{opacity:0,scaleX:1,scaleY:1,transition:{duration:.2,ease:"easeOut"}}};function wn(e){var t=e.ingredientData,n=e.count,a=void 0===n?0:n,c=e.numElement,i=void 0===c?0:c,s=Object(r.useRef)(0),o=Object(X.a)(),u=Object(Y.g)(),l=Object(Y.h)(),d=Object(yt.a)((function(){return{type:tt,item:t,collect:function(e){return{isDragging:e.isDragging()}},options:{dropEffect:"copy"}}})),j=Object(q.a)(d,3),b=j[0].isDragging,h=j[1],p=j[2];Object(r.useEffect)((function(){a>1&&0!==s.current||1===a&&a<s.current?o.start("addCount"):1===a||0===s.current&&a>0?o.start("visible"):o.start("exit"),s.current=a}),[o,a]);var f=b?.2:1;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(gn.a,{connect:p,src:t.image}),Object(R.jsxs)(Q.a.li,{className:yn.a.ingredient_card,style:{opacity:f},variants:kn,custom:i,initial:"hidden",animate:"visible",onClick:function(){u.push({pathname:"".concat(Vt,"/").concat(t._id),state:{background:l}})},ref:h,children:[Object(R.jsx)(H.a,{children:a?Object(R.jsx)(Q.a.div,{className:yn.a.ingredient_count,variants:Nn,animate:o,initial:"hidden",exit:"exit",children:Object(R.jsx)(Z.Counter,{count:a,size:a<100?"default":"small"})}):null}),Object(R.jsx)("img",{className:yn.a.ingredient_image,src:t.image,alt:t.name}),Object(R.jsxs)("p",{className:"p-2 ".concat(yn.a.ingredient_price_container),children:[Object(R.jsx)("span",{className:"text text_type_digits-default",children:t.price/100}),Object(R.jsx)("span",{className:yn.a.ingredient_price_icon,children:Object(R.jsx)(Z.CurrencyIcon,{type:"primary"})})]}),Object(R.jsx)("p",{className:yn.a.ingredient_name,children:Object(R.jsx)("span",{className:"text text_type_main-default",children:t.name})})]})]})}var Sn=Object(r.memo)(wn),Cn=n(196),In=n.n(Cn);function Tn(e){var t=e.tabListRefs,n=e.ingredients,a=e.countIngredients,c=e.isClicked,i=e.bun,s=e.onChangeInView,o=0,u=Object(r.useCallback)((function(e){if(e.type===at)return i&&i._id===e._id?2:0;var t=a.find((function(t){return t.id===e._id}));return t?t.count:0}),[i,a]);return Object(R.jsx)(R.Fragment,{children:it.map((function(e){var r=ct[e],a=n.filter((function(t){return t.type===e}));return Object(R.jsx)(xn,{categoryName:r,currentTabRef:function(n){return t.current[e]=n},children:Object(R.jsx)(_n.a,{as:"div",name:e,skip:c,onChange:s,children:Object(R.jsx)("ul",{className:"".concat(In.a.category_ingredients_container),children:a.map((function(e){return o++,Object(R.jsx)(Sn,{ingredientData:e,count:u(e),numElement:o},e._id)}))})})},e)}))})}var En=Object(r.memo)(Tn),Ln=n(198),Fn=n.n(Ln);function Rn(e){var t=e.currentTabName,n=e.tabsRef,r=e.onMouseEnter,a=e.onMouseLeave,c=e.onClickTab;return Object(R.jsx)("nav",{className:Fn.a.tabs_container,ref:n,onMouseEnter:r,onMouseLeave:a,children:it.map((function(e){var n=ct[e];return Object(R.jsx)(Z.Tab,{value:e,active:t===e,onClick:c,children:n},e)}))})}var Pn=Object(r.memo)(Rn);function An(){var e=Object(r.useRef)(null),t=le((function(e){return e.ingredients.ingredients})),n=le((function(e){return e.constructorIngredients.bun})),a=le((function(e){return e.ingredients.countIngredients})),c=Object(r.useState)([]),i=Object(q.a)(c,2),s=i[0],o=i[1],u=Object(r.useState)(!1),l=Object(q.a)(u,2),d=l[0],j=l[1],b=function(e){var t=Object(r.useState)((new Date).getTime().toString()),n=Object(q.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){c((new Date).getTime().toString())}),e),a}([t]),h=function(e){var t=Object(r.useState)(e),n=Object(q.a)(t,2),a=n[0],c=n[1],i=Object(r.useRef)({});return Object(r.useEffect)((function(){return i.current[a]&&i.current[a].scrollIntoView({block:"start",behavior:"smooth"}),function(){}}),[a]),{currentTabName:a,tabListRefs:i,setCurrentType:function(e){c(e)}}}(at),p=h.currentTabName,f=h.tabListRefs,m=h.setCurrentType;Object(r.useEffect)((function(){var e=it.find((function(e){return s.find((function(t){return e===t}))}));m(e)}),[s]);var _=Object(r.useCallback)((function(e){m(e)}),[m]),O=Object(r.useCallback)((function(e,t){var n=t.target.getAttribute("name");if(e)o([].concat(Object(st.a)(s),[n]));else{var r=s.filter((function(e){return e!==n}));o(Object(st.a)(r))}}),[s]),x=Object(r.useCallback)((function(){j(!0)}),[]),g=Object(r.useCallback)((function(){j(!1)}),[]),v=Object(r.useMemo)((function(){return e.current?{height:"calc(100% - ".concat(e.current.clientHeight,"px - 20px)")}:{}}),[e.current]);return Object(R.jsxs)("section",{children:[Object(R.jsx)(Pn,{tabsRef:e,currentTabName:p,onClickTab:_,onMouseEnter:x,onMouseLeave:g}),Object(R.jsx)(Oe,{style:v,forceUpdate:b,children:Object(R.jsx)(En,{tabListRefs:f,ingredients:t,countIngredients:a,isClicked:d,bun:n,onChangeInView:O})})]})}function Dn(){var e=le((function(e){return e.ingredients.isLoading}));return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("h1",{children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),e?Object(R.jsx)(Pe,{}):Object(R.jsx)($e,{style:{height:"100%"},children:Object(R.jsxs)(He.a,{backend:Qe.a,children:[Object(R.jsx)(An,{}),Object(R.jsx)(mn,{})]})})]})}function Mn(){return Object(R.jsx)(z,{children:Object(R.jsx)(Dn,{})})}var Bn=n(105),Wn=n.n(Bn),Vn=function(e){var t=e.images;return Object(R.jsxs)("div",{className:Wn.a.main_container,children:[Object(R.jsx)("div",{className:Wn.a.images_container,children:Object(st.a)(t).reverse().map((function(e,t){return t<6?Object(R.jsx)("div",{className:Wn.a.image_container,children:Object(R.jsx)(Ve,{image:e})},t):null}))}),t.length>=6&&t.length-6>0?Object(R.jsx)("div",{className:"text text_type_main-default ".concat(Wn.a.another),children:Object(R.jsx)("p",{children:"+".concat(t.length-6)})}):null]})},Un=n(50),zn=n.n(Un),Yn=function(e){var t=e.orderElement,n=t.createdAt,a=t.ingredients,c=t.name,i=t.number,s=t.status,o=e.showStatus,u=void 0!==o&&o,l=e.OnClick,d=l?function(){return l("".concat(i))}:void 0,j=Object(r.useState)(0),b=Object(q.a)(j,2),h=b[0],p=b[1];return Object(r.useEffect)((function(){var e=a.reduce((function(e,t){return e+ +t.price}),0);p(e)}),[a]),Object(R.jsxs)("div",{className:zn.a.main_container,onClick:d,children:[Object(R.jsxs)("div",{className:zn.a.top_container,children:[Object(R.jsx)("div",{className:"text text_type_digits-default ".concat(zn.a.id),children:"#".concat(i)}),Object(R.jsx)("div",{className:"text text_type_main-default ".concat(zn.a.data),children:S(n)})]}),Object(R.jsx)("div",{className:"text text_type_main-medium ".concat(zn.a.name_container),children:c}),u?Object(R.jsx)("div",{className:"text text_type_main-default ".concat("done"===s?zn.a.done_status:"cancelled"===s?zn.a.canceled_status:zn.a.prepared_status),children:"done"===s?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"cancelled"===s?"\u041e\u0442\u043c\u0435\u043d\u0435\u043d":"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u044c\u0441\u044f"}):null,Object(R.jsxs)("div",{className:zn.a.bottom_container,children:[Object(R.jsx)("div",{className:zn.a.images_container,children:Object(R.jsx)(Vn,{images:a})}),Object(R.jsx)(Me,{price:h.toLocaleString()})]})]})},Jn=function(e){var t=e.orderFeedListElement,n=e.showStatus,a=void 0!==n&&n,c=Object(Y.j)().path,i=Object(Y.g)(),s=Object(Y.h)(),o=Object(r.useCallback)((function(e){i.push({pathname:"".concat(c,"/").concat(e),state:{background:s}})}),[i,s,c]);return Object(R.jsx)("div",{children:t.map((function(e){return Object(R.jsx)(Yn,{orderElement:e,showStatus:a,OnClick:o},e._id)}))})},qn=n(160),Gn=n.n(qn),Xn=n(74),Hn=n.n(Xn),Qn=function(e){var t=e.ready,n=e.inTheWork,r=e.completedForAllTime,a=e.completedToday;return Object(R.jsxs)("section",{className:Hn.a.main_container,children:[Object(R.jsxs)("div",{className:Hn.a.status_table,children:[Object(R.jsxs)("div",{className:Hn.a.ready,children:[Object(R.jsx)("h3",{className:"text text_type_main-medium",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(R.jsx)(Oe,{style:{height:"250px"},children:Object(R.jsx)("ul",{children:t.map((function(e){return Object(R.jsx)("li",{className:"text text_type_digits-default",children:e},e)}))})})]}),Object(R.jsxs)("div",{className:Hn.a.in_work,children:[Object(R.jsx)("h3",{className:"text text_type_main-medium",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(R.jsx)(Oe,{style:{height:"250px"},children:Object(R.jsx)("ul",{children:n.map((function(e){return Object(R.jsx)("li",{className:"text text_type_digits-default",children:e},e)}))})})]})]}),Object(R.jsxs)("div",{className:Hn.a.completed_block,children:[Object(R.jsx)("h3",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(R.jsx)("p",{children:Object(R.jsx)("span",{className:"text text_type_digits-large",children:r.toLocaleString()})})]}),Object(R.jsxs)("div",{className:Hn.a.completed_block,children:[Object(R.jsx)("h3",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(R.jsx)("p",{children:Object(R.jsx)("span",{className:"text text_type_digits-large",children:a.toLocaleString()})})]})]})};function Zn(){var e=de(),t=Object(r.useState)([]),n=Object(q.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(0),s=Object(q.a)(i,2),o=s[0],u=s[1],l=Object(r.useState)(0),d=Object(q.a)(l,2),j=d[0],b=d[1],h=Object(r.useState)([]),p=Object(q.a)(h,2),f=p[0],m=p[1],_=Object(r.useState)([]),O=Object(q.a)(_,2),x=O[0],g=O[1],v=le((function(e){return e.order.orderFeedAll}));return Object(r.useEffect)((function(){return e(ke()),function(){e(Ne())}}),[]),Object(r.useEffect)((function(){if(v){c(v.orders),u(v.total),b(v.totalToday);var e=[],t=[];v.orders.forEach((function(n){"done"===n.status?e.push("".concat(n.number)):t.push("".concat(n.number)),m([].concat(e)),g([].concat(t))}))}}),[v]),Object(R.jsxs)("div",{className:Gn.a.main_container,children:[Object(R.jsx)("h1",{children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),a.length>0?Object(R.jsx)($e,{style:{height:"100%"},className:Gn.a.gap60,children:Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("section",{children:Object(R.jsx)(Oe,{style:{height:"100%"},children:Object(R.jsx)(Jn,{orderFeedListElement:a})})}),Object(R.jsx)(Qn,{ready:f,inTheWork:x,completedForAllTime:o,completedToday:j})]})}):Object(R.jsx)(Pe,{})]})}function Kn(){return Object(R.jsx)(z,{children:Object(R.jsx)(Zn,{})})}var $n=n(199),er=n.n($n);function tr(e){var t=e.children;return Object(R.jsx)("div",{className:er.a.login_layout_container,children:t})}var nr,rr,ar,cr=T.getInstance(),ir=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr.postFetch("/auth/register",JSON.stringify({email:t,password:n,name:r}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),sr=function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr.postFetch("/auth/login",JSON.stringify({email:t,password:n}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),or=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr.postFetch("/auth/logout",JSON.stringify({token:t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ur=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr.getProtectedFetch("/auth/user");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),lr=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr.patchProtectedFetch("/auth/user",JSON.stringify({email:t,password:n,name:r}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),dr=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr.refreshTokenFetch();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),jr=T.getInstance(),br={user:{name:"",email:""},isLoading:!1,redirectTo:"",errorText:"",refreshToken:jr.refreshToken},hr=function(e,t){jr.token=e.accessToken,jr.refreshToken=e.refreshToken,t(wr(e.refreshToken))},pr=function(e){jr.logOut(),e(wr(""))},fr=Object(rt.b)("user/getRegisterFetch",function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a,c,i,s,o,l,d,j,b,h,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.email,a=t.password,c=t.name,i=n.rejectWithValue,s=n.dispatch,o=n.getState,l=o(),l.user.isLoading){e.next=17;break}return s(Sr(!0)),e.prev=5,e.next=8,ir(r,a,c);case 8:(d=e.sent).success&&(hr(d,s),s(kr(d.user))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),j=e.t0.message.split("==="),b=Object(q.a)(j,2),h=b[0],p=b[1],"403"===h?s(Cr(p)):ht(e.t0,s,i);case 16:s(wr(jr.refreshToken));case 17:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()),mr=Object(rt.b)("user/getLoginFetch",function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a,c,i,s,o,l,d,j,b,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.email,a=t.password,c=n.rejectWithValue,i=n.dispatch,s=n.getState,o=s(),o.user.isLoading){e.next=17;break}return i(Sr(!0)),e.prev=5,i(Nr("")),e.next=9,sr(r,a);case 9:(l=e.sent).success&&(hr(l,i),i(kr(l.user)),i(Nr(""))),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),d=e.t0.message.split("==="),j=Object(q.a)(d,2),b=j[0],h=j[1],"401"===b&&h===k.emailOrPasswordAreIncorrect?alert("\u041d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"):ht(e.t0,i,c);case 17:i(wr(jr.refreshToken));case 18:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}()),_r=Object(rt.b)("user/getLogoutFetch",function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a,c,i,s,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.rejectWithValue,a=n.dispatch,c=n.getState,i=c(),s=i.user,o=s.isLoading,l=s.refreshToken,o){e.next=15;break}return a(Sr(!0)),e.prev=4,a(Nr("")),e.next=8,or(l);case 8:e.sent.success,pr(a),a(kr({email:"",name:""})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),ht(e.t0,a,r);case 15:a(wr(jr.refreshToken));case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n){return e.apply(this,arguments)}}()),Or=Object(rt.b)("user/getUserFetch",function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a,c,i,s,o,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.rejectWithValue,a=n.dispatch,c=n.getState,i=c(),i.user.isLoading){e.next=15;break}return a(Sr(!0)),e.prev=4,e.next=7,ur();case 7:(s=e.sent).success?(a(kr(s.user)),a(wr(jr.refreshToken))):console.log(s),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),o=e.t0.message.split("==="),l=Object(q.a)(o,2),d=l[0],j=l[1],"403"===d&&j===k.jwtExpired||ht(e.t0,a,r);case 15:a(wr(jr.refreshToken));case 16:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,n){return e.apply(this,arguments)}}()),xr=Object(rt.b)("user/updateUserFetch",function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a,c,i,s,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.email,a=t.password,c=t.name,i=n.rejectWithValue,s=n.dispatch,o=n.getState,l=o(),l.user.isLoading){e.next=15;break}return s(Sr(!0)),e.prev=5,e.next=8,lr(r,a,c);case 8:(d=e.sent).success&&(s(kr(d.user)),s(wr(jr.refreshToken))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),ht(e.t0,s,i);case 15:s(wr(jr.refreshToken));case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()),gr=Object(rt.c)({name:"user",initialState:br,reducers:{setUser:function(e,t){e.user=t.payload},setRedirectPath:function(e,t){e.redirectTo=t.payload},setError:function(e,t){e.errorText=t.payload},setRefreshToken:function(e,t){e.refreshToken=t.payload},setIsLoading:function(e,t){e.isLoading=t.payload}},extraReducers:(nr={},Object(zt.a)(nr,fr.fulfilled.toString(),(function(e){e.isLoading=!1})),Object(zt.a)(nr,fr.rejected.toString(),(function(e){e.isLoading=!1})),Object(zt.a)(nr,mr.fulfilled.toString(),(function(e){e.isLoading=!1})),Object(zt.a)(nr,mr.rejected.toString(),(function(e){e.isLoading=!1})),Object(zt.a)(nr,_r.fulfilled.toString(),(function(e){e.isLoading=!1})),Object(zt.a)(nr,_r.rejected.toString(),(function(e){e.isLoading=!1})),Object(zt.a)(nr,Or.fulfilled.toString(),(function(e){e.isLoading=!1})),Object(zt.a)(nr,Or.rejected.toString(),(function(e){e.isLoading=!1})),Object(zt.a)(nr,xr.fulfilled.toString(),(function(e){e.isLoading=!1})),Object(zt.a)(nr,xr.rejected.toString(),(function(e){e.isLoading=!1})),nr)}),vr=gr.reducer,yr=gr.actions,kr=yr.setUser,Nr=yr.setRedirectPath,wr=yr.setRefreshToken,Sr=yr.setIsLoading,Cr=gr.actions.setError;!function(e){e.Email="email",e.Password="password",e.Login="login",e.Name="name",e.Code="code"}(rr||(rr={}));var Ir,Tr,Er={required:{value:!0,message:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043a \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044e"}},Lr=(ar={},Object(zt.a)(ar,rr.Email,{requiredValidation:Er,pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9-]+.+.[A-Z]{2,4}$/i,message:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 ..."}}),Object(zt.a)(ar,rr.Password,{requiredValidation:Er,custom:{isValid:function(e){return e.length>5},message:(Ir="5-\u0442\u0438","\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 ".concat(Ir," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432..."))}}),ar),Fr=function(e){var t=e.onSubmit,n=e.title,r=e.buttonName,a=e.children;return Object(R.jsxs)(R.Fragment,{children:[n?Object(R.jsx)("h2",{className:"text text_type_main-medium",children:n}):null,Object(R.jsxs)("form",{onSubmit:t,children:[a,r?Object(R.jsx)("div",{className:"login_button_container",children:Object(R.jsx)(Z.Button,{type:"primary",size:"medium",children:r})}):null]})]})},Rr=function(e){var t=Object(r.useState)((null===e||void 0===e?void 0:e.initialValues)||{}),n=Object(q.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)({}),s=Object(q.a)(i,2),o=s[0],d=s[1],j=function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),h()){t.next=4;break}return t.abrupt("return");case 4:d({}),(null===e||void 0===e?void 0:e.onSubmit)&&e.onSubmit();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=!0,n=null===e||void 0===e?void 0:e.validations;if(n){var r={};for(var c in n){var i,s=a[c],o=n[c],u=null===o||void 0===o?void 0:o.pattern;(null===u||void 0===u?void 0:u.value)&&!u.value.test(s)&&(t=!1,r[c]=u.message);var l,j=null===o||void 0===o?void 0:o.custom;if((null===j||void 0===j?void 0:j.isValid)&&!j.isValid(s)&&(t=!1,r[c]=j.message),(null===o||void 0===o||null===(i=o.required)||void 0===i?void 0:i.value)&&!s)t=!1,r[c]=null===o||void 0===o||null===(l=o.required)||void 0===l?void 0:l.message}t||d(r)}return t};return{data:a,setData:c,handleChange:function(e,t){return function(n){var r=t?t(n.target.value):n.target.value;d(Object(b.a)(Object(b.a)({},o),{},Object(zt.a)({},e,""))),c(Object(b.a)(Object(b.a)({},a),{},Object(zt.a)({},e,r)))}},handleSubmit:j,setErrors:d,errors:o}};function Pr(){var e,t,n=de(),a=le((function(e){return e.user.errorText})),c=le((function(e){return e.user.isLoading})),i=Rr({initialValues:(e={},Object(zt.a)(e,Tr.Name,""),Object(zt.a)(e,Tr.Email,""),Object(zt.a)(e,Tr.Password,""),e),validations:(t={},Object(zt.a)(t,Tr.Name,Er),Object(zt.a)(t,Tr.Email,Lr[Tr.Email]),Object(zt.a)(t,Tr.Password,Lr[Tr.Password]),t),onSubmit:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=4;break}return n(Cr("")),e.next=4,n(fr({email:d[Tr.Email],password:d[Tr.Password],name:d[Tr.Name]}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),s=i.handleSubmit,o=i.handleChange,d=i.data,j=i.errors;return Object(r.useEffect)((function(){return a&&alert(a),function(){n(Cr(""))}}),[n,a]),Object(R.jsxs)("section",{className:"login_container",children:[Object(R.jsxs)(Fr,{onSubmit:s,title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",buttonName:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",children:[Object(R.jsx)("div",{className:"login_input_container",children:Object(R.jsx)(Z.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:o(Tr.Name),value:d[Tr.Name],name:Tr.Name,error:!!j[Tr.Name],errorText:j[Tr.Name]})}),Object(R.jsx)("div",{className:"login_input_container",children:Object(R.jsx)(Z.Input,{type:"email",placeholder:"E-mail",onChange:o(Tr.Email),value:d[Tr.Email],name:Tr.Email,error:!!j[Tr.Email],errorText:j[Tr.Email]})}),Object(R.jsx)("div",{className:"login_input_container",children:Object(R.jsx)(Z.PasswordInput,{onChange:o(Tr.Password),value:d[Tr.Password],name:Tr.Password})})]}),Object(R.jsxs)("p",{className:"text text_type_main-default",children:[Object(R.jsx)("span",{children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(R.jsx)(E.b,{to:Pt,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}function Ar(){var e,t,n=de(),r=le((function(e){return e.user.isLoading})),a=Rr({initialValues:(e={},Object(zt.a)(e,rr.Email,""),Object(zt.a)(e,rr.Password,""),e),validations:(t={},Object(zt.a)(t,rr.Email,Lr[rr.Email]),Object(zt.a)(t,rr.Password,Lr[rr.Password]),t),onSubmit:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=3;break}return e.next=3,n(mr({email:s[rr.Email],password:s[rr.Password]}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),c=a.handleSubmit,i=a.handleChange,s=a.data,o=a.errors;return Object(R.jsxs)("section",{className:"login_container",children:[Object(R.jsxs)(Fr,{onSubmit:c,title:"\u0412\u0445\u043e\u0434",buttonName:"\u0412\u043e\u0439\u0442\u0438",children:[Object(R.jsx)("div",{className:"login_input_container",children:Object(R.jsx)(Z.Input,{type:"email",placeholder:"E-mail",onChange:i(rr.Email),value:s[rr.Email]||"",name:rr.Email,error:!!o[rr.Email],errorText:o[rr.Email]})}),Object(R.jsx)("div",{className:"login_input_container",children:Object(R.jsx)(Z.PasswordInput,{onChange:i(rr.Password),value:s[rr.Password]||"",name:rr.Password})})]}),Object(R.jsxs)("p",{className:"text text_type_main-default",children:[Object(R.jsx)("span",{children:"\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(R.jsx)(E.b,{to:At,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(R.jsxs)("p",{className:"text text_type_main-default",children:[Object(R.jsx)("span",{children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(R.jsx)(E.b,{to:Dt,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})}function Dr(){var e=Object(Y.g)(),t=Object(Y.h)(),n=Object(r.useState)(!1),a=Object(q.a)(n,2),c=a[0],i=a[1],s=Rr({initialValues:Object(zt.a)({},rr.Email,""),validations:Object(zt.a)({},rr.Email,Lr[rr.Email]),onSubmit:function(){var n=Object(l.a)(u.a.mark((function n(){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c){n.next=14;break}return i(!0),n.prev=2,n.next=5,Gt(j[rr.Email]);case 5:r=n.sent,i(!1),r.success&&e.push(Mt,{prevPath:t.pathname}),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(2),i(!1),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(){return n.apply(this,arguments)}}()}),o=s.handleSubmit,d=s.handleChange,j=s.data,b=s.errors;return Object(R.jsxs)("section",{className:"login_container",children:[Object(R.jsx)(Fr,{onSubmit:o,title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",buttonName:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",children:Object(R.jsx)("div",{className:"login_input_container",children:Object(R.jsx)(Z.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:d(rr.Email),value:j[rr.Email]||"",name:rr.Email,error:!!b[rr.Email],errorText:b[rr.Email]})})}),Object(R.jsxs)("p",{className:"text text_type_main-default",children:[Object(R.jsx)("span",{children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(R.jsx)(E.b,{to:Pt,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}function Mr(){var e,t,n=Object(Y.g)(),a=Object(r.useState)(!1),c=Object(q.a)(a,2),i=c[0],s=c[1],o=Object(r.useState)(!1),d=Object(q.a)(o,2),j=d[0],b=d[1],h=Rr({initialValues:(e={},Object(zt.a)(e,rr.Code,""),Object(zt.a)(e,rr.Password,""),e),validations:(t={},Object(zt.a)(t,rr.Code,Er),Object(zt.a)(t,rr.Password,Lr[rr.Password]),t),onSubmit:function(){var e=Object(l.a)(u.a.mark((function e(){var t,r,a,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=17;break}return b(!0),e.prev=2,e.next=5,Xt(m[rr.Password],m[rr.Code]);case 5:t=e.sent,b(!1),t.success&&n.push(Pt),e.next=17;break;case 10:e.prev=10,e.t0=e.catch(2),r=e.t0.message.split("==="),a=Object(q.a)(r,2),c=a[0],i=a[1],alert(i),console.log(c),console.log(e.t0),b(!1);case 17:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}()}),p=h.handleSubmit,f=h.handleChange,m=h.data,_=h.errors;return Object(R.jsxs)("section",{className:"login_container",children:[Object(R.jsxs)(Fr,{onSubmit:p,title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",buttonName:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:[Object(R.jsx)("div",{className:"login_input_container",children:Object(R.jsx)(Z.Input,{type:i?"text":"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:f(rr.Password),icon:i?"HideIcon":"ShowIcon",value:m[rr.Password],name:rr.Password,onIconClick:function(){s(!i)},error:!!_[rr.Password],errorText:_[rr.Password]})}),Object(R.jsx)("div",{className:"login_input_container",children:Object(R.jsx)(Z.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:f(rr.Code),value:m[rr.Code],name:rr.Code,error:!!_[rr.Code],errorText:_[rr.Code]})})]}),Object(R.jsxs)("p",{className:"text text_type_main-default",children:[Object(R.jsx)("span",{children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(R.jsx)(E.b,{to:Pt,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}!function(e){e.Name="name",e.Email="email",e.Password="password"}(Tr||(Tr={}));var Br={visible:{opacity:1,transition:{duration:.6}},hidden:{opacity:0},exit:{opacity:0}},Wr={visible:function(e){return{opacity:1,x:0,transition:{delay:.3*e,duration:.5}}},hidden:{opacity:0,x:-100}},Vr=n(161),Ur=n.n(Vr);function zr(){var e,t,n=de(),a=Object(r.useState)(""),c=Object(q.a)(a,2),i=c[0],s=c[1],o=le((function(e){return e.user.isLoading})),d=le((function(e){return e.user.user})),j=Rr({initialValues:(e={},Object(zt.a)(e,rr.Name,""),Object(zt.a)(e,rr.Password,""),Object(zt.a)(e,rr.Login,""),e),validations:(t={},Object(zt.a)(t,rr.Name,Er),Object(zt.a)(t,rr.Password,Lr[rr.Password]),Object(zt.a)(t,rr.Login,Er),t),onSubmit:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=3;break}return e.next=3,n(xr({name:m[rr.Name],email:m[rr.Login],password:m[rr.Password]}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),h=j.handleSubmit,p=j.handleChange,f=j.setData,m=j.data,_=j.errors,O=function(e){s(e.currentTarget.name)},x=function(e){e.preventDefault(),e.stopPropagation(),console.log(e.currentTarget)},g=function(){s("")};return Object(r.useEffect)((function(){n(Or())}),[]),Object(r.useEffect)((function(){d.name&&f((function(e){var t;return Object(b.a)(Object(b.a)({},e),{},(t={},Object(zt.a)(t,rr.Name,d.name),Object(zt.a)(t,rr.Login,d.email),t))}))}),[f,d]),Object(R.jsx)(Q.a.section,{className:"login_container ".concat(Ur.a.motion_container),variants:Br,initial:"hidden",exit:"exit",animate:"visible",children:Object(R.jsx)(H.a,{exitBeforeEnter:!0,children:o?Object(R.jsx)(Pe,{}):Object(R.jsx)(Q.a.div,{className:"login_container",variants:Br,initial:"hidden",exit:"exit",animate:"visible",children:Object(R.jsxs)(Fr,{onSubmit:h,children:[Object(R.jsx)("div",{className:"login_input_container",children:Object(R.jsx)(Z.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:p(rr.Name),icon:i===rr.Name?"CloseIcon":"EditIcon",value:m[rr.Name],name:rr.Name,error:!!_[rr.Name],errorText:_[rr.Name],onFocus:O,onBlur:g,onIconClick:x})}),Object(R.jsx)("div",{className:"login_input_container",children:Object(R.jsx)(Z.Input,{type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",onChange:p(rr.Login),icon:i===rr.Login?"CloseIcon":"EditIcon",value:m[rr.Login],name:rr.Login,error:!!_[rr.Login],errorText:_[rr.Login],onFocus:O,onBlur:g,onIconClick:x})}),Object(R.jsx)("div",{className:"login_input_container",children:Object(R.jsx)(Z.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:p(rr.Password),icon:i===rr.Password?"CloseIcon":"EditIcon",value:m[rr.Password],name:rr.Password,error:!!_[rr.Password],errorText:_[rr.Password],onFocus:O,onBlur:g,onIconClick:x})}),Object(R.jsx)("button",{type:"submit",style:{display:"none"},children:"Submit"}),Object(R.jsxs)("div",{className:"login_input_container ".concat(Ur.a.buttons_container),children:[Object(R.jsx)("div",{children:Object(R.jsx)(E.b,{to:"#",onClick:function(e){e.preventDefault(),f((function(e){var t;return Object(b.a)(Object(b.a)({},e),{},(t={},Object(zt.a)(t,rr.Name,d.name),Object(zt.a)(t,rr.Login,d.email),t))}))},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(R.jsx)(Z.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})})})}function Yr(){return Object(R.jsx)(z,{children:Object(R.jsx)(tr,{children:Object(R.jsx)(Dr,{})})})}var Jr=n(162),qr=n.n(Jr);function Gr(){var e=Object(Y.i)().id;return Object(R.jsx)(z,{children:Object(R.jsxs)("div",{className:qr.a.ingredient_page_container,children:[Object(R.jsx)("h2",{className:"text text_type_main-large ".concat(qr.a.ingredient_page_container_header),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(R.jsx)(pe,{id:e})]})})}function Xr(){return Object(R.jsx)(z,{children:Object(R.jsx)(tr,{children:Object(R.jsx)(Ar,{})})})}function Hr(){return Object(R.jsx)(z,{children:Object(R.jsx)("h2",{children:"Oops!\u2026 I Did It Again"})})}var Qr=n(163),Zr=n.n(Qr),Kr=function(){var e=Object(r.useState)([]),t=Object(q.a)(e,2),n=t[0],a=t[1],c=le((function(e){return e.order.orderFeed})),i=le((function(e){return e.ingredients.ingredients})),s=de();return Object(r.useEffect)((function(){return i.length>0&&s(we()),function(){s(Se())}}),[i]),Object(r.useEffect)((function(){c&&a(c.orders)}),[c]),n.length>0?Object(R.jsx)(Q.a.div,{className:Zr.a.motion_container,variants:Br,initial:"hidden",exit:"exit",animate:"visible",children:Object(R.jsx)("section",{className:Zr.a.main_Container,children:Object(R.jsx)(Oe,{style:{height:"100%"},children:Object(R.jsx)(Jn,{orderFeedListElement:n,showStatus:!0})})})}):Object(R.jsx)(Pe,{})};function $r(){var e=Object(Y.h)(),t=Object(Y.j)().path;return Object(R.jsx)(H.a,{exitBeforeEnter:!0,children:Object(R.jsxs)(Y.d,{location:e,children:[Object(R.jsx)(Y.b,{exact:!0,path:t,children:Object(R.jsx)(zr,{})}),Object(R.jsx)(Y.b,{path:"".concat(t).concat(Wt),children:Object(R.jsx)(Kr,{})})]},e.key)})}var ea=n(61),ta=n.n(ea),na="/profile/orders";function ra(){var e=de(),t=Object(Y.h)().pathname,n=function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.stopPropagation(),n.preventDefault(),e(_r());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(R.jsx)(z,{children:Object(R.jsxs)("section",{className:ta.a.profile_page_container,children:[Object(R.jsxs)("ul",{className:ta.a.profile_page_container_menu,children:[Object(R.jsx)(Q.a.li,{className:"text text_type_main-medium",variants:Wr,initial:"hidden",animate:"visible",custom:0,children:Object(R.jsx)(E.b,{to:Bt,className:"".concat(ta.a.menu_link," ").concat(t===Bt?ta.a.active:""),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(R.jsx)(Q.a.li,{className:"text text_type_main-medium",variants:Wr,initial:"hidden",animate:"visible",custom:1,children:Object(R.jsx)(E.b,{to:na,className:"".concat(ta.a.menu_link," ").concat(t===na?ta.a.active:""),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(R.jsx)(Q.a.li,{className:"text text_type_main-medium",variants:Wr,initial:"hidden",animate:"visible",custom:2,children:Object(R.jsx)(E.b,{to:"#",className:ta.a.menu_link,onClick:n,children:"\u0412\u044b\u0445\u043e\u0434"})}),Object(R.jsx)("li",{className:"text text_type_main-default",children:Object(R.jsx)("p",{children:Object(R.jsxs)("span",{children:["\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435",Object(R.jsx)("br",{})," \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"]})})})]}),Object(R.jsx)($r,{})]})})}function aa(){return Object(R.jsx)(z,{children:Object(R.jsx)(tr,{children:Object(R.jsx)(Pr,{})})})}function ca(){var e=Object(Y.h)(),t=Object(Y.g)();return e.state&&e.state.prevPath&&e.state.prevPath===Dt||t.push(Dt),Object(R.jsx)(z,{children:Object(R.jsx)(tr,{children:Object(R.jsx)(Mr,{})})})}var ia=function(){var e=Object(Y.i)().id;return Object(R.jsx)(z,{children:Object(R.jsx)(Xe,{id:e})})},sa=n(123),oa=["children"];function ua(e){var t=e.children,n=Object(sa.a)(e,oa),a=le((function(e){return e.user.refreshToken})),c=Object(r.useState)(!!a),i=Object(q.a)(c,2),s=i[0],o=i[1];return Object(r.useEffect)((function(){o(!!a)}),[a]),Object(R.jsx)(Y.b,Object(b.a)(Object(b.a)({},n),{},{render:function(e){var n=e.location;return s?Object(R.jsx)(Y.a,{to:{pathname:n.state&&n.state.from||"",state:{}}}):t}}))}var la=["children","redirectTo"];function da(e){var t=e.children,n=e.redirectTo,a=void 0===n?Pt:n,c=Object(sa.a)(e,la),i=le((function(e){return e.user.refreshToken})),s=Object(r.useState)(!!i),o=Object(q.a)(s,2),u=o[0],l=o[1];return Object(r.useEffect)((function(){l(!!i)}),[i]),Object(R.jsx)(Y.b,Object(b.a)(Object(b.a)({},c),{},{render:function(e){var n=e.location,r=n.state||{};return u?t:Object(R.jsx)(Y.a,{to:{pathname:a,state:Object(b.a)(Object(b.a)({},r),{},{from:n.pathname})}})}}))}function ja(){var e=Object(Y.h)(),t=Object(Y.g)(),n=de(),a=le((function(e){return e.app.error})),c=Object(r.useMemo)((function(){return e.state&&e.state.background}),[e.state]);Object(r.useEffect)((function(){n(dt(null))}),[n,e.pathname]);var i=Object(r.useMemo)((function(){return"PUSH"===t.action}),[t.action]),s=Object(r.useMemo)((function(){return i&&c?c:e}),[c,i,e]);return Object(R.jsx)(R.Fragment,{children:a?Object(R.jsx)(z,{children:Object(R.jsx)(J,{error:a})}):Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(Y.d,{location:s,children:[Object(R.jsx)(Y.b,{path:"",exact:!0,children:Object(R.jsx)(Mn,{})}),Object(R.jsx)(Y.b,{path:"".concat(Ut,"/:id"),children:Object(R.jsx)(ia,{})}),Object(R.jsx)(Y.b,{path:Ut,exact:!0,children:Object(R.jsx)(Kn,{})}),Object(R.jsx)(ua,{path:Pt,children:Object(R.jsx)(Xr,{})}),Object(R.jsx)(ua,{path:At,children:Object(R.jsx)(aa,{})}),Object(R.jsx)(ua,{path:Dt,children:Object(R.jsx)(Yr,{})}),Object(R.jsx)(ua,{path:Mt,children:Object(R.jsx)(ca,{})}),Object(R.jsx)(da,{path:"".concat(Bt).concat(Wt,"/:id"),children:Object(R.jsx)(ia,{})}),Object(R.jsx)(da,{path:Bt,children:Object(R.jsx)(ra,{})}),Object(R.jsx)(Y.b,{path:"".concat(Vt,"/:id"),children:Object(R.jsx)(Gr,{})}),Object(R.jsx)(Y.b,{path:Vt,exact:!0,children:Object(R.jsx)(Mn,{})}),Object(R.jsx)(Y.b,{children:Object(R.jsx)(Hr,{})})]}),c&&i&&Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(Y.b,{path:"".concat(Bt).concat(Wt,"/:id"),children:Object(R.jsx)(ue,{children:Object(R.jsx)(Xe,{id:"",isShowTitle:!1})})}),Object(R.jsx)(Y.b,{path:"".concat(Ut,"/:id"),children:Object(R.jsx)(ue,{children:Object(R.jsx)(Xe,{id:"",isShowTitle:!1})})}),Object(R.jsx)(Y.b,{path:"".concat(Vt,"/:id"),children:Object(R.jsx)(ue,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:Object(R.jsx)(pe,{id:""})})})]})]})})}n(293);var ba=n(106),ha=n.n(ba),pa=n(200),fa=n.n(pa);function ma(e){var t=e.Icon,n=e.link,a=e.children,c=e.entry,i=void 0!==c&&c,s=Object(Y.h)(),o=Object(r.useState)(!1),u=Object(q.a)(o,2),l=u[0],d=u[1],j=Object(r.useState)(!1),b=Object(q.a)(j,2),h=b[0],p=b[1],f=h?"text_color_primary":"text_color_inactive",m=h?"primary":"secondary",_=Object(r.useMemo)((function(){return i?s.pathname.indexOf(n)>=0:s.pathname===n}),[i,n,s.pathname]);return Object(r.useEffect)((function(){d(_)}),[_]),Object(r.useEffect)((function(){p(!!l)}),[l]),Object(R.jsxs)(E.c,{to:{pathname:n},className:"p-4 pl-5 pr-5 ".concat(f," ").concat(fa.a.menu_button),onMouseEnter:function(){return p(!0)},onMouseLeave:function(){return p(l)},children:[t?Object(R.jsx)(t,{type:m}):null,a]})}var _a=n(201),Oa=n.n(_a);function xa(){return Object(R.jsxs)("menu",{className:"text text_type_main-default ".concat(Oa.a.left_menu),children:[Object(R.jsx)(ma,{Icon:Z.BurgerIcon,link:"/",children:Object(R.jsx)("span",{children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})}),Object(R.jsx)(ma,{Icon:Z.ListIcon,link:Ut,children:Object(R.jsx)("span",{children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})})]})}var ga=n(202),va=n.n(ga),ya=function(){return Object(R.jsx)(E.b,{className:"pt-6 pb-6 ".concat(va.a.logo_link),to:"",children:Object(R.jsx)(Z.Logo,{})})};function ka(){return Object(R.jsx)(ma,{Icon:Z.ProfileIcon,link:"".concat(Bt).concat(Wt),entry:!0,children:Object(R.jsx)("span",{children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})})}function Na(){return Object(R.jsxs)("nav",{className:ha.a.app_header,children:[Object(R.jsx)("div",{className:ha.a.content_left,children:Object(R.jsx)(xa,{})}),Object(R.jsx)("div",{className:ha.a.content_center,children:Object(R.jsx)(ya,{})}),Object(R.jsx)("div",{className:ha.a.content_right,children:Object(R.jsx)(ka,{})})]})}var wa=n(205),Sa=n(204),Ca=function(e){Object(wa.a)(n,e);var t=Object(Sa.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).state={hasError:!1},r}return Object(j.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log("\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",e,t)}},{key:"render",value:function(){return this.state.hasError?Object(R.jsxs)("section",{children:[Object(R.jsx)("h1",{children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :("}),Object(R.jsx)("p",{children:"\u0412 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return console.log("getDerivedStateFromError",e),{hasError:!0}}}]),n}(r.Component);var Ia=function(){var e=le((function(e){return e.app.isLoading})),t=de();return Object(r.useEffect)((function(){t(Ht())}),[t]),Object(R.jsx)("div",{className:"App",children:Object(R.jsx)(Ca,{children:Object(R.jsxs)(E.a,{basename:"/".concat("."),children:[Object(R.jsx)(P,{children:Object(R.jsx)(Na,{})}),e?Object(R.jsx)(z,{children:Object(R.jsx)(Pe,{})}):Object(R.jsx)(ja,{})]})})})},Ta=(n(294),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,309)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))}),Ea=function(){function e(){Object(d.a)(this,e),this.sockets={}}return Object(j.a)(e,[{key:"addSocket",value:function(e,t){e in this.sockets||(this.sockets[e]=new WebSocket(t))}},{key:"closeSocket",value:function(e){e in this.sockets&&(this.sockets[e].close(1e3,"\u0440\u0430\u0431\u043e\u0442\u0430 \u0437\u0430\u043a\u043e\u043d\u0447\u0435\u043d\u0430"),delete this.sockets[e])}},{key:"getSocket",value:function(e){if(e in this.sockets)return this.sockets[e]}}],[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();Ea._instance=void 0;var La=Ea,Fa=T.getInstance(),Ra=La.getInstance(),Pa=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,a,c,i,s,o,l,d,j,b,h,p,f,m,_,O;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.wsUrl,r=t.wsName,a=t.ingredients,c=t.onMessageCallBack,i=t.action,s=t.typeWsStart,o=t.protect,l=void 0!==o&&o,d=t.typeWsSend,j=t.typeWsClose,b=t.isInvertReturnedIngredients,h=void 0!==b&&b,p=t.wsStartCallBack,f=i.type,m=i.payload,f!==s){e.next=19;break}if(p&&p(),!l){e.next=13;break}return e.prev=5,e.next=8,dr();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0);case 13:if(!Fa.isLoadingRefreshToken){e.next=18;break}return e.next=16,Fa.waitFor((function(){return Fa.isLoadingRefreshToken}),(function(){return Ra.addSocket(r,"".concat(n).concat(l?"?token=".concat(Fa.token):""))}));case 16:e.next=19;break;case 18:Ra.addSocket(r,"".concat(n).concat(l?"?token=".concat(Fa.token):""));case 19:Ra.getSocket(r)&&((_=Ra.getSocket(r)).onopen=function(e){console.log("".concat(r,":SUCCESS"),e)},_.onerror=function(e){console.log("".concat(r,":ERROR"),e)},_.onmessage=function(e){Aa(e,_,a,c,h)},_.onclose=function(e){console.log("".concat(r,":CLOSE"),e)},d&&f===d&&(O=m,_.send(JSON.stringify(O))),j&&f===j&&Ra.closeSocket(r));case 20:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}(),Aa=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];"ping"===e.data&&t.send("pong");var c=e.data,i=JSON.parse(c);if(i.success){var s=Da(i,n,a);r(s)}},Da=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.orders.reduce(Ma(t),[]);return n&&r.reverse(),Object(b.a)(Object(b.a)({},e),{},{orders:r})},Ma=function(e){return function(t,n){var r=Ba(n,e),a=Object(b.a)(Object(b.a)({},n),{},{ingredients:Object(st.a)(r)});return t.push(a),t}},Ba=function(e,t){var n=[];return e.ingredients.forEach((function(e){var r=Wa(t,e);r&&n.push(Object(b.a)({},r))})),n},Wa=function(e,t){return e.find((function(e){return e._id===t}))},Va=Object(rt.c)({name:"currentIngredient",initialState:{currentIngredient:null},reducers:{setCurrentIngredient:function(e,t){e.currentIngredient=t.payload}}}),Ua=Va.reducer,za=(Va.actions.setCurrentIngredient,Object(rt.a)({reducer:{app:ut,ingredients:Zt,currentIngredient:Ua,constructorIngredients:ft,order:rn,user:vr},middleware:function(e){return e({serializableCheck:!1}).prepend((function(e){return function(t){return function(){var n=Object(l.a)(u.a.mark((function n(r){var a,c,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.dispatch,c=e.getState,i=c().ingredients.ingredients,n.next=4,Pa({typeWsStart:xe,wsUrl:"wss://norma.nomoreparties.space/orders/all",wsName:"orders_all",action:r,ingredients:i,onMessageCallBack:function(e){a(sn(e))},typeWsSend:"WS_ORDER_ALL_SEND_MESSAGE",typeWsClose:ge});case 4:Pa({typeWsStart:ve,wsUrl:"wss://norma.nomoreparties.space/orders",wsName:"orders",action:r,protect:!0,ingredients:i,onMessageCallBack:function(e){a(cn(e))},typeWsSend:"WS_ORDER_SEND_MESSAGE",typeWsClose:ye,isInvertReturnedIngredients:!0}),t(r);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})).concat()},devTools:!1})),Ya=za;T.getInstance(),i.a.render(Object(R.jsx)(a.a.StrictMode,{children:Object(R.jsx)(s.a,{store:Ya,children:Object(R.jsx)(Ia,{})})}),document.getElementById("root")),Ta()},39:function(e,t,n){e.exports={main_container:"order-by-id_main_container__1L5zx",flex_container:"order-by-id_flex_container__2cges",flex_container_pt:"order-by-id_flex_container_pt__39uo0",flex_container_pt_min:"order-by-id_flex_container_pt_min__3CTq0",id:"order-by-id_id__tquym",status:"order-by-id_status__21yaD",done_status:"order-by-id_done_status__2-sWC",canceled_status:"order-by-id_canceled_status__oQktY",prepared_status:"order-by-id_prepared_status__3-2hv",h3:"order-by-id_h3__3qQKz",bottom_container:"order-by-id_bottom_container__1Z6nP",date:"order-by-id_date__2VRyv"}},50:function(e,t,n){e.exports={main_container:"order-feed-element_main_container__3-YhC",done_status:"order-feed-element_done_status__1S_TY",canceled_status:"order-feed-element_canceled_status__2-cVL",prepared_status:"order-feed-element_prepared_status__EFheo",top_container:"order-feed-element_top_container__1pwwm",data:"order-feed-element_data__1XDBI",bottom_container:"order-feed-element_bottom_container__3tRxl"}},61:function(e,t,n){e.exports={profile_page_container:"profile-page_profile_page_container__1IBPX",profile_page_container_menu:"profile-page_profile_page_container_menu__2pBCf",menu_link:"profile-page_menu_link__2MW6G",active:"profile-page_active__2DIiL"}},72:function(e,t,n){e.exports={burger_constructor:"burger-constructor_burger_constructor__1f-2q",burger_constructor_body:"burger-constructor_burger_constructor_body__2a7KL",burger_list_container:"burger-constructor_burger_list_container__2SiWG",burger_list_container_target_illumination:"burger-constructor_burger_list_container_target_illumination__3h44O",burger_list_container_over_illumination:"burger-constructor_burger_list_container_over_illumination__1tBRx",burger_list_scroll:"burger-constructor_burger_list_scroll__2crCp"}},73:function(e,t,n){e.exports={ingredient_card:"ingredient-card_ingredient_card__1Xi-l",ingredient_count:"ingredient-card_ingredient_count__1h3g6",ingredient_image:"ingredient-card_ingredient_image__3uGdZ",ingredient_price_container:"ingredient-card_ingredient_price_container__1GqdR",ingredient_price_icon:"ingredient-card_ingredient_price_icon__2enUI",ingredient_name:"ingredient-card_ingredient_name__UIQI7"}},74:function(e,t,n){e.exports={status_table:"statistics_status_table__z9vm_",ready:"statistics_ready__bJP2Q",completed_block:"statistics_completed_block__1TaUh"}},88:function(e,t,n){e.exports={loader_container:"loader_loader_container__1dRZ-",loader1:"loader_loader1__BdH45",loader2:"loader_loader2__GDz9v",loader3:"loader_loader3__2TV8R",loader4:"loader_loader4__3RvgU"}},89:function(e,t,n){e.exports={order_details:"order-details_order_details__220Tz",order_icon:"order-details_order_icon__4KJmo",status_text:"order-details_status_text__3BFCI",bottom_text:"order-details_bottom_text__2l6Jv"}}},[[295,1,2]]]);
//# sourceMappingURL=main.a13e8a97.chunk.js.map